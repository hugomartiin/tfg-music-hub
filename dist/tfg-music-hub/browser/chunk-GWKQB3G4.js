var SN=Object.create;var jh=Object.defineProperty,NN=Object.defineProperties,RN=Object.getOwnPropertyDescriptor,MN=Object.getOwnPropertyDescriptors,PN=Object.getOwnPropertyNames,UI=Object.getOwnPropertySymbols,HI=Object.getPrototypeOf,qI=Object.prototype.hasOwnProperty,xN=Object.prototype.propertyIsEnumerable,kN=Reflect.get;var $I=(t,e,n)=>e in t?jh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fe=(t,e)=>{for(var n in e||={})qI.call(e,n)&&$I(t,n,e[n]);if(UI)for(var n of UI(e))xN.call(e,n)&&$I(t,n,e[n]);return t},ye=(t,e)=>NN(t,MN(e));var T$=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ON=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of PN(e))!qI.call(t,i)&&i!==n&&jh(t,i,{get:()=>e[i],enumerable:!(r=RN(e,i))||r.enumerable});return t};var b$=(t,e,n)=>(n=t!=null?SN(HI(t)):{},ON(e||!t||!t.__esModule?jh(n,"default",{value:t,enumerable:!0}):n,t));var Kn=(t,e,n)=>kN(HI(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{c(n.next(u))}catch(l){i(l)}},s=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((n=n.apply(t,e)).next())});function K(t){return typeof t=="function"}function Si(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var bc=Si(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Sr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Pe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(K(r))try{r()}catch(o){e=o instanceof bc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{zI(o)}catch(s){e=e??[],s instanceof bc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new bc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)zI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Sr(n,e)}remove(e){let{_finalizers:n}=this;n&&Sr(n,e),e instanceof t&&e._removeParent(this)}};Pe.EMPTY=(()=>{let t=new Pe;return t.closed=!0,t})();var Bh=Pe.EMPTY;function Cc(t){return t instanceof Pe||t&&"closed"in t&&K(t.remove)&&K(t.add)&&K(t.unsubscribe)}function zI(t){K(t)?t():t.unsubscribe()}var Lt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ni={setTimeout(t,e,...n){let{delegate:r}=Ni;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ni;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ac(t){Ni.setTimeout(()=>{let{onUnhandledError:e}=Lt;if(e)e(t);else throw t})}function As(){}var GI=Uh("C",void 0,void 0);function WI(t){return Uh("E",void 0,t)}function KI(t){return Uh("N",t,void 0)}function Uh(t,e,n){return{kind:t,value:e,error:n}}var Nr=null;function Ri(t){if(Lt.useDeprecatedSynchronousErrorHandling){let e=!Nr;if(e&&(Nr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Nr;if(Nr=null,n)throw r}}else t()}function QI(t){Lt.useDeprecatedSynchronousErrorHandling&&Nr&&(Nr.errorThrown=!0,Nr.error=t)}var Rr=class extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Cc(e)&&e.add(this)):this.destination=LN}static create(e,n,r){return new Mi(e,n,r)}next(e){this.isStopped?Hh(KI(e),this):this._next(e)}error(e){this.isStopped?Hh(WI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hh(GI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},FN=Function.prototype.bind;function $h(t,e){return FN.call(t,e)}var qh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Sc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Sc(r)}else Sc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Sc(n)}}},Mi=class extends Rr{constructor(e,n,r){super();let i;if(K(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Lt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$h(e.next,o),error:e.error&&$h(e.error,o),complete:e.complete&&$h(e.complete,o)}):i=e}this.destination=new qh(i)}};function Sc(t){Lt.useDeprecatedSynchronousErrorHandling?QI(t):Ac(t)}function VN(t){throw t}function Hh(t,e){let{onStoppedNotification:n}=Lt;n&&Ni.setTimeout(()=>n(t,e))}var LN={closed:!0,next:As,error:VN,complete:As};var Pi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function vt(t){return t}function YI(...t){return zh(t)}function zh(t){return t.length===0?vt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ne=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=BN(n)?n:new Mi(n,r,i);return Ri(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ZI(r),new r((i,o)=>{let s=new Mi({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Pi](){return this}pipe(...n){return zh(n)(this)}toPromise(n){return n=ZI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function ZI(t){var e;return(e=t??Lt.Promise)!==null&&e!==void 0?e:Promise}function jN(t){return t&&K(t.next)&&K(t.error)&&K(t.complete)}function BN(t){return t&&t instanceof Rr||jN(t)&&Cc(t)}var{isArray:UN}=Array,{getPrototypeOf:$N,prototype:HN,keys:qN}=Object;function Nc(t){if(t.length===1){let e=t[0];if(UN(e))return{args:e,keys:null};if(zN(e)){let n=qN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function zN(t){return t&&typeof t=="object"&&$N(t)===HN}function Rc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function XI(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function JI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mr(t){return this instanceof Mr?(this.v=t,this):new Mr(t)}function eE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(D){return Promise.resolve(D).then(y,p)}}function c(y,D){r[y]&&(i[y]=function(R){return new Promise(function(N,k){o.push([y,R,N,k])>1||u(y,R)})},D&&(i[y]=D(i[y])))}function u(y,D){try{l(r[y](D))}catch(R){m(o[0][3],R)}}function l(y){y.value instanceof Mr?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,D){y(D),o.shift(),o.length&&u(o[0][0],o[0][1])}}function tE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof JI=="function"?JI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var Mc=t=>t&&typeof t.length=="number"&&typeof t!="function";function Pc(t){return K(t?.then)}function xc(t){return K(t[Pi])}function kc(t){return Symbol.asyncIterator&&K(t?.[Symbol.asyncIterator])}function Oc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function GN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fc=GN();function Vc(t){return K(t?.[Fc])}function Lc(t){return eE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Mr(n.read());if(i)return yield Mr(void 0);yield yield Mr(r)}}finally{n.releaseLock()}})}function jc(t){return K(t?.getReader)}function xe(t){if(t instanceof ne)return t;if(t!=null){if(xc(t))return WN(t);if(Mc(t))return KN(t);if(Pc(t))return QN(t);if(kc(t))return nE(t);if(Vc(t))return YN(t);if(jc(t))return ZN(t)}throw Oc(t)}function WN(t){return new ne(e=>{let n=t[Pi]();if(K(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function KN(t){return new ne(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function QN(t){return new ne(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ac)})}function YN(t){return new ne(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function nE(t){return new ne(e=>{JN(t,e).catch(n=>e.error(n))})}function ZN(t){return nE(Lc(t))}function JN(t,e){var n,r,i,o;return XI(this,void 0,void 0,function*(){try{for(n=tE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function rE(t){return t&&K(t.schedule)}function iE(t){return t[t.length-1]}function Bc(t){return K(iE(t))?t.pop():void 0}function Qn(t){return rE(iE(t))?t.pop():void 0}function re(t,e,n,r,i){return new Gh(t,e,n,r,i)}var Gh=class extends Rr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Wh(t){return K(t?.lift)}function se(t){return e=>{if(Wh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _t(t,e){return se((n,r)=>{let i=0;n.subscribe(re(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:XN}=Array;function eR(t,e){return XN(e)?t(...e):t(e)}function Uc(t){return _t(e=>eR(t,e))}function $c(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Kh(...t){let e=Bc(t),{args:n,keys:r}=Nc(t),i=new ne(o=>{let{length:s}=n;if(!s){o.complete();return}let c=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;xe(n[h]).subscribe(re(o,m=>{p||(p=!0,l--),c[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?$c(r,c):c),o.complete())}))}});return e?i.pipe(Uc(e)):i}function Qh(){return se((t,e)=>{let n=null;t._refCount++;let r=re(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Yh=class extends ne{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Wh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pe;let n=this.getSubject();e.add(this.source.subscribe(re(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pe.EMPTY)}return e}refCount(){return Qh()(this)}};var oE=Si(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var At=(()=>{class t extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Hc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new oE}next(n){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Bh:(this.currentObservers=null,o.push(n),new Pe(()=>{this.currentObservers=null,Sr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ne;return n.source=this,n}}return t.create=(e,n)=>new Hc(e,n),t})(),Hc=class extends At{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Bh}};var Ss=class extends At{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Zh={now(){return(Zh.delegate||Date).now()},delegate:void 0};var qc=class extends Pe{constructor(e,n){super()}schedule(e,n=0){return this}};var Ns={setInterval(t,e,...n){let{delegate:r}=Ns;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ns;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var xi=class extends qc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ns.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ns.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Sr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ki=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ki.now=Zh.now;var Oi=class extends ki{constructor(e,n=ki.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Rs=new Oi(xi);var zc=class extends xi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Gc=class extends Oi{};var Jh=new Gc(zc);var Ms=new ne(t=>t.complete());function dt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Yn(t,e=0){return se((n,r)=>{n.subscribe(re(r,i=>dt(r,t,()=>r.next(i),e),()=>dt(r,t,()=>r.complete(),e),i=>dt(r,t,()=>r.error(i),e)))})}function Zn(t,e=0){return se((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function sE(t,e){return xe(t).pipe(Zn(e),Yn(e))}function aE(t,e){return xe(t).pipe(Zn(e),Yn(e))}function cE(t,e){return new ne(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function uE(t,e){return new ne(n=>{let r;return dt(n,e,()=>{r=t[Fc](),dt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>K(r?.return)&&r.return()})}function Wc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ne(n=>{dt(n,e,()=>{let r=t[Symbol.asyncIterator]();dt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function lE(t,e){return Wc(Lc(t),e)}function dE(t,e){if(t!=null){if(xc(t))return sE(t,e);if(Mc(t))return cE(t,e);if(Pc(t))return aE(t,e);if(kc(t))return Wc(t,e);if(Vc(t))return uE(t,e);if(jc(t))return lE(t,e)}throw Oc(t)}function jt(t,e){return e?dE(t,e):xe(t)}function Xh(...t){let e=Qn(t);return jt(t,e)}function tR(t,e){let n=K(t)?t:()=>t,r=i=>i.error(n());return new ne(e?i=>e.schedule(r,0,i):r)}function nR(t){return!!t&&(t instanceof ne||K(t.lift)&&K(t.subscribe))}var Pr=Si(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function rR(...t){let e=Qn(t),n=Bc(t),{args:r,keys:i}=Nc(t);if(r.length===0)return jt([],e);let o=new ne(iR(r,e,i?s=>$c(i,s):vt));return n?o.pipe(Uc(n)):o}function iR(t,e,n=vt){return r=>{hE(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)hE(e,()=>{let l=jt(t[u],e),h=!1;l.subscribe(re(r,p=>{o[u]=p,h||(h=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function hE(t,e,n){t?dt(n,t,e):e()}function fE(t,e,n,r,i,o,s,c){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?D(R):u.push(R),D=R=>{o&&e.next(R),l++;let N=!1;xe(n(R,h++)).subscribe(re(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let k=u.shift();s?dt(e,s,()=>D(k)):D(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(re(e,y,()=>{p=!0,m()})),()=>{c?.()}}function xr(t,e,n=1/0){return K(e)?xr((r,i)=>_t((o,s)=>e(r,o,i,s))(xe(t(r,i))),n):(typeof e=="number"&&(n=e),se((r,i)=>fE(r,i,t,n)))}function ef(t=1/0){return xr(vt,t)}function pE(){return ef(1)}function Kc(...t){return pE()(jt(t,Qn(t)))}function oR(t){return new ne(e=>{xe(t()).subscribe(e)})}function Fi(t,e){return se((n,r)=>{let i=0;n.subscribe(re(r,o=>t.call(e,o,i++)&&r.next(o)))})}function gE(t){return se((e,n)=>{let r=null,i=!1,o;r=e.subscribe(re(n,void 0,void 0,s=>{o=xe(t(s,gE(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function mE(t,e,n,r,i){return(o,s)=>{let c=n,u=e,l=0;o.subscribe(re(s,h=>{let p=l++;u=c?t(u,h,p):(c=!0,h),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function sR(t,e){return K(e)?xr(t,e,1):xr(t,1)}function aR(t,e=Rs){return se((n,r)=>{let i=null,o=null,s=null,c=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}c()}n.subscribe(re(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{c(),r.complete()},void 0,()=>{o=i=null}))})}function Ps(t){return se((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function tf(t){return t<=0?()=>Ms:se((e,n)=>{let r=0;e.subscribe(re(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Qc(t=cR){return se((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function cR(){return new Pr}function uR(t){return se((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function lR(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Fi((i,o)=>t(i,o,r)):vt,tf(1),n?Ps(e):Qc(()=>new Pr))}function nf(t){return t<=0?()=>Ms:se((e,n)=>{let r=[];e.subscribe(re(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function dR(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Fi((i,o)=>t(i,o,r)):vt,nf(1),n?Ps(e):Qc(()=>new Pr))}function yE(t,e){return se(mE(t,e,arguments.length>=2,!0))}function vE(...t){let e=Qn(t);return se((n,r)=>{(e?Kc(t,n,e):Kc(t,n)).subscribe(r)})}function hR(t,e){return se((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(re(r,u=>{i?.unsubscribe();let l=0,h=o++;xe(t(u,h)).subscribe(i=re(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function fR(t){return se((e,n)=>{xe(t).subscribe(re(n,()=>n.complete(),As)),!n.closed&&e.subscribe(n)})}function pR(t,e,n){let r=K(t)||e||n?{next:t,error:e,complete:n}:t;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(re(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):vt}function af(t,e){return Object.is(t,e)}var Ve=null,Yc=!1,cf=1,St=Symbol("SIGNAL");function J(t){let e=Ve;return Ve=t,e}function uf(){return Ve}var Vi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ks(t){if(Yc)throw new Error("");if(Ve===null)return;Ve.consumerOnSignalRead(t);let e=Ve.nextProducerIndex++;if(tu(Ve),e<Ve.producerNode.length&&Ve.producerNode[e]!==t&&xs(Ve)){let n=Ve.producerNode[e];eu(n,Ve.producerIndexOfThis[e])}Ve.producerNode[e]!==t&&(Ve.producerNode[e]=t,Ve.producerIndexOfThis[e]=xs(Ve)?IE(t,Ve,e):0),Ve.producerLastReadVersion[e]=t.version}function _E(){cf++}function lf(t){if(!(xs(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===cf)){if(!t.producerMustRecompute(t)&&!Xc(t)){sf(t);return}t.producerRecomputeValue(t),sf(t)}}function df(t){if(t.liveConsumerNode===void 0)return;let e=Yc;Yc=!0;try{for(let n of t.liveConsumerNode)n.dirty||gR(n)}finally{Yc=e}}function hf(){return Ve?.consumerAllowSignalWrites!==!1}function gR(t){t.dirty=!0,df(t),t.consumerMarkedDirty?.(t)}function sf(t){t.dirty=!1,t.lastCleanEpoch=cf}function Os(t){return t&&(t.nextProducerIndex=0),J(t)}function Jc(t,e){if(J(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(xs(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)eu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Xc(t){tu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(lf(n),r!==n.version))return!0}return!1}function Fs(t){if(tu(t),xs(t))for(let e=0;e<t.producerNode.length;e++)eu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function IE(t,e,n){if(EE(t),t.liveConsumerNode.length===0&&wE(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=IE(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function eu(t,e){if(EE(t),t.liveConsumerNode.length===1&&wE(t))for(let r=0;r<t.producerNode.length;r++)eu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];tu(i),i.producerIndexOfThis[r]=e}}function xs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function tu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function EE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function wE(t){return t.producerNode!==void 0}function ff(t,e){let n=Object.create(mR);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(lf(n),ks(n),n.value===Zc)throw n.error;return n.value};return r[St]=n,r}var rf=Symbol("UNSET"),of=Symbol("COMPUTING"),Zc=Symbol("ERRORED"),mR=ye(fe({},Vi),{value:rf,dirty:!0,error:null,equal:af,kind:"computed",producerMustRecompute(t){return t.value===rf||t.value===of},producerRecomputeValue(t){if(t.value===of)throw new Error("Detected cycle in computations.");let e=t.value;t.value=of;let n=Os(t),r,i=!1;try{r=t.computation(),J(null),i=e!==rf&&e!==Zc&&r!==Zc&&t.equal(e,r)}catch(o){r=Zc,t.error=o}finally{Jc(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function yR(){throw new Error}var DE=yR;function TE(t){DE(t)}function pf(t){DE=t}var vR=null;function gf(t,e){let n=Object.create(nu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>(ks(n),n.value);return r[St]=n,r}function Vs(t,e){hf()||TE(t),t.equal(t.value,e)||(t.value=e,_R(t))}function mf(t,e){hf()||TE(t),Vs(t,e(t.value))}var nu=ye(fe({},Vi),{equal:af,value:void 0,kind:"signal"});function _R(t){t.version++,_E(),df(t),vR?.()}function yf(t){let e=J(null);try{return t()}finally{J(e)}}var vf;function Ls(){return vf}function En(t){let e=vf;return vf=t,e}var ru=Symbol("NotFound");var dw="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",H=class extends Error{code;constructor(e,n){super(hw(e,n)),this.code=e}};function DR(t){return`NG0${Math.abs(t)}`}function hw(t,e){return`${DR(t)}${e?": "+e:""}`}var fw=Symbol("InputSignalNode#UNSET"),TR=ye(fe({},nu),{transformFn:void 0,applyValueToInputSignal(t,e){Vs(t,e)}});function pw(t,e){let n=Object.create(TR);n.value=t,n.transformFn=e?.transform;function r(){if(ks(n),n.value===fw){let i=null;throw new H(-950,i)}return n.value}return r[St]=n,r}function Js(t){return{toString:t}.toString()}var iu="__parameters__";function bR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function gw(t,e,n){return Js(()=>{let r=bR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,h){let p=u.hasOwnProperty(iu)?u[iu]:Object.defineProperty(u,iu,{value:[]})[iu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Li=globalThis;function ve(t){for(let e in t)if(t[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function CR(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ft(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(ft).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function bE(t,e){return t?e?`${t} ${e}`:t:e||""}var AR=ve({__forward_ref__:ve});function nr(t){return t.__forward_ref__=nr,t.toString=function(){return ft(this())},t}function at(t){return mw(t)?t():t}function mw(t){return typeof t=="function"&&t.hasOwnProperty(AR)&&t.__forward_ref__===nr}function X(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xs(t){return{providers:t.providers||[],imports:t.imports||[]}}function Hu(t){return CE(t,yw)||CE(t,vw)}function i9(t){return Hu(t)!==null}function CE(t,e){return t.hasOwnProperty(e)?t[e]:null}function SR(t){let e=t&&(t[yw]||t[vw]);return e||null}function AE(t){return t&&(t.hasOwnProperty(SE)||t.hasOwnProperty(NR))?t[SE]:null}var yw=ve({\u0275prov:ve}),SE=ve({\u0275inj:ve}),vw=ve({ngInjectableDef:ve}),NR=ve({ngInjectorDef:ve}),z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=X({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function _w(t){return t&&!!t.\u0275providers}var RR=ve({\u0275cmp:ve}),MR=ve({\u0275dir:ve}),PR=ve({\u0275pipe:ve}),xR=ve({\u0275mod:ve}),fu=ve({\u0275fac:ve}),$s=ve({__NG_ELEMENT_ID__:ve}),NE=ve({__NG_ENV_ID__:ve});function zi(t){return typeof t=="string"?t:t==null?"":String(t)}function kR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():zi(t)}function Iw(t,e){throw new H(-200,t)}function xp(t,e){throw new H(-201,!1)}var ie=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ie||{}),kf;function Ew(){return kf}function ht(t){let e=kf;return kf=t,e}function ww(t,e,n){let r=Hu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ie.Optional)return null;if(e!==void 0)return e;xp(t,"Injector")}var OR={},Or=OR,Of="__NG_DI_FLAG__",pu=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?ru:Or,r)}},gu="ngTempTokenPath",FR="ngTokenPath",VR=/\n/gm,LR="\u0275",RE="__source";function jR(t,e=ie.Default){if(Ls()===void 0)throw new H(-203,!1);if(Ls()===null)return ww(t,void 0,e);{let n=Ls(),r;return n instanceof pu?r=n.injector:r=n,r.get(t,e&ie.Optional?null:void 0,e)}}function Ie(t,e=ie.Default){return(Ew()||jR)(at(t),e)}function L(t,e=ie.Default){return Ie(t,qu(e))}function qu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ff(t){let e=[];for(let n=0;n<t.length;n++){let r=at(t[n]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,o=ie.Default;for(let s=0;s<r.length;s++){let c=r[s],u=BR(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(Ie(i,o))}else e.push(Ie(r))}return e}function Dw(t,e){return t[Of]=e,t.prototype[Of]=e,t}function BR(t){return t[Of]}function UR(t,e,n,r){let i=t[gu];throw e[RE]&&i.unshift(e[RE]),t.message=$R(`
`+t.message,i,n,r),t[FR]=i,t[gu]=null,t}function $R(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==LR?t.slice(2):t;let i=ft(e);if(Array.isArray(e))i=e.map(ft).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):ft(c)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(VR,`
  `)}`}var wt=Dw(gw("Optional"),8);var HR=Dw(gw("SkipSelf"),4);function Vr(t,e){let n=t.hasOwnProperty(fu);return n?t[fu]:null}function qR(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function zR(t){return t.flat(Number.POSITIVE_INFINITY)}function kp(t,e){t.forEach(n=>Array.isArray(n)?kp(n,e):e(n))}function Tw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function mu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function GR(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function WR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function KR(t,e,n){let r=ea(t,e);return r>=0?t[r|1]=n:(r=~r,WR(t,r,e,n)),r}function _f(t,e){let n=ea(t,e);if(n>=0)return t[n|1]}function ea(t,e){return QR(t,e,1)}function QR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Lr={},Nt=[],yu=new z(""),bw=new z("",-1),Cw=new z(""),vu=class{get(e,n=Or){if(n===Or){let r=new Error(`NullInjectorError: No provider for ${ft(e)}!`);throw r.name="NullInjectorError",r}return n}};function Aw(t,e){let n=t[xR]||null;if(!n&&e===!0)throw new Error(`Type ${ft(t)} does not have '\u0275mod' property.`);return n}function jr(t){return t[RR]||null}function YR(t){return t[MR]||null}function ZR(t){return t[PR]||null}function rr(t){return{\u0275providers:t}}function JR(...t){return{\u0275providers:Sw(!0,t),\u0275fromNgModule:!0}}function Sw(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return kp(e,s=>{let c=s;Vf(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&Nw(i,o),n}function Nw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Op(i,o=>{e(o,r)})}}function Vf(t,e,n,r){if(t=at(t),!t)return!1;let i=null,o=AE(t),s=!o&&jr(t);if(!o&&!s){let u=t.ngModule;if(o=AE(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Vf(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{kp(o.imports,h=>{Vf(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Nw(l,e)}if(!c){let l=Vr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Nt},i),e({provide:Cw,useValue:i,multi:!0},i),e({provide:yu,useValue:()=>Ie(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;Op(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Op(t,e){for(let n of t)_w(n)&&(n=n.\u0275providers),Array.isArray(n)?Op(n,e):e(n)}var XR=ve({provide:String,useValue:ve});function Rw(t){return t!==null&&typeof t=="object"&&XR in t}function eM(t){return!!(t&&t.useExisting)}function tM(t){return!!(t&&t.useFactory)}function Gi(t){return typeof t=="function"}function nM(t){return!!t.useClass}var Mw=new z(""),au={},ME={},If;function Fp(){return If===void 0&&(If=new vu),If}var Jt=class{},Hs=class extends Jt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,jf(e,s=>this.processProvider(s)),this.records.set(bw,ji(void 0,this)),i.has("environment")&&this.records.set(Jt,ji(void 0,this));let o=this.records.get(Mw);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Cw,Nt,ie.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?ru:Or,r)}destroy(){Bs(this),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return Bs(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Bs(this);let n=En(this),r=ht(void 0),i;try{return e()}finally{En(n),ht(r)}}get(e,n=Or,r=ie.Default){if(Bs(this),e.hasOwnProperty(NE))return e[NE](this);r=qu(r);let i,o=En(this),s=ht(void 0);try{if(!(r&ie.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=aM(e)&&Hu(e);l&&this.injectableDefInScope(l)?u=ji(Lf(e),au):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let c=r&ie.Self?Fp():this.parent;return n=r&ie.Optional&&n===Or?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[gu]=c[gu]||[]).unshift(ft(e)),o)throw c;return UR(c,e,"R3InjectorError",this.source)}else throw c}finally{ht(s),En(o)}}resolveInjectorInitializers(){let e=J(null),n=En(this),r=ht(void 0),i;try{let o=this.get(yu,Nt,ie.Self);for(let s of o)s()}finally{En(n),ht(r),J(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ft(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=at(e);let n=Gi(e)?e:at(e&&e.provide),r=iM(e);if(!Gi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ji(void 0,au,!0),i.factory=()=>Ff(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=J(null);try{return n.value===ME?Iw(ft(e)):n.value===au&&(n.value=ME,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&sM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{J(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=at(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Lf(t){let e=Hu(t),n=e!==null?e.factory:Vr(t);if(n!==null)return n;if(t instanceof z)throw new H(204,!1);if(t instanceof Function)return rM(t);throw new H(204,!1)}function rM(t){if(t.length>0)throw new H(204,!1);let n=SR(t);return n!==null?()=>n.factory(t):()=>new t}function iM(t){if(Rw(t))return ji(void 0,t.useValue);{let e=Pw(t);return ji(e,au)}}function Pw(t,e,n){let r;if(Gi(t)){let i=at(t);return Vr(i)||Lf(i)}else if(Rw(t))r=()=>at(t.useValue);else if(tM(t))r=()=>t.useFactory(...Ff(t.deps||[]));else if(eM(t))r=(i,o)=>Ie(at(t.useExisting),o!==void 0&&o&ie.Optional?ie.Optional:void 0);else{let i=at(t&&(t.useClass||t.provide));if(oM(t))r=()=>new i(...Ff(t.deps));else return Vr(i)||Lf(i)}return r}function Bs(t){if(t.destroyed)throw new H(205,!1)}function ji(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function oM(t){return!!t.deps}function sM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function aM(t){return typeof t=="function"||typeof t=="object"&&t instanceof z}function jf(t,e){for(let n of t)Array.isArray(n)?jf(n,e):n&&_w(n)?jf(n.\u0275providers,e):e(n)}function to(t,e){let n;t instanceof Hs?(Bs(t),n=t):n=new pu(t);let r,i=En(n),o=ht(void 0);try{return e()}finally{En(i),ht(o)}}function xw(){return Ew()!==void 0||Ls()!=null}function ta(t){if(!xw())throw new H(-203,!1)}function cM(t){return typeof t=="function"}var Tn=0,Q=1,q=2,et=3,Ut=4,pt=5,Wi=6,_u=7,Le=8,Br=9,wn=10,Ce=11,qs=12,PE=13,no=14,Et=15,Ur=16,Bi=17,Dn=18,zu=19,kw=20,Jn=21,Ef=22,$r=23,Rt=24,Hi=25,je=26,Ow=1;var Hr=7,Iu=8,Ki=9,Xe=10;function Xn(t){return Array.isArray(t)&&typeof t[Ow]=="object"}function bn(t){return Array.isArray(t)&&t[Ow]===!0}function Vp(t){return(t.flags&4)!==0}function ro(t){return t.componentOffset>-1}function Gu(t){return(t.flags&1)===1}function Xt(t){return!!t.template}function Eu(t){return(t[q]&512)!==0}function io(t){return(t[q]&256)===256}var Bf=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Fw(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Wu=(()=>{let t=()=>Vw;return t.ngInherit=!0,t})();function Vw(t){return t.type.prototype.ngOnChanges&&(t.setInput=lM),uM}function uM(){let t=jw(this),e=t?.current;if(e){let n=t.previous;if(n===Lr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function lM(t,e,n,r,i){let o=this.declaredInputs[r],s=jw(t)||dM(t,{previous:Lr,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new Bf(l&&l.currentValue,n,u===Lr),Fw(t,e,i,n)}var Lw="__ngSimpleChanges__";function jw(t){return t[Lw]||null}function dM(t,e){return t[Lw]=e}var xE=null;var ge=function(t,e=null,n){xE?.(t,e,n)},Bw="svg",hM="math";function en(t){for(;Array.isArray(t);)t=t[Tn];return t}function Uw(t,e){return en(e[t])}function rn(t,e){return en(e[t.index])}function Lp(t,e){return t.data[e]}function jp(t,e){return t[e]}function tn(t,e){let n=e[t];return Xn(n)?n:n[Tn]}function fM(t){return(t[q]&4)===4}function Bp(t){return(t[q]&128)===128}function pM(t){return bn(t[et])}function er(t,e){return e==null?null:t[e]}function $w(t){t[Bi]=0}function Hw(t){t[q]&1024||(t[q]|=1024,Bp(t)&&oo(t))}function gM(t,e){for(;t>0;)e=e[no],t--;return e}function Ku(t){return!!(t[q]&9216||t[Rt]?.dirty)}function Uf(t){t[wn].changeDetectionScheduler?.notify(8),t[q]&64&&(t[q]|=1024),Ku(t)&&oo(t)}function oo(t){t[wn].changeDetectionScheduler?.notify(0);let e=qr(t);for(;e!==null&&!(e[q]&8192||(e[q]|=8192,!Bp(e)));)e=qr(e)}function qw(t,e){if(io(t))throw new H(911,!1);t[Jn]===null&&(t[Jn]=[]),t[Jn].push(e)}function mM(t,e){if(t[Jn]===null)return;let n=t[Jn].indexOf(e);n!==-1&&t[Jn].splice(n,1)}function qr(t){let e=t[et];return bn(e)?e[et]:e}function Up(t){return t[_u]??=[]}function $p(t){return t.cleanup??=[]}function yM(t,e,n,r){let i=Up(e);i.push(n),t.firstCreatePass&&$p(t).push(r,i.length-1)}var Z={lFrame:Jw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var $f=!1;function vM(){return Z.lFrame.elementDepthCount}function _M(){Z.lFrame.elementDepthCount++}function IM(){Z.lFrame.elementDepthCount--}function Hp(){return Z.bindingsEnabled}function zw(){return Z.skipHydrationRootTNode!==null}function EM(t){return Z.skipHydrationRootTNode===t}function wM(){Z.skipHydrationRootTNode=null}function G(){return Z.lFrame.lView}function Ae(){return Z.lFrame.tView}function Zr(t){return Z.lFrame.contextLView=t,t[Le]}function Jr(t){return Z.lFrame.contextLView=null,t}function tt(){let t=Gw();for(;t!==null&&t.type===64;)t=t.parent;return t}function Gw(){return Z.lFrame.currentTNode}function DM(){let t=Z.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Xr(t,e){let n=Z.lFrame;n.currentTNode=t,n.isParent=e}function qp(){return Z.lFrame.isParent}function zp(){Z.lFrame.isParent=!1}function TM(){return Z.lFrame.contextLView}function Ww(){return $f}function wu(t){let e=$f;return $f=t,e}function na(){let t=Z.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function bM(){return Z.lFrame.bindingIndex}function CM(t){return Z.lFrame.bindingIndex=t}function so(){return Z.lFrame.bindingIndex++}function Kw(t){let e=Z.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function AM(){return Z.lFrame.inI18n}function SM(t,e){let n=Z.lFrame;n.bindingIndex=n.bindingRootIndex=t,Hf(e)}function NM(){return Z.lFrame.currentDirectiveIndex}function Hf(t){Z.lFrame.currentDirectiveIndex=t}function RM(t){let e=Z.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Qw(){return Z.lFrame.currentQueryIndex}function Gp(t){Z.lFrame.currentQueryIndex=t}function MM(t){let e=t[Q];return e.type===2?e.declTNode:e.type===1?t[pt]:null}function Yw(t,e,n){if(n&ie.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ie.Host);)if(i=MM(o),i===null||(o=o[no],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Z.lFrame=Zw();return r.currentTNode=e,r.lView=t,!0}function Wp(t){let e=Zw(),n=t[Q];Z.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Zw(){let t=Z.lFrame,e=t===null?null:t.child;return e===null?Jw(t):e}function Jw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Xw(){let t=Z.lFrame;return Z.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var eD=Xw;function Kp(){let t=Xw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function PM(t){return(Z.lFrame.contextLView=gM(t,Z.lFrame.contextLView))[Le]}function ir(){return Z.lFrame.selectedIndex}function zr(t){Z.lFrame.selectedIndex=t}function Qu(){let t=Z.lFrame;return Lp(t.tView,t.selectedIndex)}function ao(){Z.lFrame.currentNamespace=Bw}function o9(){xM()}function xM(){Z.lFrame.currentNamespace=null}function kM(){return Z.lFrame.currentNamespace}var tD=!0;function Yu(){return tD}function Zu(t){tD=t}function OM(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Vw(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Qp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function cu(t,e,n){nD(t,e,3,n)}function uu(t,e,n,r){(t[q]&3)===n&&nD(t,e,n,r)}function wf(t,e){let n=t[q];(n&3)===e&&(n&=16383,n+=1,t[q]=n)}function nD(t,e,n,r){let i=r!==void 0?t[Bi]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[Bi]+=65536),(c<o||o==-1)&&(FM(t,n,e,u),t[Bi]=(t[Bi]&4294901760)+u+2),u++}function kE(t,e){ge(4,t,e);let n=J(null);try{e.call(t)}finally{J(n),ge(5,t,e)}}function FM(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[q]>>14<t[Bi]>>16&&(t[q]&3)===e&&(t[q]+=16384,kE(c,o)):kE(c,o)}var qi=-1,Gr=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function VM(t){return(t.flags&8)!==0}function LM(t){return(t.flags&16)!==0}function jM(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];BM(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function rD(t){return t===3||t===4||t===6}function BM(t){return t.charCodeAt(0)===64}function Qi(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?OE(t,n,i,null,e[++r]):OE(t,n,i,null,null))}}return t}function OE(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function iD(t){return t!==qi}function Du(t){return t&32767}function UM(t){return t>>16}function Tu(t,e){let n=UM(t),r=e;for(;n>0;)r=r[no],n--;return r}var qf=!0;function bu(t){let e=qf;return qf=t,e}var $M=256,oD=$M-1,sD=5,HM=0,Zt={};function qM(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty($s)&&(r=n[$s]),r==null&&(r=n[$s]=HM++);let i=r&oD,o=1<<i;e.data[t+(i>>sD)]|=o}function Cu(t,e){let n=aD(t,e);if(n!==-1)return n;let r=e[Q];r.firstCreatePass&&(t.injectorIndex=e.length,Df(r.data,t),Df(e,null),Df(r.blueprint,null));let i=Yp(t,e),o=t.injectorIndex;if(iD(i)){let s=Du(i),c=Tu(i,e),u=c[Q].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function Df(t,e){t.push(0,0,0,0,0,0,0,0,e)}function aD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Yp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=hD(i),r===null)return qi;if(n++,i=i[no],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return qi}function zf(t,e,n){qM(t,e,n)}function zM(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(rD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function cD(t,e,n){if(n&ie.Optional||t!==void 0)return t;xp(e,"NodeInjector")}function uD(t,e,n,r){if(n&ie.Optional&&r===void 0&&(r=null),(n&(ie.Self|ie.Host))===0){let i=t[Br],o=ht(void 0);try{return i?i.get(e,r,n&ie.Optional):ww(e,r,n&ie.Optional)}finally{ht(o)}}return cD(r,e,n)}function lD(t,e,n,r=ie.Default,i){if(t!==null){if(e[q]&2048&&!(r&ie.Self)){let s=QM(t,e,n,r,Zt);if(s!==Zt)return s}let o=dD(t,e,n,r,Zt);if(o!==Zt)return o}return uD(e,n,r,i)}function dD(t,e,n,r,i){let o=WM(n);if(typeof o=="function"){if(!Yw(e,t,r))return r&ie.Host?cD(i,n,r):uD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&ie.Optional))xp(n);else return s}finally{eD()}}else if(typeof o=="number"){let s=null,c=aD(t,e),u=qi,l=r&ie.Host?e[Et][pt]:null;for((c===-1||r&ie.SkipSelf)&&(u=c===-1?Yp(t,e):e[c+8],u===qi||!VE(r,!1)?c=-1:(s=e[Q],c=Du(u),e=Tu(u,e)));c!==-1;){let h=e[Q];if(FE(o,c,h.data)){let p=GM(c,e,n,s,r,l);if(p!==Zt)return p}u=e[c+8],u!==qi&&VE(r,e[Q].data[c+8]===l)&&FE(o,c,e)?(s=h,c=Du(u),e=Tu(u,e)):c=-1}}return i}function GM(t,e,n,r,i,o){let s=e[Q],c=s.data[t+8],u=r==null?ro(c)&&qf:r!=s&&(c.type&3)!==0,l=i&ie.Host&&o===c,h=lu(c,s,n,u,l);return h!==null?zs(e,s,h,c,i):Zt}function lu(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?c:c+h,m=i?c+h:l;for(let y=p;y<m;y++){let D=s[y];if(y<u&&n===D||y>=u&&D.type===n)return y}if(i){let y=s[u];if(y&&Xt(y)&&y.type===n)return u}return null}function zs(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Gr){let c=o;c.resolving&&Iw(kR(s[n]));let u=bu(c.canSeeViewProviders);c.resolving=!0;let l,h=c.injectImpl?ht(c.injectImpl):null,p=Yw(t,r,ie.Default);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&OM(n,s[n],e)}finally{h!==null&&ht(h),bu(u),c.resolving=!1,eD()}}return o}function WM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty($s)?t[$s]:void 0;return typeof e=="number"?e>=0?e&oD:KM:e}function FE(t,e,n){let r=1<<t;return!!(n[e+(t>>sD)]&r)}function VE(t,e){return!(t&ie.Self)&&!(t&ie.Host&&e)}var Fr=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return lD(this._tNode,this._lView,e,qu(r),n)}};function KM(){return new Fr(tt(),G())}function Ju(t){return Js(()=>{let e=t.prototype.constructor,n=e[fu]||Gf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[fu]||Gf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Gf(t){return mw(t)?()=>{let e=Gf(at(t));return e&&e()}:Vr(t)}function QM(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[q]&2048&&!Eu(s);){let c=dD(o,s,n,r|ie.Self,Zt);if(c!==Zt)return c;let u=o.parent;if(!u){let l=s[kw];if(l){let h=l.get(n,Zt,r);if(h!==Zt)return h}u=hD(s),s=s[no]}o=u}return i}function hD(t){let e=t[Q],n=e.type;return n===2?e.declTNode:n===1?t[pt]:null}function YM(t){return zM(tt(),t)}function LE(t,e=null,n=null,r){let i=fD(t,e,n,r);return i.resolveInjectorInitializers(),i}function fD(t,e=null,n=null,r,i=new Set){let o=[n||Nt,JR(t)];return r=r||(typeof t=="object"?void 0:ft(t)),new Hs(o,e||Fp(),r||null,i)}var Ge=class t{static THROW_IF_NOT_FOUND=Or;static NULL=new vu;static create(e,n){if(Array.isArray(e))return LE({name:""},n,e,"");{let r=e.name??"";return LE({name:r},e.parent,e.providers,r)}}static \u0275prov=X({token:t,providedIn:"any",factory:()=>Ie(bw)});static __NG_ELEMENT_ID__=-1};var ZM=new z("");ZM.__NG_ELEMENT_ID__=t=>{let e=tt();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(t&ie.Optional)return null;throw new H(204,!1)};var pD=!1,ei=(()=>{class t{static __NG_ELEMENT_ID__=JM;static __NG_ENV_ID__=n=>n}return t})(),Au=class extends ei{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let n=this._lView;return io(n)?(e(),()=>{}):(qw(n,e),()=>mM(n,e))}};function JM(){return new Au(G())}var tr=class{},Zp=new z("",{providedIn:"root",factory:()=>!1});var gD=new z(""),mD=new z(""),ra=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ss(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=X({token:t,providedIn:"root",factory:()=>new t})}return t})(),Xu=(()=>{class t{internalPendingTasks=L(ra);scheduler=L(tr);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){return v(this,null,function*(){let r=this.add();try{return yield n()}finally{r()}})}static \u0275prov=X({token:t,providedIn:"root",factory:()=>new t})}return t})(),Wf=class extends At{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,xw()&&(this.destroyRef=L(ei,{optional:!0})??void 0,this.pendingTasks=L(ra,{optional:!0})??void 0)}emit(e){let n=J(null);try{super.next(e)}finally{J(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Pe&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},It=Wf;function Gs(...t){}function yD(t){let e,n;function r(){t=Gs;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function jE(t){return queueMicrotask(()=>t()),()=>{t=Gs}}var Jp="isAngularZone",Su=Jp+"_ID",XM=0,we=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new It(!1);onMicrotaskEmpty=new It(!1);onStable=new It(!1);onError=new It(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=pD}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,nP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Jp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,eP,Gs,Gs);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},eP={};function Xp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function tP(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){yD(()=>{t.callbackScheduled=!1,Kf(t),t.isCheckStableRunning=!0,Xp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Kf(t)}function nP(t){let e=()=>{tP(t)},n=XM++;t._inner=t._inner.fork({name:"angular",properties:{[Jp]:!0,[Su]:n,[Su+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(rP(u))return r.invokeTask(o,s,c,u);try{return BE(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),UE(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return BE(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!iP(u)&&e(),UE(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Kf(t),Xp(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Kf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function BE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function UE(t){t._nesting--,Xp(t)}var Qf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new It;onMicrotaskEmpty=new It;onStable=new It;onError=new It;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function rP(t){return vD(t,"__ignore_ng_zone__")}function iP(t){return vD(t,"__scheduler_tick__")}function vD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Wr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},oP=new z("",{providedIn:"root",factory:()=>{let t=L(we),e=L(Wr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function $E(t,e){return pw(t,e)}function sP(t){return pw(fw,t)}var s9=($E.required=sP,$E);function aP(){return co(tt(),G())}function co(t,e){return new Mt(rn(t,e))}var Mt=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=aP}return t})();function cP(t){return t instanceof Mt?t.nativeElement:t}function uP(t){return typeof t=="function"&&t[St]!==void 0}function pe(t,e){let n=gf(t,e?.equal),r=n[St];return n.set=i=>Vs(r,i),n.update=i=>mf(r,i),n.asReadonly=lP.bind(n),n}function lP(){let t=this[St];if(t.readonlyFn===void 0){let e=()=>this();e[St]=t,t.readonlyFn=e}return t.readonlyFn}function _D(t){return uP(t)&&typeof t.set=="function"}function dP(){return this._results[Symbol.iterator]()}var Yf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new At}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=zR(e);(this._changesDetected=!qR(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=dP};function ID(t){return(t.flags&128)===128}var ED=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ED||{}),wD=new Map,hP=0;function fP(){return hP++}function pP(t){wD.set(t[zu],t)}function Zf(t){wD.delete(t[zu])}var HE="__ngContext__";function uo(t,e){Xn(e)?(t[HE]=e[zu],pP(e)):t[HE]=e}function DD(t){return bD(t[qs])}function TD(t){return bD(t[Ut])}function bD(t){for(;t!==null&&!bn(t);)t=t[Ut];return t}var Jf;function a9(t){Jf=t}function gP(){if(Jf!==void 0)return Jf;if(typeof document<"u")return document;throw new H(210,!1)}var mP=new z("",{providedIn:"root",factory:()=>yP}),yP="ng",vP=new z(""),eg=new z("",{providedIn:"platform",factory:()=>"unknown"});var c9=new z("",{providedIn:"root",factory:()=>gP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _P="h",IP="b";var CD=!1,EP=new z("",{providedIn:"root",factory:()=>CD});var tg=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(tg||{}),el=new z(""),qE=new Set;function lo(t){qE.has(t)||(qE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var ng=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=wP}return t})();function wP(){return new ng(G(),tt())}var Ui=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ui||{}),AD=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=X({token:t,providedIn:"root",factory:()=>new t})}return t})(),DP=[Ui.EarlyRead,Ui.Write,Ui.MixedReadWrite,Ui.Read],TP=(()=>{class t{ngZone=L(we);scheduler=L(tr);errorHandler=L(Wr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){L(el,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ge(16),this.executing=!0;for(let r of DP)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ge(17)}register(n){let{view:r}=n;r!==void 0?((r[Hi]??=[]).push(n),oo(r),r[q]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(tg.AFTER_NEXT_RENDER,n):n()}static \u0275prov=X({token:t,providedIn:"root",factory:()=>new t})}return t})(),Xf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Hi];e&&(this.view[Hi]=e.filter(n=>n!==this))}};function bP(t,e){!e?.injector&&ta(bP);let n=e?.injector??L(Ge);return lo("NgAfterNextRender"),AP(t,n,e,!0)}function CP(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function AP(t,e,n,r){let i=e.get(AD);i.impl??=e.get(TP);let o=e.get(el,null,{optional:!0}),s=n?.phase??Ui.MixedReadWrite,c=n?.manualCleanup!==!0?e.get(ei):null,u=e.get(ng,null,{optional:!0}),l=new Xf(i.impl,CP(t,s),u?.view,r,c,o?.snapshot(null));return i.impl.register(l),l}var SP=()=>null;function SD(t,e,n=!1){return SP(t,e,n)}function ND(t,e){let n=t.contentQueries;if(n!==null){let r=J(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];Gp(o),c.contentQueries(2,e[s],s)}}}finally{J(r)}}}function ep(t,e,n){Gp(0);let r=J(null);try{e(t,n)}finally{J(r)}}function rg(t,e,n){if(Vp(e)){let r=J(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{J(r)}}}var Ws=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ws||{});var ou;function NP(){if(ou===void 0&&(ou=null,Li.trustedTypes))try{ou=Li.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ou}function zE(t){return NP()?.createScriptURL(t)||t}var Nu=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dw})`}};function tl(t){return t instanceof Nu?t.changingThisBreaksApplicationSecurity:t}function RD(t,e){let n=RP(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${dw})`)}return n===e}function RP(t){return t instanceof Nu&&t.getTypeName()||null}var MP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function PP(t){return t=String(t),t.match(MP)?t:"unsafe:"+t}var ig=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ig||{});function og(t){let e=MD();return e?e.sanitize(ig.URL,t)||"":RD(t,"URL")?tl(t):PP(zi(t))}function xP(t){let e=MD();if(e)return zE(e.sanitize(ig.RESOURCE_URL,t)||"");if(RD(t,"ResourceURL"))return zE(tl(t));throw new H(904,!1)}function kP(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?xP:og}function u9(t,e,n){return kP(e,n)(t)}function MD(){let t=G();return t&&t[wn].sanitizer}var OP=/^>|^->|<!--|-->|--!>|<!-$/g,FP=/(<|>)/g,VP="\u200B$1\u200B";function LP(t){return t.replace(OP,e=>e.replace(FP,VP))}function PD(t){return t.ownerDocument}function xD(t){return t instanceof Function?t():t}function jP(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var kD="ng-template";function BP(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&jP(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(sg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function sg(t){return t.type===4&&t.value!==kD}function UP(t,e,n){let r=t.type===4&&!n?kD:t.value;return e===r}function $P(t,e,n){let r=4,i=t.attrs,o=i!==null?zP(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Bt(r)&&!Bt(u))return!1;if(s&&Bt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!UP(t,u,n)||u===""&&e.length===1){if(Bt(r))return!1;s=!0}}else if(r&8){if(i===null||!BP(t,i,u,n)){if(Bt(r))return!1;s=!0}}else{let l=e[++c],h=HP(u,i,sg(t),n);if(h===-1){if(Bt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Bt(r))return!1;s=!0}}}}return Bt(r)||s}function Bt(t){return(t&1)===0}function HP(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return GP(e,t)}function OD(t,e,n=!1){for(let r=0;r<e.length;r++)if($P(t,e[r],n))return!0;return!1}function qP(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if((n&1)===0)return e[n+1]}return null}function zP(t){for(let e=0;e<t.length;e++){let n=t[e];if(rD(n))return e}return t.length}function GP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function WP(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function GE(t,e){return t?":not("+e.trim()+")":e}function KP(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Bt(s)&&(e+=GE(o,i),i=""),r=s,o=o||!Bt(r);n++}return i!==""&&(e+=GE(o,i)),e}function QP(t){return t.map(KP).join(",")}function YP(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Bt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Pt={};function ZP(t,e){return t.createText(e)}function JP(t,e,n){t.setValue(e,n)}function XP(t,e){return t.createComment(LP(e))}function FD(t,e,n){return t.createElement(e,n)}function Ru(t,e,n,r,i){t.insertBefore(e,n,r,i)}function VD(t,e,n){t.appendChild(e,n)}function WE(t,e,n,r,i){r!==null?Ru(t,e,n,r,i):VD(t,e,n)}function ex(t,e,n){t.removeChild(null,e,n)}function tx(t,e,n){t.setAttribute(e,"style",n)}function nx(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function LD(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&jM(t,e,r),i!==null&&nx(t,e,i),o!==null&&tx(t,e,o)}function ag(t,e,n,r,i,o,s,c,u,l,h){let p=je+r,m=p+i,y=rx(p,m),D=typeof l=="function"?l():l;return y[Q]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function rx(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Pt);return n}function ix(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=ag(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function cg(t,e,n,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[Tn]=i,p[q]=r|4|128|8|64|1024,(l!==null||t&&t[q]&2048)&&(p[q]|=2048),$w(p),p[et]=p[no]=t,p[Le]=n,p[wn]=s||t&&t[wn],p[Ce]=c||t&&t[Ce],p[Br]=u||t&&t[Br]||null,p[pt]=o,p[zu]=fP(),p[Wi]=h,p[kw]=l,p[Et]=e.type==2?t[Et]:p,p}function ox(t,e,n){let r=rn(e,t),i=ix(n),o=t[wn].rendererFactory,s=ug(t,cg(t,i,null,jD(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function jD(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function BD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ug(t,e){return t[qs]?t[PE][Ut]=e:t[qs]=e,t[PE]=e,e}function We(t=1){UD(Ae(),G(),ir()+t,!1)}function UD(t,e,n,r){if(!r)if((e[q]&3)===3){let o=t.preOrderCheckHooks;o!==null&&cu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&uu(e,o,0,n)}zr(n)}var nl=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(nl||{});function tp(t,e,n,r){let i=J(null);try{let[o,s,c]=t.inputs[n],u=null;(s&nl.SignalBased)!==0&&(u=e[o][St]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):Fw(e,u,o,r)}finally{J(i)}}function $D(t,e,n,r,i){let o=ir(),s=r&2;try{zr(-1),s&&e.length>je&&UD(t,e,je,!1),ge(s?2:0,i),n(r,i)}finally{zr(o),ge(s?3:1,i)}}function rl(t,e,n){dx(t,e,n),(n.flags&64)===64&&hx(t,e,n)}function lg(t,e,n=rn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function sx(t,e,n,r){let o=r.get(EP,CD)||n===Ws.ShadowDom,s=t.selectRootElement(e,o);return ax(s),s}function ax(t){cx(t)}var cx=()=>null;function ux(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function dg(t,e,n,r,i,o,s,c){if(!c&&fg(e,t,n,r,i)){ro(e)&&lx(n,e.index);return}if(e.type&3){let u=rn(e,n);r=ux(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function lx(t,e){let n=tn(e,t);n[q]&16||(n[q]|=64)}function dx(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ro(n)&&ox(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Cu(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=zs(e,t,s,n);if(uo(u,e),o!==null&&mx(e,s-r,u,c,n,o),Xt(c)){let l=tn(n.index,e);l[Le]=zs(e,t,s,n)}}}function hx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=NM();try{zr(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Hf(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&fx(u,l)}}finally{zr(-1),Hf(s)}}function fx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function hg(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];OD(e,o.selectors,!1)&&(r??=[],Xt(o)?r.unshift(o):r.push(o))}return r}function px(t,e,n,r,i,o){let s=rn(t,e);gx(e[Ce],s,o,t.value,n,r,i)}function gx(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let c=s==null?zi(o):s(o,r||"",i);t.setAttribute(e,i,c,n)}}function mx(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];tp(r,n,u,l)}}function yx(t,e){let n=t[Br],r=n?n.get(Wr,null):null;r&&r.handleError(e)}function fg(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];tp(p,n[l],h,i),c=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];tp(h,l,r,i),c=!0}return c}function vx(t,e){let n=tn(e,t),r=n[Q];_x(r,n);let i=n[Tn];i!==null&&n[Wi]===null&&(n[Wi]=SD(i,n[Br])),ge(18),pg(r,n,n[Le]),ge(19,n[Le])}function _x(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function pg(t,e,n){Wp(e);try{let r=t.viewQuery;r!==null&&ep(1,r,n);let i=t.template;i!==null&&$D(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Dn]?.finishViewCreation(t),t.staticContentQueries&&ND(t,e),t.staticViewQueries&&ep(2,t.viewQuery,n);let o=t.components;o!==null&&Ix(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[q]&=-5,Kp()}}function Ix(t,e){for(let n=0;n<e.length;n++)vx(t,e[n])}function ia(t,e,n,r){let i=J(null);try{let o=e.tView,c=t[q]&4096?4096:16,u=cg(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ur]=l;let h=t[Dn];return h!==null&&(u[Dn]=h.createEmbeddedView(o)),pg(o,u,n),u}finally{J(i)}}function Yi(t,e){return!e||e.firstChild===null||ID(t)}var Ex;function gg(t,e){return Ex(t,e)}var Mu=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Mu||{});function mg(t){return(t.flags&32)===32}function $i(t,e,n,r,i){if(r!=null){let o,s=!1;bn(r)?o=r:Xn(r)&&(s=!0,r=r[Tn]);let c=en(r);t===0&&n!==null?i==null?VD(e,n,c):Ru(e,n,c,i||null,!0):t===1&&n!==null?Ru(e,n,c,i||null,!0):t===2?ex(e,c,s):t===3&&e.destroyNode(c),o!=null&&Mx(e,t,o,n,i)}}function wx(t,e){HD(t,e),e[Tn]=null,e[pt]=null}function Dx(t,e,n,r,i,o){r[Tn]=i,r[pt]=e,sl(t,r,n,1,i,o)}function HD(t,e){e[wn].changeDetectionScheduler?.notify(9),sl(t,e,e[Ce],2,null,null)}function Tx(t){let e=t[qs];if(!e)return Tf(t[Q],t);for(;e;){let n=null;if(Xn(e))n=e[qs];else{let r=e[Xe];r&&(n=r)}if(!n){for(;e&&!e[Ut]&&e!==t;)Xn(e)&&Tf(e[Q],e),e=e[et];e===null&&(e=t),Xn(e)&&Tf(e[Q],e),n=e&&e[Ut]}e=n}}function yg(t,e){let n=t[Ki],r=n.indexOf(e);n.splice(r,1)}function il(t,e){if(io(e))return;let n=e[Ce];n.destroyNode&&sl(t,e,n,3,null,null),Tx(e)}function Tf(t,e){if(io(e))return;let n=J(null);try{e[q]&=-129,e[q]|=256,e[Rt]&&Fs(e[Rt]),Cx(t,e),bx(t,e),e[Q].type===1&&e[Ce].destroy();let r=e[Ur];if(r!==null&&bn(e[et])){r!==e[et]&&yg(r,e);let i=e[Dn];i!==null&&i.detachView(t)}Zf(e)}finally{J(n)}}function bx(t,e){let n=t.cleanup,r=e[_u];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[_u]=null);let i=e[Jn];if(i!==null){e[Jn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[$r];if(o!==null){e[$r]=null;for(let s of o)s.destroy()}}function Cx(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Gr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];ge(4,c,u);try{u.call(c)}finally{ge(5,c,u)}}else{ge(4,i,o);try{o.call(i)}finally{ge(5,i,o)}}}}}function qD(t,e,n){return Ax(t,e.parent,n)}function Ax(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Tn];if(ro(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Ws.None||i===Ws.Emulated)return null}return rn(r,n)}function zD(t,e,n){return Nx(t,e,n)}function Sx(t,e,n){return t.type&40?rn(t,n):null}var Nx=Sx,KE;function ol(t,e,n,r){let i=qD(t,r,e),o=e[Ce],s=r.parent||e[pt],c=zD(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)WE(o,i,n[u],c,!1);else WE(o,i,n,c,!1);KE!==void 0&&KE(o,r,e,n,i)}function Us(t,e){if(e!==null){let n=e.type;if(n&3)return rn(e,t);if(n&4)return np(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Us(t,r);{let i=t[e.index];return bn(i)?np(-1,i):en(i)}}else{if(n&128)return Us(t,e.next);if(n&32)return gg(e,t)()||en(t[e.index]);{let r=GD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=qr(t[Et]);return Us(i,r)}else return Us(t,e.next)}}}return null}function GD(t,e){if(e!==null){let r=t[Et][pt],i=e.projection;return r.projection[i]}return null}function np(t,e){let n=Xe+t+1;if(n<e.length){let r=e[n],i=r[Q].firstChild;if(i!==null)return Us(r,i)}return e[Hr]}function vg(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&uo(en(c),r),n.flags|=2),!mg(n))if(u&8)vg(t,e,n.child,r,i,o,!1),$i(e,t,i,c,o);else if(u&32){let l=gg(n,r),h;for(;h=l();)$i(e,t,i,h,o);$i(e,t,i,c,o)}else u&16?WD(t,e,r,n,i,o):$i(e,t,i,c,o);n=s?n.projectionNext:n.next}}function sl(t,e,n,r,i,o){vg(n,r,t.firstChild,e,i,o,!1)}function Rx(t,e,n){let r=e[Ce],i=qD(t,n,e),o=n.parent||e[pt],s=zD(o,n,e);WD(r,0,e,n,i,s)}function WD(t,e,n,r,i,o){let s=n[Et],u=s[pt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];$i(e,t,i,h,o)}else{let l=u,h=s[et];ID(r)&&(l.flags|=128),vg(t,e,l,h,i,o,!0)}}function Mx(t,e,n,r,i){let o=n[Hr],s=en(n);o!==s&&$i(e,t,r,o,i);for(let c=Xe;c<n.length;c++){let u=n[c];sl(u[Q],u,t,e,r,o)}}function Px(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Mu.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Mu.Important),t.setStyle(n,r,i,o))}}function Pu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(en(o)),bn(o)&&xx(o,r);let s=n.type;if(s&8)Pu(t,e,n.child,r);else if(s&32){let c=gg(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=GD(e,n);if(Array.isArray(c))r.push(...c);else{let u=qr(e[Et]);Pu(u[Q],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function xx(t,e){for(let n=Xe;n<t.length;n++){let r=t[n],i=r[Q].firstChild;i!==null&&Pu(r[Q],r,i,e)}t[Hr]!==t[Tn]&&e.push(t[Hr])}function KD(t){if(t[Hi]!==null){for(let e of t[Hi])e.impl.addSequence(e);t[Hi].length=0}}var QD=[];function kx(t){return t[Rt]??Ox(t)}function Ox(t){let e=QD.pop()??Object.create(Vx);return e.lView=t,e}function Fx(t){t.lView[Rt]!==t&&(t.lView=null,QD.push(t))}var Vx=ye(fe({},Vi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{oo(t.lView)},consumerOnSignalRead(){this.lView[Rt]=this}});function Lx(t){let e=t[Rt]??Object.create(jx);return e.lView=t,e}var jx=ye(fe({},Vi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=qr(t.lView);for(;e&&!YD(e[Q]);)e=qr(e);e&&Hw(e)},consumerOnSignalRead(){this.lView[Rt]=this}});function YD(t){return t.type!==2}function ZD(t){if(t[$r]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[$r])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[q]&8192)}}var Bx=100;function JD(t,e=!0,n=0){let i=t[wn].rendererFactory,o=!1;o||i.begin?.();try{Ux(t,n)}catch(s){throw e&&yx(t,s),s}finally{o||i.end?.()}}function Ux(t,e){let n=Ww();try{wu(!0),rp(t,e);let r=0;for(;Ku(t);){if(r===Bx)throw new H(103,!1);r++,rp(t,1)}}finally{wu(n)}}function $x(t,e,n,r){if(io(e))return;let i=e[q],o=!1,s=!1;Wp(e);let c=!0,u=null,l=null;o||(YD(t)?(l=kx(e),u=Os(l)):uf()===null?(c=!1,l=Lx(e),u=Os(l)):e[Rt]&&(Fs(e[Rt]),e[Rt]=null));try{$w(e),CM(t.bindingStartIndex),n!==null&&$D(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&cu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&uu(e,y,0,null),wf(e,0)}if(s||Hx(e),ZD(e),XD(e,0),t.contentQueries!==null&&ND(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&cu(e,y)}else{let y=t.contentHooks;y!==null&&uu(e,y,1),wf(e,1)}zx(t,e);let p=t.components;p!==null&&tT(e,p,0);let m=t.viewQuery;if(m!==null&&ep(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&cu(e,y)}else{let y=t.viewHooks;y!==null&&uu(e,y,2),wf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ef]){for(let y of e[Ef])y();e[Ef]=null}o||(KD(e),e[q]&=-73)}catch(h){throw o||oo(e),h}finally{l!==null&&(Jc(l,u),c&&Fx(l)),Kp()}}function XD(t,e){for(let n=DD(t);n!==null;n=TD(n))for(let r=Xe;r<n.length;r++){let i=n[r];eT(i,e)}}function Hx(t){for(let e=DD(t);e!==null;e=TD(e)){if(!(e[q]&2))continue;let n=e[Ki];for(let r=0;r<n.length;r++){let i=n[r];Hw(i)}}}function qx(t,e,n){ge(18);let r=tn(e,t);eT(r,n),ge(19,r[Le])}function eT(t,e){Bp(t)&&rp(t,e)}function rp(t,e){let r=t[Q],i=t[q],o=t[Rt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Xc(o)),s||=!1,o&&(o.dirty=!1),t[q]&=-9217,s)$x(r,t,r.template,t[Le]);else if(i&8192){ZD(t),XD(t,1);let c=r.components;c!==null&&tT(t,c,1),KD(t)}}function tT(t,e,n){for(let r=0;r<e.length;r++)qx(t,e[r],n)}function zx(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)zr(~i);else{let o=i,s=n[++r],c=n[++r];SM(s,o);let u=e[o];ge(24,u),c(2,u),ge(25,u)}}}finally{zr(-1)}}function _g(t,e){let n=Ww()?64:1088;for(t[wn].changeDetectionScheduler?.notify(e);t;){t[q]|=n;let r=qr(t);if(Eu(t)&&!r)return t;t=r}return null}function nT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function rT(t,e){let n=Xe+e;if(n<t.length)return t[n]}function oa(t,e,n,r=!0){let i=e[Q];if(Gx(i,e,t,n),r){let s=np(n,t),c=e[Ce],u=c.parentNode(t[Hr]);u!==null&&Dx(i,t[pt],c,e,u,s)}let o=e[Wi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function iT(t,e){let n=Ks(t,e);return n!==void 0&&il(n[Q],n),n}function Ks(t,e){if(t.length<=Xe)return;let n=Xe+e,r=t[n];if(r){let i=r[Ur];i!==null&&i!==t&&yg(i,r),e>0&&(t[n-1][Ut]=r[Ut]);let o=mu(t,Xe+e);wx(r[Q],r);let s=o[Dn];s!==null&&s.detachView(o[Q]),r[et]=null,r[Ut]=null,r[q]&=-129}return r}function Gx(t,e,n,r){let i=Xe+r,o=n.length;r>0&&(n[i-1][Ut]=e),r<o-Xe?(e[Ut]=n[i],Tw(n,Xe+r,e)):(n.push(e),e[Ut]=null),e[et]=n;let s=e[Ur];s!==null&&n!==s&&oT(s,e);let c=e[Dn];c!==null&&c.insertView(t),Uf(e),e[q]|=128}function oT(t,e){let n=t[Ki],r=e[et];if(Xn(r))t[q]|=2;else{let i=r[et][Et];e[Et]!==i&&(t[q]|=2)}n===null?t[Ki]=[e]:n.push(e)}var Qs=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[Q];return Pu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[Le]}set context(e){this._lView[Le]=e}get destroyed(){return io(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[et];if(bn(e)){let n=e[Iu],r=n?n.indexOf(this):-1;r>-1&&(Ks(e,r),mu(n,r))}this._attachedToViewContainer=!1}il(this._lView[Q],this._lView)}onDestroy(e){qw(this._lView,e)}markForCheck(){_g(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[q]&=-129}reattach(){Uf(this._lView),this._lView[q]|=128}detectChanges(){this._lView[q]|=1024,JD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Eu(this._lView),n=this._lView[Ur];n!==null&&!e&&yg(n,this._lView),HD(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let n=Eu(this._lView),r=this._lView[Ur];r!==null&&!n&&oT(r,this._lView),Uf(this._lView)}};var Kr=(()=>{class t{static __NG_ELEMENT_ID__=Qx}return t})(),Wx=Kr,Kx=class extends Wx{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=ia(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Qs(i)}};function Qx(){return al(tt(),G())}function al(t,e){return t.type&4?new Kx(e,t,co(t,e)):null}function sa(t,e,n,r,i){let o=t.data[e];if(o===null)o=Yx(t,e,n,r,i),AM()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=DM();o.injectorIndex=s===null?-1:s.injectorIndex}return Xr(o,!0),o}function Yx(t,e,n,r,i){let o=Gw(),s=qp(),c=s?o:o&&o.parent,u=t.data[e]=Jx(t,c,n,e,r,i);return Zx(t,u,o,s),u}function Zx(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function Jx(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return zw()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var h9=new RegExp(`^(\\d+)*(${IP}|${_P})*(.*)`);var Xx=()=>null;function Zi(t,e){return Xx(t,e)}var ek=class{},sT=class{},ip=class{resolveComponentFactory(e){throw Error(`No component factory found for ${ft(e)}.`)}},cl=class{static NULL=new ip},xu=class{},ho=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>tk()}return t})();function tk(){let t=G(),e=tt(),n=tn(e.index,t);return(Xn(n)?n:t)[Ce]}var nk=(()=>{class t{static \u0275prov=X({token:t,providedIn:"root",factory:()=>null})}return t})();var bf={},op=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=qu(r);let i=this.injector.get(e,bf,r);return i!==bf||n===bf?i:this.parentInjector.get(e,n,r)}};function sp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=bE(i,c);else if(o==2){let u=c,l=e[++s];r=bE(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ee(t,e=ie.Default){let n=G();if(n===null)return Ie(t,e);let r=tt();return lD(r,n,at(t),e)}function m9(){let t="invalid";throw new Error(t)}function Ig(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c,u=null,l=null,h=ik(s);h===null?c=s:[c,u,l]=h,ak(t,e,n,c,o,u,l)}o!==null&&r!==null&&rk(n,r,o)}function rk(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new H(-301,!1);r.push(e[i],o)}}function ik(t){let e=null,n=!1;for(let s=0;s<t.length;s++){let c=t[s];if(s===0&&Xt(c)&&(e=c),c.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,ok(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,i,o]):null}function ok(t,e,n,r){let i=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[i,e.length-1])}function sk(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ak(t,e,n,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&Xt(y)&&(u=!0,sk(t,n,m)),zf(Cu(n,e),t,y.type)}fk(n,t.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=BD(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(n.mergedAttrs=Qi(n.mergedAttrs,y.hostAttrs),uk(t,n,e,p,y),hk(p,y,i),s!==null&&s.has(y)){let[R,N]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,N+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let D=y.type.prototype;!l&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(D.ngOnChanges||D.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}ck(t,n,o)}function ck(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))QE(0,e,i,r),QE(1,e,i,r),ZE(e,r,!1);else{let o=n.get(i);YE(0,e,o,r),YE(1,e,o,r),ZE(e,r,!0)}}}function QE(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),aT(e,o)}}function YE(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),aT(e,s)}}function aT(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function ZE(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||sg(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function uk(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Vr(i.type,!0)),s=new Gr(o,Xt(i),ee);t.blueprint[r]=s,n[r]=s,lk(t,e,r,BD(t,n,i.hostVars,Pt),i)}function lk(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;dk(s)!=c&&s.push(c),s.push(n,r,o)}}function dk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function hk(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Xt(e)&&(n[""]=t)}}function fk(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function cT(t,e,n,r,i,o,s,c){let u=e.consts,l=er(u,s),h=sa(e,t,2,r,l);return o&&Ig(e,n,h,er(u,c),i),h.mergedAttrs=Qi(h.mergedAttrs,h.attrs),h.attrs!==null&&sp(h,h.attrs,!1),h.mergedAttrs!==null&&sp(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function uT(t,e){Qp(t,e),Vp(e)&&t.queries.elementEnd(e)}var ku=class extends cl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=jr(e);return new Ji(n,this.ngModule)}};function pk(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&nl.SignalBased)!==0};return i&&(o.transform=i),o})}function gk(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function mk(t,e,n){let r=e instanceof Jt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new op(n,r):n}function yk(t){let e=t.get(xu,null);if(e===null)throw new H(407,!1);let n=t.get(nk,null),r=t.get(tr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function vk(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return FD(e,n,n==="svg"?Bw:n==="math"?hM:null)}var Ji=class extends sT{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=pk(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=gk(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=QP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i){ge(22);let o=J(null);try{let s=this.componentDef,c=r?["ng-version","19.2.11"]:YP(this.componentDef.selectors[0]),u=ag(0,null,null,1,0,null,null,null,null,[c],null),l=mk(s,i||this.ngModule,e),h=yk(l),p=h.rendererFactory.createRenderer(null,s),m=r?sx(p,r,s.encapsulation,l):vk(s,p),y=cg(null,u,null,512|jD(s),null,null,h,p,l,null,SD(m,l,!0));y[je]=m,Wp(y);let D=null;try{let R=cT(je,u,y,"#host",()=>[this.componentDef],!0,0);m&&(LD(p,m,R),uo(m,y)),rl(u,y,R),rg(u,R,y),uT(u,R),n!==void 0&&_k(R,this.ngContentSelectors,n),D=tn(R.index,y),y[Le]=D[Le],pg(u,y,null)}catch(R){throw D!==null&&Zf(D),Zf(y),R}finally{ge(23),Kp()}return new ap(this.componentType,y)}finally{J(o)}}},ap=class extends ek{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=Lp(n[Q],je),this.location=co(this._tNode,n),this.instance=tn(this._tNode.index,n)[Le],this.hostView=this.changeDetectorRef=new Qs(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=fg(r,i[Q],i,e,n);this.previousInputValues.set(e,n);let s=tn(r.index,i);_g(s,1)}get injector(){return new Fr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function _k(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var fo=(()=>{class t{static __NG_ELEMENT_ID__=Ik}return t})();function Ik(){let t=tt();return dT(t,G())}var Ek=fo,lT=class extends Ek{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return co(this._hostTNode,this._hostLView)}get injector(){return new Fr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Yp(this._hostTNode,this._hostLView);if(iD(e)){let n=Tu(e,this._hostLView),r=Du(e),i=n[Q].data[r+8];return new Fr(i,n)}else return new Fr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=JE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Xe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Zi(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,Yi(this._hostTNode,s)),c}createComponent(e,n,r,i,o){let s=e&&!cM(e),c;if(s)c=n;else{let D=n||{};c=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let u=s?e:new Ji(jr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(s?l:this.parentInjector).get(Jt,null);R&&(o=R)}let h=jr(u.componentType??{}),p=Zi(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,c,Yi(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(pM(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[et],l=new lT(u,u[pt],u[et]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return oa(s,i,o,r),e.attachToViewContainerRef(),Tw(Cf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=JE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ks(this._lContainer,n);r&&(mu(Cf(this._lContainer),n),il(r[Q],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ks(this._lContainer,n);return r&&mu(Cf(this._lContainer),n)!=null?new Qs(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function JE(t){return t[Iu]}function Cf(t){return t[Iu]||(t[Iu]=[])}function dT(t,e){let n,r=e[t.index];return bn(r)?n=r:(n=nT(r,e,null,t),e[t.index]=n,ug(e,n)),Dk(n,e,t,r),new lT(n,t,e)}function wk(t,e){let n=t[Ce],r=n.createComment(""),i=rn(e,t),o=n.parentNode(i);return Ru(n,o,r,n.nextSibling(i),!1),r}var Dk=Ck,Tk=()=>!1;function bk(t,e,n){return Tk(t,e,n)}function Ck(t,e,n,r){if(t[Hr])return;let i;n.type&8?i=en(r):i=wk(e,n),t[Hr]=i}var cp=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},up=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),c=this.queries[s.indexInDeclarationView];i.push(c.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Eg(e,n).matches!==null&&this.queries[n].setDirty()}},Ou=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=kk(e):this.predicate=e}},lp=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},dp=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,Ak(n,o)),this.matchTNodeWithReadOption(e,n,lu(n,e,o,!1,!1))}else r===Kr?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,lu(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Mt||i===fo||i===Kr&&n.type&4)this.addMatch(n.index,-2);else{let o=lu(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function Ak(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function Sk(t,e){return t.type&11?co(t,e):t.type&4?al(t,e):null}function Nk(t,e,n,r){return n===-1?Sk(e,t):n===-2?Rk(t,e,r):zs(t,t[Q],n,e)}function Rk(t,e,n){if(n===Mt)return co(e,t);if(n===Kr)return al(e,t);if(n===fo)return dT(e,t)}function hT(t,e,n,r){let i=e[Dn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,c=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)c.push(null);else{let h=o[l];c.push(Nk(e,h,s[u+1],n.metadata.read))}}i.matches=c}return i.matches}function hp(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=hT(t,e,i,n);for(let c=0;c<o.length;c+=2){let u=o[c];if(u>0)r.push(s[c/2]);else{let l=o[c+1],h=e[-u];for(let p=Xe;p<h.length;p++){let m=h[p];m[Ur]===m[et]&&hp(m[Q],m,l,r)}if(h[Ki]!==null){let p=h[Ki];for(let m=0;m<p.length;m++){let y=p[m];hp(y[Q],y,l,r)}}}}}return r}function Mk(t,e){return t[Dn].queries[e].queryList}function fT(t,e,n){let r=new Yf((n&4)===4);return yM(t,e,r,r.destroy),(e[Dn]??=new up).queries.push(new cp(r))-1}function Pk(t,e,n){let r=Ae();return r.firstCreatePass&&(pT(r,new Ou(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),fT(r,G(),e)}function xk(t,e,n,r){let i=Ae();if(i.firstCreatePass){let o=tt();pT(i,new Ou(e,n,r),o.index),Ok(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return fT(i,G(),n)}function kk(t){return t.split(",").map(e=>e.trim())}function pT(t,e,n){t.queries===null&&(t.queries=new lp),t.queries.track(new dp(e,n))}function Ok(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Eg(t,e){return t.queries.getByIndex(e)}function Fk(t,e){let n=t[Q],r=Eg(n,e);return r.crossesNgTemplate?hp(n,t,e,[]):hT(n,t,r,e)}var Xi=class{},Vk=class{};var fp=class extends Xi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ku(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Aw(e);this._bootstrapComponents=xD(o.bootstrap),this._r3Injector=fD(e,n,[{provide:Xi,useValue:this},{provide:cl,useValue:this.componentFactoryResolver},...r],ft(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},pp=class extends Vk{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new fp(this.moduleType,e,[])}};var Fu=class extends Xi{injector;componentFactoryResolver=new ku(this);instance=null;constructor(e){super();let n=new Hs([...e.providers,{provide:Xi,useValue:this},{provide:cl,useValue:this.componentFactoryResolver}],e.parent||Fp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Lk(t,e,n=null){return new Fu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var jk=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Sw(!1,n.type),i=r.length>0?Lk([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=X({token:t,providedIn:"environment",factory:()=>new t(Ie(Jt))})}return t})();function or(t){return Js(()=>{let e=mT(t),n=ye(fe({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ED.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(jk).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ws.Emulated,styles:t.styles||Nt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&lo("NgStandalone"),yT(n);let r=t.dependencies;return n.directiveDefs=XE(r,!1),n.pipeDefs=XE(r,!0),n.id=qk(n),n})}function Bk(t){return jr(t)||YR(t)}function Uk(t){return t!==null}function aa(t){return Js(()=>({type:t.type,bootstrap:t.bootstrap||Nt,declarations:t.declarations||Nt,imports:t.imports||Nt,exports:t.exports||Nt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function $k(t,e){if(t==null)return Lr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=nl.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function Hk(t){if(t==null)return Lr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function nt(t){return Js(()=>{let e=mT(t);return yT(e),e})}function gT(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function mT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Lr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Nt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$k(t.inputs,e),outputs:Hk(t.outputs),debugInfo:null}}function yT(t){t.features?.forEach(e=>e(t))}function XE(t,e){if(!t)return null;let n=e?ZR:Bk;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Uk)}function qk(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function zk(t){return Object.getPrototypeOf(t.prototype).constructor}function on(t){let e=zk(t.type),n=!0,r=[t];for(;e;){let i;if(Xt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Af(t.inputs),s.declaredInputs=Af(t.declaredInputs),s.outputs=Af(t.outputs);let c=i.hostBindings;c&&Yk(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&Kk(t,u),l&&Qk(t,l),Gk(t,i),CR(t.outputs,i.outputs),Xt(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(t),c===on&&(n=!1)}}e=Object.getPrototypeOf(e)}Wk(r)}function Gk(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function Wk(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Qi(i.hostAttrs,n=Qi(n,i.hostAttrs))}}function Af(t){return t===Lr?{}:t===Nt?[]:t}function Kk(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Qk(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function Yk(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function vT(t){return Jk(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Zk(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Jk(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function wg(t,e,n){return t[e]=n}function Xk(t,e){return t[e]}function nn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function _T(t,e,n,r){let i=nn(t,e,n);return nn(t,e+1,r)||i}function e1(t,e,n,r,i,o,s,c,u){let l=e.consts,h=sa(e,t,4,s||null,c||null);Hp()&&Ig(e,n,h,er(l,u),hg),h.mergedAttrs=Qi(h.mergedAttrs,h.attrs),Qp(e,h);let p=h.tView=ag(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Vu(t,e,n,r,i,o,s,c,u,l){let h=n+je,p=e.firstCreatePass?e1(h,e,t,r,i,o,s,c,u):e.data[h];Xr(p,!1);let m=t1(e,t,p,n);Yu()&&ol(e,t,m,p),uo(m,t);let y=nT(m,t,m,p);return t[h]=y,ug(t,y),bk(y,p,t),Gu(p)&&rl(e,t,p),u!=null&&lg(t,p,l),p}function $t(t,e,n,r,i,o,s,c){let u=G(),l=Ae(),h=er(l.consts,o);return Vu(u,l,t,e,n,r,i,h,s,c),$t}var t1=n1;function n1(t,e,n,r){return Zu(!0),e[Ce].createComment("")}var I9=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var r1=new z("");var IT=(()=>{class t{static \u0275prov=X({token:t,providedIn:"root",factory:()=>new gp})}return t})(),gp=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function ca(t){return!!t&&typeof t.then=="function"}function ET(t){return!!t&&typeof t.subscribe=="function"}var wT=new z("");function E9(t){return rr([{provide:wT,multi:!0,useValue:t}])}var DT=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=L(wT,{optional:!0})??[];injector=L(Ge);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=to(this.injector,i);if(ca(o))n.push(o);else if(ET(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),i1=new z("");function o1(){pf(()=>{throw new H(600,!1)})}function s1(t){return t.isBoundToModule}var a1=10;var Ys=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=L(oP);afterRenderManager=L(AD);zonelessEnabled=L(Zp);rootEffectScheduler=L(IT);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new At;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=L(ra).hasPendingTasks.pipe(_t(n=>!n));constructor(){L(el,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=L(Jt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ge.NULL){ge(10);let o=n instanceof sT;if(!this._injector.get(DT).done){let y="";throw new H(405,y)}let c;o?c=n:c=this._injector.get(cl).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let u=s1(c)?void 0:this._injector.get(Xi),l=r||c.selector,h=c.create(i,[],l,u),p=h.location.nativeElement,m=h.injector.get(r1,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),du(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),ge(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ge(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(tg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new H(101,!1);let n=J(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(n),this.afterTick.next(),ge(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xu,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<a1;)ge(14),this.synchronizeOnce(),ge(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)c1(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ku(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;du(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(i1,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>du(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function du(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function c1(t,e,n,r){if(!n&&!Ku(t))return;JD(t,e,n&&!r?0:1)}function ul(t,e,n,r){let i=G(),o=so();if(nn(i,o,e)){let s=Ae(),c=Qu();px(c,i,t,e,n,r)}return ul}function TT(t,e,n,r){return nn(t,so(),n)?e+zi(n)+r:Pt}function u1(t,e,n,r,i,o){let s=bM(),c=_T(t,s,n,i);return Kw(2),c?e+zi(n)+r+zi(i)+o:Pt}function su(t,e){return t<<17|e<<2}function Qr(t){return t>>17&32767}function l1(t){return(t&2)==2}function d1(t,e){return t&131071|e<<17}function mp(t){return t|2}function eo(t){return(t&131068)>>2}function Sf(t,e){return t&-131069|e<<2}function h1(t){return(t&1)===1}function yp(t){return t|1}function f1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=Qr(s),u=eo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ea(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Qr(t[c+1]);t[r+1]=su(m,c),m!==0&&(t[m+1]=Sf(t[m+1],r)),t[c+1]=d1(t[c+1],r)}else t[r+1]=su(c,0),c!==0&&(t[c+1]=Sf(t[c+1],r)),c=r;else t[r+1]=su(u,0),c===0?c=r:t[u+1]=Sf(t[u+1],r),u=r;l&&(t[r+1]=mp(t[r+1])),ew(t,h,r,!0),ew(t,h,r,!1),p1(e,h,t,r,o),s=su(c,u),o?e.classBindings=s:e.styleBindings=s}function p1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ea(o,e)>=0&&(n[r+1]=yp(n[r+1]))}function ew(t,e,n,r){let i=t[n+1],o=e===null,s=r?Qr(i):eo(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];g1(u,e)&&(c=!0,t[s+1]=r?yp(l):mp(l)),s=r?Qr(l):eo(l)}c&&(t[n+1]=r?mp(i):yp(i))}function g1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ea(t,e)>=0:!1}function gt(t,e,n){let r=G(),i=so();if(nn(r,i,e)){let o=Ae(),s=Qu();dg(o,s,r,t,e,r[Ce],n,!1)}return gt}function tw(t,e,n,r,i){fg(e,t,n,i?"class":"style",r)}function ll(t,e){return m1(t,e,null,!0),ll}function m1(t,e,n,r){let i=G(),o=Ae(),s=Kw(2);if(o.firstUpdatePass&&v1(o,t,s,r),e!==Pt&&nn(i,s,e)){let c=o.data[ir()];D1(o,c,i,i[Ce],t,i[s+1]=T1(e,n),r,s)}}function y1(t,e){return e>=t.expandoStartIndex}function v1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[ir()],s=y1(t,n);b1(o,r)&&e===null&&!s&&(e=!1),e=_1(i,o,e,r),f1(i,o,e,n,s,r)}}function _1(t,e,n,r){let i=RM(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Nf(null,t,e,n,r),n=Zs(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Nf(i,t,e,n,r),o===null){let u=I1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Nf(null,t,e,u[1],r),u=Zs(u,e.attrs,r),E1(t,e,r,u))}else o=w1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function I1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(eo(r)!==0)return t[Qr(r)]}function E1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Qr(i)]=r}function w1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Zs(r,s,n)}return Zs(r,e.attrs,n)}function Nf(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=Zs(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function Zs(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),KR(t,s,n?!0:e[++o]))}return t===void 0?null:t}function D1(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],h=h1(l)?nw(u,e,n,i,eo(l),s):void 0;if(!Lu(h)){Lu(o)||l1(l)&&(o=nw(u,null,n,i,c,s));let p=Uw(ir(),n);Px(r,s,p,i,o)}}function nw(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Pt&&(m=p?Nt:void 0);let y=p?_f(m,r):h===r?m:void 0;if(l&&!Lu(y)&&(y=_f(u,r)),Lu(y)&&(c=y,s))return c;let D=t[i+1];i=s?Qr(D):eo(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=_f(u,r))}return c}function Lu(t){return t!==void 0}function T1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ft(tl(t)))),t}function b1(t,e){return(t.flags&(e?8:16))!==0}var vp=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Rf(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function C1(t,e,n){let r,i,o=0,s=t.length-1,c=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=Rf(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let m=t.at(s),y=e[u],D=Rf(s,m,u,y,n);if(D!==0){D<0&&t.updateValue(s,y),s--,u--;continue}let R=n(o,l),N=n(s,m),k=n(o,h);if(Object.is(k,N)){let V=n(u,y);Object.is(V,R)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new ju,i??=iw(t,o,s,n),_p(t,r,o,k))t.updateValue(o,h),o++,s++;else if(i.has(k))r.set(R,t.detach(o)),s--;else{let V=t.create(o,e[o]);t.attach(o,V),o++,s++}}for(;o<=u;)rw(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,m=Rf(o,h,o,p,n);if(m!==0)m<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new ju,i??=iw(t,o,s,n);let y=n(o,p);if(_p(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let D=n(o,h);r.set(D,t.detach(o)),s--}}}for(;!l.done;)rw(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function _p(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function rw(t,e,n,r,i){if(_p(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function iw(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var ju=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function ua(t,e){lo("NgControlFlow");let n=G(),r=so(),i=n[r]!==Pt?n[r]:-1,o=i!==-1?Bu(n,je+i):void 0,s=0;if(nn(n,r,t)){let c=J(null);try{if(o!==void 0&&iT(o,s),t!==-1){let u=je+t,l=Bu(n,u),h=Dp(n[Q],u),p=Zi(l,h.tView.ssrId),m=ia(n,h,e,{dehydratedView:p});oa(l,m,s,Yi(h,p))}}finally{J(c)}}else if(o!==void 0){let c=rT(o,s);c!==void 0&&(c[Le]=e)}}var Ip=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Xe}};function w9(t,e){return e}var Ep=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function D9(t,e,n,r,i,o,s,c,u,l,h,p,m){lo("NgControlFlow");let y=G(),D=Ae(),R=u!==void 0,N=G(),k=c?s.bind(N[Et][Le]):s,V=new Ep(R,k);N[je+t]=V,Vu(y,D,t+1,e,n,r,i,er(D.consts,o)),R&&Vu(y,D,t+2,u,l,h,p,er(D.consts,m))}var wp=class extends vp{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Xe}at(e){return this.getLView(e)[Le].$implicit}attach(e,n){let r=n[Wi];this.needsIndexUpdate||=e!==this.length,oa(this.lContainer,n,e,Yi(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,A1(this.lContainer,e)}create(e,n){let r=Zi(this.lContainer,this.templateTNode.tView.ssrId),i=ia(this.hostLView,this.templateTNode,new Ip(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){il(e[Q],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Le].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Le].$index=e}getLView(e){return S1(this.lContainer,e)}};function T9(t){let e=J(null),n=ir();try{let r=G(),i=r[Q],o=r[n],s=n+1,c=Bu(r,s);if(o.liveCollection===void 0){let l=Dp(i,s);o.liveCollection=new wp(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(C1(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=so(),h=u.length===0;if(nn(r,l,h)){let p=n+2,m=Bu(r,p);if(h){let y=Dp(i,p),D=Zi(m,y.tView.ssrId),R=ia(r,y,void 0,{dehydratedView:D});oa(m,R,0,Yi(y,D))}else iT(m,0)}}}finally{J(e)}}function Bu(t,e){return t[e]}function A1(t,e){return Ks(t,e)}function S1(t,e){return rT(t,e)}function Dp(t,e){return Lp(t,e)}function Se(t,e,n,r){let i=G(),o=Ae(),s=je+t,c=i[Ce],u=o.firstCreatePass?cT(s,o,i,e,hg,Hp(),n,r):o.data[s],l=N1(o,i,u,c,e,t);i[s]=l;let h=Gu(u);return Xr(u,!0),LD(c,l,u),!mg(u)&&Yu()&&ol(o,i,l,u),(vM()===0||h)&&uo(l,i),_M(),h&&(rl(o,i,u),rg(o,u,i)),r!==null&&lg(i,u),Se}function Ne(){let t=tt();qp()?zp():(t=t.parent,Xr(t,!1));let e=t;EM(e)&&wM(),IM();let n=Ae();return n.firstCreatePass&&uT(n,e),e.classesWithoutHost!=null&&VM(e)&&tw(n,e,G(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&LM(e)&&tw(n,e,G(),e.stylesWithoutHost,!1),Ne}function xt(t,e,n,r){return Se(t,e,n,r),Ne(),xt}var N1=(t,e,n,r,i,o)=>(Zu(!0),FD(r,i,kM()));function R1(t,e,n,r,i){let o=e.consts,s=er(o,r),c=sa(e,t,8,"ng-container",s);s!==null&&sp(c,s,!0);let u=er(o,i);return Hp()&&Ig(e,n,c,u,hg),c.mergedAttrs=Qi(c.mergedAttrs,c.attrs),e.queries!==null&&e.queries.elementStart(e,c),c}function Dg(t,e,n){let r=G(),i=Ae(),o=t+je,s=i.firstCreatePass?R1(o,i,r,e,n):i.data[o];Xr(s,!0);let c=M1(i,r,s,t);return r[o]=c,Yu()&&ol(i,r,c,s),uo(c,r),Gu(s)&&(rl(i,r,s),rg(i,s,r)),n!=null&&lg(r,s),Dg}function Tg(){let t=tt(),e=Ae();return qp()?zp():(t=t.parent,Xr(t,!1)),e.firstCreatePass&&(Qp(e,t),Vp(t)&&e.queries.elementEnd(t)),Tg}var M1=(t,e,n,r)=>(Zu(!0),XP(e[Ce],""));function la(){return G()}var kr=void 0;function P1(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var x1=["en",[["a","p"],["AM","PM"],kr],[["AM","PM"],kr,kr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kr,"{1} 'at' {0}",kr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",P1],Mf={};function bg(t){let e=k1(t),n=ow(e);if(n)return n;let r=e.split("-")[0];if(n=ow(r),n)return n;if(r==="en")return x1;throw new H(701,!1)}function ow(t){return t in Mf||(Mf[t]=Li.ng&&Li.ng.common&&Li.ng.common.locales&&Li.ng.common.locales[t]),Mf[t]}var po=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(po||{});function k1(t){return t.toLowerCase().replace(/_/g,"-")}var Uu="en-US";var O1=Uu;function F1(t){typeof t=="string"&&(O1=t.toLowerCase().replace(/_/g,"-"))}function sw(t,e,n){return function r(i){if(i===Function)return n;let o=ro(t)?tn(t.index,e):e;_g(o,5);let s=e[Le],c=aw(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=aw(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function aw(t,e,n,r){let i=J(null);try{return ge(6,e,n),n(r)!==!1}catch(o){return V1(t,o),!1}finally{ge(7,e,n),J(i)}}function V1(t,e){let n=t[Br],r=n?n.get(Wr,null):null;r&&r.handleError(e)}function cw(t,e,n,r,i,o){let s=e[n],c=e[Q],l=c.data[n].outputs[r],h=s[l],p=c.firstCreatePass?$p(c):null,m=Up(e),y=h.subscribe(o),D=m.length;m.push(o,y),p&&p.push(i,t.index,D,-(D+1))}var L1=new Map;function mt(t,e,n,r){let i=G(),o=Ae(),s=tt();return bT(o,i,i[Ce],s,t,e,r),mt}function j1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[_u],u=i[o+2];return c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function bT(t,e,n,r,i,o,s){let c=Gu(r),l=t.firstCreatePass?$p(t):null,h=Up(e),p=!0;if(r.type&3||s){let m=rn(r,e),y=s?s(m):m,D=h.length,R=s?k=>s(en(k[r.index])):r.index,N=null;if(!s&&c&&(N=j1(t,e,i,r.index)),N!==null){let k=N.__ngLastListenerFn__||N;k.__ngNextListenerFn__=o,N.__ngLastListenerFn__=o,p=!1}else{o=sw(r,e,o);let k=e[Br].get(mP);L1.get(k)?.(y,i,o);let $=n.listen(y,i,o);h.push(o,$),l&&l.push(i,R,D,D+1)}}else o=sw(r,e,o);if(p){let m=r.outputs?.[i],y=r.hostDirectiveOutputs?.[i];if(y&&y.length)for(let D=0;D<y.length;D+=2){let R=y[D],N=y[D+1];cw(r,e,R,N,i,o)}if(m&&m.length)for(let D of m)cw(r,e,D,i,i,o)}}function sn(t=1){return PM(t)}function B1(t,e){let n=null,r=qP(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?OD(t,o,!0):WP(r,o))return i}return n}function b9(t){let e=G()[Et][pt];if(!e.projection){let n=t?t.length:1,r=e.projection=GR(n,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?B1(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function C9(t,e=0,n,r,i,o){let s=G(),c=Ae(),u=r?t+1:null;u!==null&&Vu(s,c,u,r,i,o,null,n);let l=sa(c,je+t,16,null,n||null);l.projection===null&&(l.projection=e),zp();let p=!s[Wi]||zw();s[Et][pt].projection[l.projection]===null&&u!==null?U1(s,c,u):p&&!mg(l)&&Rx(c,s,l)}function U1(t,e,n){let r=je+n,i=e.data[r],o=t[r],s=Zi(o,i.tView.ssrId),c=ia(t,i,void 0,{dehydratedView:s});oa(o,c,0,Yi(i,s))}function $1(t,e,n){return CT(t,"",e,"",n),$1}function CT(t,e,n,r,i){let o=G(),s=TT(o,e,n,r);if(s!==Pt){let c=Ae(),u=Qu();dg(c,u,o,t,s,o[Ce],i,!1)}return CT}function A9(t,e,n,r){xk(t,e,n,r)}function S9(t,e,n){Pk(t,e,n)}function N9(t){let e=G(),n=Ae(),r=Qw();Gp(r+1);let i=Eg(n,r);if(t.dirty&&fM(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=Fk(e,r);t.reset(o,cP),t.notifyOnChanges()}return!0}return!1}function R9(){return Mk(G(),Qw())}function H1(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function AT(t){let e=TM();return jp(e,je+t)}function sr(t,e=""){let n=G(),r=Ae(),i=t+je,o=r.firstCreatePass?sa(r,i,1,e,null):r.data[i],s=q1(r,n,o,e,t);n[i]=s,Yu()&&ol(r,n,s,o),Xr(o,!1)}var q1=(t,e,n,r,i)=>(Zu(!0),ZP(e[Ce],r));function Cg(t){return go("",t,""),Cg}function go(t,e,n){let r=G(),i=TT(r,t,e,n);return i!==Pt&&ST(r,ir(),i),go}function z1(t,e,n,r,i){let o=G(),s=u1(o,t,e,n,r,i);return s!==Pt&&ST(o,ir(),s),z1}function ST(t,e,n){let r=Uw(e,t);JP(t[Ce],r,n)}function Ag(t,e,n){_D(e)&&(e=e());let r=G(),i=so();if(nn(r,i,e)){let o=Ae(),s=Qu();dg(o,s,r,t,e,r[Ce],n,!1)}return Ag}function NT(t,e){let n=_D(t);return n&&t.set(e),n}function Sg(t,e){let n=G(),r=Ae(),i=tt();return bT(r,n,n[Ce],i,t,e),Sg}function G1(t,e,n){let r=Ae();if(r.firstCreatePass){let i=Xt(t);Tp(n,r.data,r.blueprint,i,!0),Tp(e,r.data,r.blueprint,i,!1)}}function Tp(t,e,n,r,i){if(t=at(t),Array.isArray(t))for(let o=0;o<t.length;o++)Tp(t[o],e,n,r,i);else{let o=Ae(),s=G(),c=tt(),u=Gi(t)?t:at(t.provide),l=Pw(t),h=c.providerIndexes&1048575,p=c.directiveStart,m=c.providerIndexes>>20;if(Gi(t)||!t.multi){let y=new Gr(l,i,ee),D=xf(u,e,i?h:h+m,p);D===-1?(zf(Cu(c,s),o,u),Pf(o,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(y),s.push(y)):(n[D]=y,s[D]=y)}else{let y=xf(u,e,h+m,p),D=xf(u,e,h,h+m),R=y>=0&&n[y],N=D>=0&&n[D];if(i&&!N||!i&&!R){zf(Cu(c,s),o,u);let k=Q1(i?K1:W1,n.length,i,r,l);!i&&N&&(n[D].providerFactory=k),Pf(o,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=RT(n[i?D:y],l,!i&&r);Pf(o,t,y>-1?y:D,k)}!i&&r&&N&&n[D].componentProviders++}}}function Pf(t,e,n,r){let i=Gi(e),o=nM(e);if(i||o){let u=(o?at(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function RT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function xf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function W1(t,e,n,r,i){return bp(this.multi,[])}function K1(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,u=zs(r,r[Q],this.providerFactory.index,i);s=u.slice(0,c),bp(o,s);for(let l=c;l<u.length;l++)s.push(u[l])}else s=[],bp(o,s);return s}function bp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function Q1(t,e,n,r,i){let o=new Gr(t,n,ee);return o.multi=[],o.index=e,o.componentProviders=0,RT(o,i,r&&!n),o}function mo(t,e=[]){return n=>{n.providersResolver=(r,i)=>G1(r,i?i(t):t,e)}}function M9(t,e,n){let r=na()+t,i=G();return i[r]===Pt?wg(i,r,n?e.call(n):e()):Xk(i,r)}function P9(t,e,n,r){return PT(G(),na(),t,e,n,r)}function x9(t,e,n,r,i){return xT(G(),na(),t,e,n,r,i)}function MT(t,e){let n=t[e];return n===Pt?void 0:n}function PT(t,e,n,r,i,o){let s=e+n;return nn(t,s,i)?wg(t,s+1,o?r.call(o,i):r(i)):MT(t,s+1)}function xT(t,e,n,r,i,o,s){let c=e+n;return _T(t,c,i,o)?wg(t,c+2,s?r.call(s,i,o):r(i,o)):MT(t,c+2)}function kT(t,e){let n=Ae(),r,i=t+je;n.firstCreatePass?(r=Y1(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Vr(r.type,!0)),s,c=ht(ee);try{let u=bu(!1),l=o();return bu(u),H1(n,G(),i,l),l}finally{ht(c)}}function Y1(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function k9(t,e,n){let r=t+je,i=G(),o=jp(i,r);return FT(i,r)?PT(i,na(),e,o.transform,n,o):o.transform(n)}function OT(t,e,n,r){let i=t+je,o=G(),s=jp(o,i);return FT(o,i)?xT(o,na(),e,s.transform,n,r,s):s.transform(n,r)}function FT(t,e){return t[Q].data[e].pure}function VT(t,e){return al(t,e)}var Yr=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},LT=new Yr("19.2.11"),Cp=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},O9=(()=>{class t{compileModuleSync(n){return new pp(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Aw(n),o=xD(i.declarations).reduce((s,c)=>{let u=jr(c);return u&&s.push(new Ji(u)),s},[]);return new Cp(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Z1=(()=>{class t{zone=L(we);changeDetectionScheduler=L(tr);applicationRef=L(Ys);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),J1=new z("",{factory:()=>!1});function jT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new we(ye(fe({},BT()),{scheduleInRootZone:n})),[{provide:we,useFactory:t},{provide:yu,multi:!0,useFactory:()=>{let r=L(Z1,{optional:!0});return()=>r.initialize()}},{provide:yu,multi:!0,useFactory:()=>{let r=L(X1);return()=>{r.initialize()}}},e===!0?{provide:gD,useValue:!0}:[],{provide:mD,useValue:n??pD}]}function F9(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=jT({ngZoneFactory:()=>{let i=BT(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&lo("NgZone_CoalesceEvent"),new we(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return rr([{provide:J1,useValue:!0},{provide:Zp,useValue:!1},r])}function BT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var X1=(()=>{class t{subscription=new Pe;initialized=!1;zone=L(we);pendingTasks=L(ra);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{we.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var eO=(()=>{class t{appRef=L(Ys);taskService=L(ra);ngZone=L(we);zonelessEnabled=L(Zp);tracing=L(el,{optional:!0});disableScheduling=L(gD,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Su):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(mD,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Qf||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?jE:yD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Su+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,jE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tO(){return typeof $localize<"u"&&$localize.locale||Uu}var dl=new z("",{providedIn:"root",factory:()=>L(dl,ie.Optional|ie.SkipSelf)||tO()});var Ap=new z(""),nO=new z("");function js(t){return!t.moduleRef}function rO(t){let e=js(t)?t.r3Injector:t.moduleRef.injector,n=e.get(we);return n.run(()=>{js(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Wr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),js(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Ap);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Ap);s.add(o),t.moduleRef.onDestroy(()=>{du(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return oO(r,n,()=>{let o=e.get(DT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(dl,Uu);if(F1(s||Uu),!e.get(nO,!0))return js(t)?e.get(Ys):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(js(t)){let u=e.get(Ys);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return iO(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function iO(t,e){let n=t.injector.get(Ys);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new H(-403,!1);e.push(t)}function oO(t,e,n){try{let r=n();return ca(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var hu=null;function sO(t=[],e){return Ge.create({name:e,providers:[{provide:Mw,useValue:"platform"},{provide:Ap,useValue:new Set([()=>hu=null])},...t]})}function aO(t=[]){if(hu)return hu;let e=sO(t);return hu=e,o1(),cO(e),e}function cO(t){let e=t.get(vP,null);to(t,()=>{e?.forEach(n=>n())})}function Ng(){return!1}var hl=(()=>{class t{static __NG_ELEMENT_ID__=uO}return t})();function uO(t){return lO(tt(),G(),(t&16)===16)}function lO(t,e,n){if(ro(t)&&!n){let r=tn(t.index,e);return new Qs(r,r)}else if(t.type&175){let r=e[Et];return new Qs(r,e)}return null}var Sp=class{constructor(){}supports(e){return vT(e)}create(e){return new Np(e)}},dO=(t,e)=>e,Np=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||dO}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<uw(r,i,o)?n:r,c=uw(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=c-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,D=y+m;h<=D&&D<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!vT(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,c),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,c)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,Zk(e,c=>{s=this._trackByFn(i,c),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,c,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,s,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Rp(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new $u),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new $u),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Rp=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Mp=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},$u=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Mp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function uw(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function lw(){return new Rg([new Sp])}var Rg=(()=>{class t{factories;static \u0275prov=X({token:t,providedIn:"root",factory:lw});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||lw()),deps:[[t,new HR,new wt]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new H(901,!1)}}return t})();function V9(t){ge(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=aO(r),o=[jT({}),{provide:tr,useExisting:eO},...n||[]],s=new Fu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return rO({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ge(9)}}function fl(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function an(t){return yf(t)}function Ht(t,e){return ff(t,e?.equal)}var Pp=class{[St];constructor(e){this[St]=e}destroy(){this[St].destroy()}};function pl(t,e){!e?.injector&&ta(pl);let n=e?.injector??L(Ge),r=e?.manualCleanup!==!0?n.get(ei):null,i,o=n.get(ng,null,{optional:!0}),s=n.get(tr);return o!==null&&!e?.forceRoot?(i=pO(o.view,s,t),r instanceof Au&&r._lView===o.view&&(r=null)):i=gO(t,n.get(IT),s),i.injector=n,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Pp(i)}var UT=ye(fe({},Vi),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Gs,run(){if(this.dirty=!1,this.hasRun&&!Xc(this))return;this.hasRun=!0;let t=r=>(this.cleanupFns??=[]).push(r),e=Os(this),n=wu(!1);try{this.maybeCleanup(),this.fn(t)}finally{wu(n),Jc(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),hO=ye(fe({},UT),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Fs(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),fO=ye(fe({},UT),{consumerMarkedDirty(){this.view[q]|=8192,oo(this.view),this.notifier.notify(13)},destroy(){Fs(this),this.onDestroyFn(),this.maybeCleanup(),this.view[$r]?.delete(this)}});function pO(t,e,n){let r=Object.create(fO);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=n,t[$r]??=new Set,t[$r].add(r),r.consumerMarkedDirty(r),r}function gO(t,e,n){let r=Object.create(hO);return r.fn=t,r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}function L9(t){let e=jr(t);if(!e)return null;let n=new Ji(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var da=new z("");var qT=null;function ti(){return qT}function mO(t){qT??=t}var Mg=class{},ha=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:()=>L(zT),providedIn:"platform"})}return t})(),yO=new z(""),zT=(()=>{class t extends ha{_location;_history;_doc=L(da);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ti().getBaseHref(this._doc)}onPopState(n){let r=ti().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=ti().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function gl(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function $T(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function qt(t){return t&&t[0]!=="?"?`?${t}`:t}var yo=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:()=>L(GT),providedIn:"root"})}return t})(),ml=new z(""),GT=(()=>{class t extends yo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(da).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return gl(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+qt(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+qt(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+qt(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Ie(ha),Ie(ml,8))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),WT=(()=>{class t{_subject=new At;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=IO($T(HT(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+qt(r))}normalize(n){return t.stripTrailingSlash(_O(this._basePath,HT(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qt(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=qt;static joinWithSlash=gl;static stripTrailingSlash=$T;static \u0275fac=function(r){return new(r||t)(Ie(yo))};static \u0275prov=X({token:t,factory:()=>vO(),providedIn:"root"})}return t})();function vO(){return new WT(Ie(yo))}function _O(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function HT(t){return t.replace(/\/index.html$/,"")}function IO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var EO=(()=>{class t extends yo{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=gl(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+qt(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+qt(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Ie(ha),Ie(ml,8))};static \u0275prov=X({token:t,factory:t.\u0275fac})}return t})();var Og=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(Og||{});var cn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function vo(t,e){let n=bg(t),r=n[po.NumberSymbols][e];if(typeof r>"u"){if(e===cn.CurrencyDecimal)return n[po.NumberSymbols][cn.Decimal];if(e===cn.CurrencyGroup)return n[po.NumberSymbols][cn.Group]}return r}function JT(t,e){return bg(t)[po.NumberFormats][e]}var wO=/^(\d+)?\.((\d+)(-(\d+))?)?$/,KT=22,yl=".",fa="0",DO=";",TO=",",Pg="#";function bO(t,e,n,r,i,o,s=!1){let c="",u=!1;if(!isFinite(t))c=vo(n,cn.Infinity);else{let l=SO(t);s&&(l=AO(l));let h=e.minInt,p=e.minFrac,m=e.maxFrac;if(o){let V=o.match(wO);if(V===null)throw new Error(`${o} is not a valid digit info`);let $=V[1],le=V[3],Ue=V[5];$!=null&&(h=xg($)),le!=null&&(p=xg(le)),Ue!=null?m=xg(Ue):le!=null&&p>m&&(m=p)}NO(l,p,m);let y=l.digits,D=l.integerLen,R=l.exponent,N=[];for(u=y.every(V=>!V);D<h;D++)y.unshift(0);for(;D<0;D++)y.unshift(0);D>0?N=y.splice(D,y.length):(N=y,y=[0]);let k=[];for(y.length>=e.lgSize&&k.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)k.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&k.unshift(y.join("")),c=k.join(vo(n,r)),N.length&&(c+=vo(n,i)+N.join("")),R&&(c+=vo(n,cn.Exponential)+"+"+R)}return t<0&&!u?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function XT(t,e,n){let r=JT(e,Og.Decimal),i=CO(r,vo(e,cn.MinusSign));return bO(t,i,e,cn.Group,cn.Decimal,n)}function CO(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(DO),i=r[0],o=r[1],s=i.indexOf(yl)!==-1?i.split(yl):[i.substring(0,i.lastIndexOf(fa)+1),i.substring(i.lastIndexOf(fa)+1)],c=s[0],u=s[1]||"";n.posPre=c.substring(0,c.indexOf(Pg));for(let h=0;h<u.length;h++){let p=u.charAt(h);p===fa?n.minFrac=n.maxFrac=h+1:p===Pg?n.maxFrac=h+1:n.posSuf+=p}let l=c.split(TO);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let h=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(Pg);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+h).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function AO(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function SO(t){let e=Math.abs(t)+"",n=0,r,i,o,s,c;for((i=e.indexOf(yl))>-1&&(e=e.replace(yl,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===fa;o++);if(o===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===fa;)c--;for(i-=o,r=[],s=0;o<=c;o++,s++)r[s]=Number(e.charAt(o))}return i>KT&&(r=r.splice(0,KT-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function NO(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,c=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(c>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+t.integerLen,h=r.reduceRight(function(p,m,y,D){return m=m+p,D[y]=m<10?m:m-10,u&&(D[y]===0&&y>=l?D.pop():u=!1),m>=10?1:0},0);h&&(r.unshift(h),t.integerLen++)}function xg(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}var kg=/\s+/,QT=[],RO=(()=>{class t{_ngEl;_renderer;initialClasses=QT;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(kg):QT}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(kg):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(kg).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(ee(Mt),ee(ho))};static \u0275dir=nt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var vl=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Il=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new vl(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),YT(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);YT(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(ee(fo),ee(Kr),ee(Rg))};static \u0275dir=nt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function YT(t,e){t.context.$implicit=e.item}var pa=(()=>{class t{_viewContainer;_context=new _l;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){ZT(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){ZT(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(ee(fo),ee(Kr))};static \u0275dir=nt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),_l=class{$implicit=null;ngIf=null};function ZT(t,e){if(t&&!t.createEmbeddedView)throw new H(2020,!1)}function MO(t,e){return new H(2100,!1)}var Fg=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!PO(n))return null;i||=this._locale;try{let o=xO(n);return XT(o,i,r)}catch(o){throw MO(t,o.message)}}static \u0275fac=function(r){return new(r||t)(ee(dl,16))};static \u0275pipe=gT({name:"number",type:t,pure:!0})}return t})();function PO(t){return!(t==null||t===""||t!==t)}function xO(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var ni=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=aa({type:t});static \u0275inj=Xs({})}return t})();function kO(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var OO="browser",eb="server";function FO(t){return t===eb}var Vg=class{};var DG=(()=>{class t{static \u0275prov=X({token:t,providedIn:"root",factory:()=>new Lg(L(da),window)})}return t})(),Lg=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=VO(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function VO(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var tb=()=>{};var ib=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},LO=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},El={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ib(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new Ug;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let D=l<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ug=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},jO=function(t){let e=ib(t);return El.encodeByteArray(e,!0)},ma=function(t){return jO(t).replace(/\./g,"")},wl=function(t){try{return El.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Hg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var BO=()=>Hg().__FIREBASE_DEFAULTS__,UO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$O=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&wl(t[1]);return e&&JSON.parse(e)},Dl=()=>{try{return tb()||BO()||UO()||$O()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qg=t=>{var e,n;return(n=(e=Dl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ob=t=>{let e=qg(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zg=()=>{var t;return(t=Dl())===null||t===void 0?void 0:t.config},Gg=t=>{var e;return(e=Dl())===null||e===void 0?void 0:e[`_${t}`]};var ri=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ii(t){return t.endsWith(".cloudworkstations.dev")}function Tl(t){return v(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function sb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ma(JSON.stringify(n)),ma(JSON.stringify(s)),""].join(".")}var ga={};function HO(){let t={prod:[],emulator:[]};for(let e of Object.keys(ga))ga[e]?t.emulator.push(e):t.prod.push(e);return t}function qO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var nb=!1;function _o(t,e){if(typeof window>"u"||typeof document>"u"||!ii(window.location.host)||ga[t]===e||ga[t]||nb)return;ga[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=HO().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{nb=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=qO(r),y=n("text"),D=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),N=document.getElementById(R)||document.createElement("a"),k=n("preprendIcon"),V=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let $=m.element;c($),h(N,R);let le=l();u(V,k),$.append(V,D,N,le),document.body.appendChild($)}o?(D.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function $e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ab(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function zO(){var t;let e=(t=Dl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ub(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function db(){let t=$e();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hb(){return!zO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ya(){try{return typeof indexedDB=="object"}catch{return!1}}function fb(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var GO="FirebaseError",Tt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GO,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zt.prototype.create)}},zt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?WO(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new Tt(i,c,r)}};function WO(t,e){return t.replace(KO,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var KO=/\{\$([^}]+)}/g;function pb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function un(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(rb(o)&&rb(s)){if(!un(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function rb(t){return t!==null&&typeof t=="object"}function Io(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eo(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function wo(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function gb(t,e){let n=new $g(t,e);return n.subscribe.bind(n)}var $g=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");QO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Bg),i.error===void 0&&(i.error=Bg),i.complete===void 0&&(i.complete=Bg);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function QO(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bg(){}var RG=4*60*60*1e3;function De(t){return t&&t._delegate?t._delegate:t}var ct=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var oi="[DEFAULT]";var Wg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ri;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZO(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function YO(t){return t===oi?void 0:t}function ZO(t){return t.instantiationMode==="EAGER"}var bl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Wg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var JO=[],oe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(oe||{}),XO={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},eF=oe.INFO,tF={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},nF=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=tF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ln=class{constructor(e){this.name=e,this._logLevel=eF,this._logHandler=nF,this._userLogHandler=null,JO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var rF=(t,e)=>e.some(n=>t instanceof n),mb,yb;function iF(){return mb||(mb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oF(){return yb||(yb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var vb=new WeakMap,Qg=new WeakMap,_b=new WeakMap,Kg=new WeakMap,Zg=new WeakMap;function sF(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(dn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&vb.set(n,t)}).catch(()=>{}),Zg.set(e,t),e}function aF(t){if(Qg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Qg.set(t,e)}var Yg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_b.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ib(t){Yg=t(Yg)}function cF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Cl(this),e,...n);return _b.set(r,e.sort?e.sort():[e]),dn(r)}:oF().includes(t)?function(...e){return t.apply(Cl(this),e),dn(vb.get(this))}:function(...e){return dn(t.apply(Cl(this),e))}}function uF(t){return typeof t=="function"?cF(t):(t instanceof IDBTransaction&&aF(t),rF(t,iF())?new Proxy(t,Yg):t)}function dn(t){if(t instanceof IDBRequest)return sF(t);if(Kg.has(t))return Kg.get(t);let e=uF(t);return e!==t&&(Kg.set(t,e),Zg.set(e,t)),e}var Cl=t=>Zg.get(t);function wb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=dn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(dn(s.result),u.oldVersion,u.newVersion,dn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var lF=["get","getKey","getAll","getAllKeys","count"],dF=["put","add","delete","clear"],Jg=new Map;function Eb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jg.get(e))return Jg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=dF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lF.includes(n)))return;let o=function(s,...c){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return Jg.set(e,o),o}Ib(t=>ye(fe({},t),{get:(e,n,r)=>Eb(e,n)||t.get(e,n,r),has:(e,n)=>!!Eb(e,n)||t.has(e,n)}));var em=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hF(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function hF(t){let e=t.getComponent();return e?.type==="VERSION"}var tm="@firebase/app",Db="0.13.0";var Cn=new ln("@firebase/app"),fF="@firebase/app-compat",pF="@firebase/analytics-compat",gF="@firebase/analytics",mF="@firebase/app-check-compat",yF="@firebase/app-check",vF="@firebase/auth",_F="@firebase/auth-compat",IF="@firebase/database",EF="@firebase/data-connect",wF="@firebase/database-compat",DF="@firebase/functions",TF="@firebase/functions-compat",bF="@firebase/installations",CF="@firebase/installations-compat",AF="@firebase/messaging",SF="@firebase/messaging-compat",NF="@firebase/performance",RF="@firebase/performance-compat",MF="@firebase/remote-config",PF="@firebase/remote-config-compat",xF="@firebase/storage",kF="@firebase/storage-compat",OF="@firebase/firestore",FF="@firebase/ai",VF="@firebase/firestore-compat",LF="firebase",jF="11.8.0";var nm="[DEFAULT]",BF={[tm]:"fire-core",[fF]:"fire-core-compat",[gF]:"fire-analytics",[pF]:"fire-analytics-compat",[yF]:"fire-app-check",[mF]:"fire-app-check-compat",[vF]:"fire-auth",[_F]:"fire-auth-compat",[IF]:"fire-rtdb",[EF]:"fire-data-connect",[wF]:"fire-rtdb-compat",[DF]:"fire-fn",[TF]:"fire-fn-compat",[bF]:"fire-iid",[CF]:"fire-iid-compat",[AF]:"fire-fcm",[SF]:"fire-fcm-compat",[NF]:"fire-perf",[RF]:"fire-perf-compat",[MF]:"fire-rc",[PF]:"fire-rc-compat",[xF]:"fire-gcs",[kF]:"fire-gcs-compat",[OF]:"fire-fst",[VF]:"fire-fst-compat",[FF]:"fire-vertex","fire-js":"fire-js",[LF]:"fire-js-all"};var va=new Map,UF=new Map,rm=new Map;function Tb(t,e){try{t.container.addComponent(e)}catch(n){Cn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gt(t){let e=t.name;if(rm.has(e))return Cn.debug(`There were multiple attempts to register component ${e}.`),!1;rm.set(e,t);for(let n of va.values())Tb(n,t);for(let n of UF.values())Tb(n,t);return!0}function Do(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ut(t){return t==null?!1:t.settings!==void 0}var $F={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ar=new zt("app","Firebase",$F);var im=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ct("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}};var cr=jF;function am(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:nm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ar.create("bad-app-name",{appName:String(i)});if(n||(n=zg()),!n)throw ar.create("no-options");let o=va.get(i);if(o){if(un(n,o.options)&&un(r,o.config))return o;throw ar.create("duplicate-app",{appName:i})}let s=new bl(i);for(let u of rm.values())s.addComponent(u);let c=new im(n,r,s);return va.set(i,c),c}function si(t=nm){let e=va.get(t);if(!e&&t===nm&&zg())return am();if(!e)throw ar.create("no-app",{appName:t});return e}function Al(){return Array.from(va.values())}function Re(t,e,n){var r;let i=(r=BF[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cn.warn(c.join(" "));return}Gt(new ct(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var HF="firebase-heartbeat-database",qF=1,_a="firebase-heartbeat-store",Xg=null;function Sb(){return Xg||(Xg=wb(HF,qF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_a)}catch(n){console.warn(n)}}}}).catch(t=>{throw ar.create("idb-open",{originalErrorMessage:t.message})})),Xg}function zF(t){return v(this,null,function*(){try{let n=(yield Sb()).transaction(_a),r=yield n.objectStore(_a).get(Nb(t));return yield n.done,r}catch(e){if(e instanceof Tt)Cn.warn(e.message);else{let n=ar.create("idb-get",{originalErrorMessage:e?.message});Cn.warn(n.message)}}})}function bb(t,e){return v(this,null,function*(){try{let r=(yield Sb()).transaction(_a,"readwrite");yield r.objectStore(_a).put(e,Nb(t)),yield r.done}catch(n){if(n instanceof Tt)Cn.warn(n.message);else{let r=ar.create("idb-set",{originalErrorMessage:n?.message});Cn.warn(r.message)}}})}function Nb(t){return`${t.name}!${t.options.appId}`}var GF=1024,WF=30,om=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new sm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Cb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>WF){let s=QF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cn.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Cb(),{heartbeatsToSend:r,unsentEntries:i}=KF(this._heartbeatsCache.heartbeats),o=ma(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Cn.warn(n),""}})}};function Cb(){return new Date().toISOString().substring(0,10)}function KF(t,e=GF){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Ab(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ab(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var sm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return ya()?fb().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield zF(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return bb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return bb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Ab(t){return ma(JSON.stringify({version:2,heartbeats:t})).length}function QF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function YF(t){Gt(new ct("platform-logger",e=>new em(e),"PRIVATE")),Gt(new ct("heartbeat",e=>new om(e),"PRIVATE")),Re(tm,Db,t),Re(tm,Db,"esm2017"),Re("fire-js","")}YF("");var ZF="firebase",JF="11.8.0";Re(ZF,JF,"app");function XF(t,e){let n=!e?.manualCleanup;n&&!e?.injector&&ta(XF);let r=n?e?.injector?.get(ei)??L(ei):null,i=eV(e?.equal),o;e?.requireSync?o=pe({kind:0},{equal:i}):o=pe({kind:1,value:e?.initialValue},{equal:i});let s=t.subscribe({next:c=>o.set({kind:1,value:c}),error:c=>{if(e?.rejectErrors)throw c;o.set({kind:2,error:c})}});if(e?.requireSync&&o().kind===0)throw new H(601,!1);return r?.onDestroy(s.unsubscribe.bind(s)),Ht(()=>{let c=o();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new H(601,!1)}},{equal:e?.equal})}function eV(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}function cm(t){t===void 0&&(ta(cm),t=L(Ge));let e=t.get(Xu);return n=>new ne(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var ur=new Yr("ANGULARFIRE2_VERSION");function Ia(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var bo=(t,e)=>{let n=e?[e]:Al(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},To=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(To||{}),Rb=Ng()&&typeof Zone<"u"?To.WARN:To.SILENT;var Sl=class{zone;delegate;constructor(e,n=Jh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},lr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=L(we);this.outsideAngular=n.runOutsideAngular(()=>new Sl(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Sl(typeof Zone>"u"?void 0:Zone.current,Rs))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Mb=!1;function tV(t,e){!Mb&&(Rb>To.SILENT||Ng())&&(Mb=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Rb>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function nV(t){let e=L(we,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function ai(t){let e=L(we,{optional:!0});return e?e.run(()=>t()):t()}var rV=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),to(n,()=>ai(()=>t.apply(void 0,r)))),Be=(t,e,n)=>(n||=e?To.WARN:To.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=L(lr),s=L(Xu),c=L(Jt)}catch{return tV(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=ai(()=>s.add())),i[l]=rV(i[l],r,c));let u=nV(()=>t.apply(this,i));return e?u instanceof ne?u.pipe(Zn(o.outsideAngular),Yn(o.insideAngular),cm(c)):u instanceof Promise?ai(()=>new Promise((l,h)=>{s.run(()=>u).then(p=>to(c,()=>ai(()=>l(p))),p=>to(c,()=>ai(()=>h(p))))})):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:ai(()=>u):u instanceof ne?u.pipe(Zn(o.outsideAngular),Yn(o.insideAngular)):ai(()=>u)});var An=class{constructor(e){return e}},ci=class{constructor(){return Al()}};function iV(t){return t&&t.length===1?t[0]:new An(si())}var um=new z("angularfire2._apps"),oV={provide:An,useFactory:iV,deps:[[new wt,um]]},sV={provide:ci,deps:[[new wt,um]]};function aV(t){return(e,n)=>{let r=n.get(eg);Re("angularfire",ur.full,"core"),Re("angularfire",ur.full,"app"),Re("angular",LT.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new An(i)}}function A5(t,...e){return rr([oV,sV,{provide:um,useFactory:aV(t),multi:!0,deps:[we,Ge,lr,...e]}])}var S5=Be(am,!0);var cV=new Map,uV={activated:!1,tokenObservers:[]},lV={initialized:!1,enabled:!1};function Wt(t){return cV.get(t)||Object.assign({},uV)}function Ob(){return lV}var dV="https://content-firebaseappcheck.googleapis.com/v1";var hV="exchangeDebugToken",Pb={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},V5=24*60*60*1e3;var hm=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new ri,this.pending.promise.catch(n=>{}),yield fV(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ri,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function fV(t){return new Promise(e=>{setTimeout(e,t)})}var pV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},dr=new zt("appCheck","AppCheck",pV);function Fb(t){if(!Wt(t).activated)throw dr.create("use-before-activation",{appName:t.name})}function Vb(r,i){return v(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(y){throw dr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw dr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw dr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw dr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function Lb(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${dV}/projects/${n}/apps/${r}:${hV}?key=${i}`,body:{debug_token:e}}}var gV="firebase-app-check-database",mV=1,fm="firebase-app-check-store";var Nl=null;function yV(){return Nl||(Nl=new Promise((t,e)=>{try{let n=indexedDB.open(gV,mV);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(dr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(fm,{keyPath:"compositeKey"})}}}catch(n){e(dr.create("storage-open",{originalErrorMessage:n?.message}))}}),Nl)}function vV(t,e){return _V(IV(t),e)}function _V(t,e){return v(this,null,function*(){let r=(yield yV()).transaction(fm,"readwrite"),o=r.objectStore(fm).put({compositeKey:t,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;c(dr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function IV(t){return`${t.options.appId}-${t.name}`}var Ea=new ln("@firebase/app-check");function lm(t,e){return ya()?vV(t,e).catch(n=>{Ea.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function jb(){return Ob().enabled}function Bb(){return v(this,null,function*(){let t=Ob();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var EV={error:"UNKNOWN_ERROR"};function wV(t){return El.encodeString(JSON.stringify(t),!1)}function pm(t,e=!1,n=!1){return v(this,null,function*(){let r=t.app;Fb(r);let i=Wt(r),o=i.token,s;if(o&&!wa(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(wa(l)?o=l:yield lm(r,void 0))}if(!e&&o&&wa(o))return{token:o.token};let c=!1;if(jb())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=Vb(Lb(r,yield Bb()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield lm(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ea.warn(l.message):n&&Ea.error(l),dm(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield Wt(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ea.warn(l.message):n&&Ea.error(l),s=l}let u;return o?s?wa(o)?u={token:o.token,internalError:s}:u=dm(s):(u={token:o.token},i.token=o,yield lm(r,o)):u=dm(s),c&&CV(r,u),u})}function DV(t){return v(this,null,function*(){let e=t.app;Fb(e);let{provider:n}=Wt(e);if(jb()){let r=yield Bb(),{token:i}=yield Vb(Lb(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function TV(t,e,n,r){let{app:i}=t,o=Wt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&wa(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),xb(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>xb(t))}function Ub(t,e){let n=Wt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function xb(t){let{app:e}=t,n=Wt(e),r=n.tokenRefresher;r||(r=bV(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function bV(t){let{app:e}=t;return new hm(()=>v(null,null,function*(){let n=Wt(e),r;if(n.token?r=yield pm(t,!0):r=yield pm(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Wt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Pb.RETRIAL_MIN_WAIT,Pb.RETRIAL_MAX_WAIT)}function CV(t,e){let n=Wt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function wa(t){return t.expireTimeMillis-Date.now()>0}function dm(t){return{token:wV(EV),error:t}}var gm=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Wt(this.app);for(let n of e)Ub(this.app,n.next);return Promise.resolve()}};function AV(t,e){return new gm(t,e)}function SV(t){return{getToken:e=>pm(t,e),getLimitedUseToken:()=>DV(t),addTokenListener:e=>TV(t,"INTERNAL",e),removeTokenListener:e=>Ub(t.app,e)}}var NV="@firebase/app-check",RV="0.10.0";var MV="app-check",kb="app-check-internal";function PV(){Gt(new ct(MV,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return AV(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(kb).initialize()})),Gt(new ct(kb,t=>{let e=t.getProvider("app-check").getImmediate();return SV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Re(NV,RV)}PV();var xV="app-check";var Co=class{constructor(){return bo(xV)}};var kV=["localhost","0.0.0.0","127.0.0.1"],Y5=typeof window<"u"&&kV.includes(window.location.hostname);function rC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var iC=rC,oC=new zt("auth","Firebase",rC());var Ol=new ln("@firebase/auth");function OV(t,...e){Ol.logLevel<=oe.WARN&&Ol.warn(`Auth (${cr}): ${t}`,...e)}function Ml(t,...e){Ol.logLevel<=oe.ERROR&&Ol.error(`Auth (${cr}): ${t}`,...e)}function kt(t,...e){throw Lm(t,...e)}function Kt(t,...e){return Lm(t,...e)}function Vm(t,e,n){let r=Object.assign(Object.assign({},iC()),{[e]:n});return new zt("auth","Firebase",r).create(e,{appName:t.name})}function Rn(t){return Vm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FV(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&kt(t,"argument-error"),Vm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Lm(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oC.create(t,...e)}function U(t,e,...n){if(!t)throw Lm(e,...n)}function Sn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ml(e),new Error(e)}function Mn(t,e){t||Sn(e)}function vm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function VV(){return $b()==="http:"||$b()==="https:"}function $b(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function LV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VV()||ub()||"connection"in navigator)?navigator.onLine:!0}function jV(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ui=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mn(n>e,"Short delay should be less than long delay!"),this.isMobile=ab()||lb()}get(){return LV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function jm(t,e){Mn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Fl=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var BV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var UV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$V=new ui(3e4,6e4);function pr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Pn(o,s,c,u){return v(this,arguments,function*(t,e,n,r,i={}){return sC(t,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Io(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return cb()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&ii(t.emulatorConfig.host)&&(y.credentials="include"),Fl.fetch()(yield aC(t,t.config.apiHost,n,p),y)}))})}function sC(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},BV),e);try{let i=new _m(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Rl(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rl(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Rl(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Rl(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Vm(t,h,l);kt(t,h)}}catch(i){if(i instanceof Tt)throw i;kt(t,"network-request-failed",{message:String(i)})}})}function Ra(o,s,c,u){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield Pn(t,e,n,r,i);return"mfaPendingCredential"in l&&kt(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function aC(t,e,n,r){return v(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?jm(t.config,i):`${t.config.apiScheme}://${i}`;return UV.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function HV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var _m=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kt(this.auth,"network-request-failed")),$V.get())})}};function Rl(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Kt(t,e,r);return i.customData._tokenResponse=n,i}function Hb(t){return t!==void 0&&t.enterprise!==void 0}var Im=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function qV(t,e){return v(this,null,function*(){return Pn(t,"GET","/v2/recaptchaConfig",pr(t,e))})}function zV(t,e){return v(this,null,function*(){return Pn(t,"POST","/v1/accounts:delete",e)})}function Vl(t,e){return v(this,null,function*(){return Pn(t,"POST","/v1/accounts:lookup",e)})}function Ta(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Bm(t,e=!1){return v(this,null,function*(){let n=De(t),r=yield n.getIdToken(e),i=Um(r);U(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ta(mm(i.auth_time)),issuedAtTime:Ta(mm(i.iat)),expirationTime:Ta(mm(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function mm(t){return Number(t)*1e3}function Um(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ml("JWT malformed, contained fewer than 3 sections"),null;try{let i=wl(n);return i?JSON.parse(i):(Ml("Failed to decode base64 JWT payload"),null)}catch(i){return Ml("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qb(t){let e=Um(t);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function So(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Tt&&GV(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function GV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Em=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ca=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ta(this.lastLoginAt),this.creationTime=Ta(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ll(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield So(t,Vl(n,{idToken:r}));U(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?cC(o.providerUserInfo):[],c=WV(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!c?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Ca(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function $m(t){return v(this,null,function*(){let e=De(t);yield Ll(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function WV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cC(t){return t.map(e=>{var{providerId:n}=e,r=Rc(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function KV(t,e){return v(this,null,function*(){let n=yield sC(t,{},()=>v(null,null,function*(){let r=Io({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield aC(t,i,"/v1/token",`key=${o}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Fl.fetch()(s,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function QV(t,e){return v(this,null,function*(){return Pn(t,"POST","/v2/accounts:revokeToken",pr(t,e))})}var ba=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){U(e.length!==0,"internal-error");let n=qb(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(U(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield KV(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(U(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(U(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(U(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Sn("not implemented")}};function hr(t,e){U(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var fr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Rc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Em(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ca(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield So(this,this.stsTokenManager.getToken(this.auth,e));return U(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Bm(this,e)}reload(){return $m(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Ll(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(ut(this.auth.app))return Promise.reject(Rn(this.auth));let e=yield this.getIdToken();return yield So(this,zV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,c,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,D=(s=n.photoURL)!==null&&s!==void 0?s:void 0,R=(c=n.tenantId)!==null&&c!==void 0?c:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,V=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:$,emailVerified:le,isAnonymous:Ue,providerData:he,stsTokenManager:T}=n;U($&&T,e,"internal-error");let _=ba.fromJSON(this.name,T);U(typeof $=="string",e,"internal-error"),hr(p,e.name),hr(m,e.name),U(typeof le=="boolean",e,"internal-error"),U(typeof Ue=="boolean",e,"internal-error"),hr(y,e.name),hr(D,e.name),hr(R,e.name),hr(N,e.name),hr(k,e.name),hr(V,e.name);let E=new t({uid:$,auth:e,email:m,emailVerified:le,displayName:p,isAnonymous:Ue,photoURL:D,phoneNumber:y,tenantId:R,stsTokenManager:_,createdAt:k,lastLoginAt:V});return he&&Array.isArray(he)&&(E.providerData=he.map(w=>Object.assign({},w))),N&&(E._redirectEventId=N),E}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new ba;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ll(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];U(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?cC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new ba;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ca(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var zb=new Map;function Nn(t){Mn(t instanceof Function,"Expected a class definition");let e=zb.get(t);return e?(Mn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zb.set(t,e),e)}var YV=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),wm=YV;function Pl(t,e,n){return`firebase:${t}:${e}:${n}`}var jl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Pl(this.userKey,i.apiKey,o),this.fullPersistenceKey=Pl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Vl(this.auth,{idToken:e}).catch(()=>{});return n?fr._fromGetAccountInfoResponse(this.auth,n,e):null}return fr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(Nn(wm),e,r);let i=(yield Promise.all(n.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Nn(wm),s=Pl(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield Vl(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield fr._fromGetAccountInfoResponse(e,m,h)}else p=fr._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(n.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function Gb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pC(e))return"Blackberry";if(gC(e))return"Webos";if(lC(e))return"Safari";if((e.includes("chrome/")||dC(e))&&!e.includes("edge/"))return"Chrome";if(fC(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function uC(t=$e()){return/firefox\//i.test(t)}function lC(t=$e()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dC(t=$e()){return/crios\//i.test(t)}function hC(t=$e()){return/iemobile/i.test(t)}function fC(t=$e()){return/android/i.test(t)}function pC(t=$e()){return/blackberry/i.test(t)}function gC(t=$e()){return/webos/i.test(t)}function Hm(t=$e()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZV(t=$e()){var e;return Hm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JV(){return db()&&document.documentMode===10}function mC(t=$e()){return Hm(t)||fC(t)||gC(t)||pC(t)||/windows phone/i.test(t)||hC(t)}function yC(t,e=[]){let n;switch(t){case"Browser":n=Gb($e());break;case"Worker":n=`${Gb($e())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cr}/${r}`}var Dm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function XV(n){return v(this,arguments,function*(t,e={}){return Pn(t,"GET","/v2/passwordPolicy",pr(t,e))})}var eL=6,Tm=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:eL,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var bm=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bl(this),this.idTokenSubscription=new Bl(this),this.beforeStateQueue=new Dm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nn(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield jl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield Vl(this,{idToken:e}),r=yield fr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(ut(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Ll(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=jV()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(ut(this.app))return Promise.reject(Rn(this));let n=e?De(e):null;return n&&U(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return ut(this.app)?Promise.reject(Rn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ut(this.app)?Promise.reject(Rn(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Nn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield XV(this),n=new Tm(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield QV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Nn(e)||this._popupRedirectResolver;U(n,this,"argument-error"),this.redirectPersistenceManager=yield jl.create(this,[Nn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(U(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;if(ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&OV(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function gr(t){return De(t)}var Bl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=gb(n=>this.observer=n)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ql={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tL(t){Ql=t}function vC(t){return Ql.loadJS(t)}function nL(){return Ql.recaptchaEnterpriseScript}function rL(){return Ql.gapiScript}function _C(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Cm=class{constructor(){this.enterprise=new Am}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},Am=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var iL="recaptcha-enterprise",IC="NO_RECAPTCHA",Sm=class{constructor(e){this.type=iL,this.auth=gr(e)}verify(e="verify",n=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,c)=>v(null,null,function*(){qV(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let l=new Im(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{c(u)})}))})}function i(o,s,c){let u=window.grecaptcha;Hb(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(IC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Cm().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(c=>{if(!n&&Hb(window.grecaptcha))i(c,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=nL();u.length!==0&&(u+=c),vC(u).then(()=>{i(c,o,s)}).catch(l=>{s(l)})}}).catch(c=>{s(c)})})})}};function Da(t,e,n,r=!1,i=!1){return v(this,null,function*(){let o=new Sm(t),s;if(i)s=IC;else try{s=yield o.verify(n)}catch{s=yield o.verify(n,!0)}let c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){let u=c.phoneEnrollmentInfo.phoneNumber,l=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){let u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:s}):Object.assign(c,{captchaResponse:s}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c})}function Nm(t,e,n,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let c=yield Da(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(c=>v(null,null,function*(){if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Da(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)}));else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let c=yield Da(t,e,n);return r(t,c).catch(u=>v(null,null,function*(){var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=yield Da(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)}))}else{let c=yield Da(t,e,n,!1,!0);return r(t,c)}else return Promise.reject(i+" provider is not supported.")})}function qm(t,e){let n=Do(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(un(o,e??{}))return i;kt(i,"already-initialized")}return n.initialize({options:e})}function oL(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Nn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function zm(t,e,n){let r=gr(t);U(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=EC(e),{host:s,port:c}=sL(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){U(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),U(un(l,r.config.emulator)&&un(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ii(s)?(_o("Auth",!0),Tl(`${o}//${s}${u}`)):i||aL()}function EC(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sL(t){let e=EC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:Wb(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:Wb(s)}}}function Wb(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function aL(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var No=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,n){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}};function cL(t,e){return v(this,null,function*(){return Pn(t,"POST","/v1/accounts:signUp",e)})}function uL(t,e){return v(this,null,function*(){return Ra(t,"POST","/v1/accounts:signInWithPassword",pr(t,e))})}function lL(t,e){return v(this,null,function*(){return Ra(t,"POST","/v1/accounts:signInWithEmailLink",pr(t,e))})}function dL(t,e){return v(this,null,function*(){return Ra(t,"POST","/v1/accounts:signInWithEmailLink",pr(t,e))})}var Aa=class t extends No{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nm(e,n,"signInWithPassword",uL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return lL(e,{email:this._email,oobCode:this._password});default:kt(e,"internal-error")}})}_linkToIdToken(e,n){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nm(e,r,"signUpPassword",cL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return dL(e,{idToken:n,email:this._email,oobCode:this._password});default:kt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Ao(t,e){return v(this,null,function*(){return Ra(t,"POST","/v1/accounts:signInWithIdp",pr(t,e))})}var hL="http://localhost",Ul=class t extends No{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):kt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Rc(n,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return Ao(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Ao(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Ao(e,n)}buildRequest(){let e={requestUri:hL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Io(n)}return e}};function fL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pL(t){let e=Eo(wo(t)).link,n=e?Eo(wo(e)).deep_link_id:null,r=Eo(wo(t)).deep_link_id;return(r?Eo(wo(r)).link:null)||r||n||e||t}var $l=class t{constructor(e){var n,r,i,o,s,c;let u=Eo(wo(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=fL((i=u.mode)!==null&&i!==void 0?i:null);U(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let n=pL(e);try{return new t(n)}catch{return null}}};var wC=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Aa._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=$l.parseLink(r);return U(i,"argument-error"),Aa._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Sa=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Hl=class extends Sa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Gm=(()=>{class t extends Hl{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Ul._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();function gL(t,e){return v(this,null,function*(){return Ra(t,"POST","/v1/accounts:signUp",pr(t,e))})}var Ro=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let o=yield fr._fromIdTokenResponse(e,r,i),s=Kb(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Kb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Kb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Rm=class t extends Tt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function DC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Rm._fromErrorAndOperation(t,o,e,r):o})}function mL(t,e,n=!1){return v(this,null,function*(){let r=yield So(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ro._forOperation(t,"link",r)})}function yL(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(ut(r.app))return Promise.reject(Rn(r));let i="reauthenticate";try{let o=yield So(t,DC(r,i,e,t),n);U(o.idToken,r,"internal-error");let s=Um(o.idToken);U(s,r,"internal-error");let{sub:c}=s;return U(t.uid===c,r,"user-mismatch"),Ro._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&kt(r,"user-mismatch"),o}})}function TC(t,e,n=!1){return v(this,null,function*(){if(ut(t.app))return Promise.reject(Rn(t));let r="signIn",i=yield DC(t,r,e),o=yield Ro._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Wm(t,e){return v(this,null,function*(){return TC(gr(t),e)})}function bC(t){return v(this,null,function*(){let e=gr(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Km(t,e,n){return v(this,null,function*(){if(ut(t.app))return Promise.reject(Rn(t));let r=gr(t),s=yield Nm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gL,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&bC(t),u}),c=yield Ro._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(c.user),c})}function Qm(t,e,n){return ut(t.app)?Promise.reject(Rn(t)):Wm(De(t),wC.credential(e,n)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&bC(t),r}))}function vL(t,e){return v(this,null,function*(){return Pn(t,"POST","/v1/accounts:update",e)})}function Ym(r,i){return v(this,arguments,function*(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;let o=De(t),c={idToken:yield o.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},u=yield So(o,vL(o.auth,c));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let l=o.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function Zm(t,e,n,r){return De(t).onIdTokenChanged(e,n,r)}function Jm(t,e,n){return De(t).beforeAuthStateChanged(e,n)}function Yl(t,e,n,r){return De(t).onAuthStateChanged(e,n,r)}function Xm(t){return De(t).signOut()}var ql="__sak";var zl=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ql,"1"),this.storage.removeItem(ql),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var _L=1e3,IL=10,EL=(()=>{class t extends zl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mC(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);JV()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,IL):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},_L)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield Kn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield Kn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield Kn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),CC=EL;var wL=(()=>{class t extends zl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),ey=wL;function DL(t){return Promise.all(t.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var TL=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield DL(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function ty(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Mm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=ty("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function hn(){return window}function bL(t){hn().location.href=t}function AC(){return typeof hn().WorkerGlobalScope<"u"&&typeof hn().importScripts=="function"}function CL(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function AL(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function SL(){return AC()?self:null}var SC="firebaseLocalStorageDb",NL=1,Gl="firebaseLocalStorage",NC="fbase_key",li=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Zl(t,e){return t.transaction([Gl],e?"readwrite":"readonly").objectStore(Gl)}function RL(){let t=indexedDB.deleteDatabase(SC);return new li(t).toPromise()}function Pm(){let t=indexedDB.open(SC,NL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Gl,{keyPath:NC})}catch(i){n(i)}}),t.addEventListener("success",()=>v(null,null,function*(){let r=t.result;r.objectStoreNames.contains(Gl)?e(r):(r.close(),yield RL(),e(yield Pm()))}))})}function Qb(t,e,n){return v(this,null,function*(){let r=Zl(t,!0).put({[NC]:e,value:n});return new li(r).toPromise()})}function ML(t,e){return v(this,null,function*(){let n=Zl(t,!1).get(e),r=yield new li(n).toPromise();return r===void 0?null:r.value})}function Yb(t,e){let n=Zl(t,!0).delete(e);return new li(n).toPromise()}var PL=800,xL=3,kL=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Pm(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>xL)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return AC()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=TL._getInstance(SL()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield CL(),!this.activeServiceWorker)return;this.sender=new Mm(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||AL()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Pm();return yield Qb(n,ql,"1"),yield Yb(n,ql),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>Qb(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>ML(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>Yb(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(o=>{let s=Zl(o,!1).getAll();return new li(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),PL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),RC=kL;var iW=_C("rcb"),oW=new ui(3e4,6e4);function MC(t,e){return e?Nn(e):(U(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Na=class extends No{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ao(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function OL(t){return TC(t.auth,new Na(t),t.bypassAuthState)}function FL(t){let{auth:e,user:n}=t;return U(n,e,"internal-error"),yL(n,new Na(t),t.bypassAuthState)}function VL(t){return v(this,null,function*(){let{auth:e,user:n}=t;return U(n,e,"internal-error"),mL(n,new Na(t),t.bypassAuthState)})}var Wl=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OL;case"linkViaPopup":case"linkViaRedirect":return VL;case"reauthViaPopup":case"reauthViaRedirect":return FL;default:kt(this.auth,"internal-error")}}resolve(e){Mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var LL=new ui(2e3,1e4);function ny(t,e,n){return v(this,null,function*(){if(ut(t.app))return Promise.reject(Kt(t,"operation-not-supported-in-this-environment"));let r=gr(t);FV(t,e,Sa);let i=MC(r,n);return new jL(r,"signInViaPopup",e,i).executeNotNull()})}var jL=(()=>{class t extends Wl{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return v(this,null,function*(){let n=yield this.execute();return U(n,this.auth,"internal-error"),n})}onExecution(){return v(this,null,function*(){Mn(this.filter.length===1,"Popup operations only handle one event");let n=ty();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Kt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(Kt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,LL.get())};n()}}t.currentPopupAction=null;return t})(),BL="pendingRedirect",xl=new Map,xm=class t extends Wl{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=xl.get(this.auth._key());if(!e){try{let r=(yield UL(this.resolver,this.auth))?yield Kn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xl.set(this.auth._key(),e)}return this.bypassAuthState||xl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Kn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Kn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function UL(t,e){return v(this,null,function*(){let n=qL(e),r=HL(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function $L(t,e){xl.set(t._key(),e)}function HL(t){return Nn(t._redirectPersistence)}function qL(t){return Pl(BL,t.config.apiKey,t.name)}function zL(t,e,n=!1){return v(this,null,function*(){if(ut(t.app))return Promise.reject(Rn(t));let r=gr(t),i=MC(r,e),s=yield new xm(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var GL=10*60*1e3,km=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!PC(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Kt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zb(e))}saveEventToCache(e){this.cachedEventUids.add(Zb(e)),this.lastProcessedEventTime=Date.now()}};function Zb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function WL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PC(t);default:return!1}}function KL(n){return v(this,arguments,function*(t,e={}){return Pn(t,"GET","/v1/projects",e)})}var QL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YL=/^https?/;function ZL(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield KL(t);for(let n of e)try{if(JL(n))return}catch{}kt(t,"unauthorized-domain")})}function JL(t){let e=vm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!YL.test(n))return!1;if(QL.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var XL=new ui(3e4,6e4);function Jb(){let t=hn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function e2(t){return new Promise((e,n)=>{var r,i,o;function s(){Jb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jb(),n(Kt(t,"network-request-failed"))},timeout:XL.get()})}if(!((i=(r=hn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=hn().gapi)===null||o===void 0)&&o.load)s();else{let c=_C("iframefcb");return hn()[c]=()=>{gapi.load?s():n(Kt(t,"network-request-failed"))},vC(`${rL()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw kl=null,e})}var kl=null;function t2(t){return kl=kl||e2(t),kl}var n2=new ui(5e3,15e3),r2="__/auth/iframe",i2="emulator/auth/iframe",o2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a2(t){let e=t.config;U(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?jm(e,i2):`https://${t.config.authDomain}/${r2}`,r={apiKey:e.apiKey,appName:t.name,v:cr},i=s2.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Io(r).slice(1)}`}function c2(t){return v(this,null,function*(){let e=yield t2(t),n=hn().gapi;return U(n,t,"internal-error"),e.open({where:document.body,url:a2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o2,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Kt(t,"network-request-failed"),c=hn().setTimeout(()=>{o(s)},n2.get());function u(){hn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var u2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},l2=500,d2=600,h2="_blank",f2="http://localhost",Kl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function p2(t,e,n,r=l2,i=d2){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},u2),{width:r.toString(),height:i.toString(),top:o,left:s}),l=$e().toLowerCase();n&&(c=dC(l)?h2:n),uC(l)&&(e=e||f2,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,D])=>`${m}${y}=${D},`,"");if(ZV(l)&&c!=="_self")return g2(e||"",c),new Kl(null);let p=window.open(e||"",c,h);U(p,t,"popup-blocked");try{p.focus()}catch{}return new Kl(p)}function g2(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var m2="__/auth/handler",y2="emulator/auth/handler",v2=encodeURIComponent("fac");function Xb(t,e,n,r,i,o){return v(this,null,function*(){U(t.config.authDomain,t,"auth-domain-config-required"),U(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:cr,eventId:i};if(e instanceof Sa){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",pb(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Hl){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let c=s;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=yield t._getAppCheckToken(),l=u?`#${v2}=${encodeURIComponent(u)}`:"";return`${_2(t)}?${Io(c).slice(1)}${l}`})}function _2({config:t}){return t.emulator?jm(t,y2):`https://${t.authDomain}/${m2}`}var ym="webStorageSupport",Om=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ey,this._completeRedirectFn=zL,this._overrideRedirectResult=$L}_openPopup(e,n,r,i){return v(this,null,function*(){var o;Mn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield Xb(e,n,r,vm(),i);return p2(e,s,ty())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield Xb(e,n,r,vm(),i);return bL(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Mn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield c2(e),r=new km(e);return n.register("authEvent",i=>(U(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ym,{type:ym},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[ym];s!==void 0&&n(!!s),kt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return mC()||lC()||Hm()}},xC=Om;var eC="@firebase/auth",tC="1.10.5";var Fm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function I2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E2(t){Gt(new ct("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;U(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yC(t)},l=new bm(r,i,o,u);return oL(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gt(new ct("auth-internal",e=>{let n=gr(e.getProvider("auth").getImmediate());return(r=>new Fm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Re(eC,tC,I2(t)),Re(eC,tC,"esm2017")}var w2=5*60,D2=Gg("authIdTokenMaxAge")||w2,nC=null,T2=t=>e=>v(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>D2)return;let i=n?.token;nC!==i&&(nC=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function ry(t=si()){let e=Do(t,"auth");if(e.isInitialized())return e.getImmediate();let n=qm(t,{popupRedirectResolver:xC,persistence:[RC,CC,ey]}),r=Gg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=T2(o.toString());Jm(n,s,()=>s(n.currentUser)),Zm(n,c=>s(c))}}let i=qg("auth");return i?zm(n,`http://${i}`):_o("Auth",!1),n}function b2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}tL({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Kt("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",b2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E2("Browser");var kC="auth",di=class{constructor(e){return e}},Ma=class{constructor(){return bo(kC)}};var iy=new z("angularfire2.auth-instances");function dj(t,e){let n=Ia(kC,t,e);return n&&new di(n)}function hj(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new di(r)}}var fj={provide:Ma,deps:[[new wt,iy]]},pj={provide:di,useFactory:dj,deps:[[new wt,iy],An]};function HW(t,...e){return Re("angularfire",ur.full,"auth"),rr([pj,fj,{provide:iy,useFactory:hj(t),multi:!0,deps:[we,Ge,lr,ci,[new wt,Co],...e]}])}var OC=Be(Km,!0,2);var qW=Be(ry,!0);var FC=Be(Qm,!0,2);var VC=Be(ny,!0,2);var LC=Be(Xm,!0,2);var jC=Be(Ym,!0,2);var mr=class t{constructor(e){this.auth=e;Yl(this.auth,n=>{this.currentUser.set(n)})}currentUser=pe(null);login(e,n){return FC(this.auth,e,n)}register(e,n,r){return v(this,null,function*(){let i=yield OC(this.auth,e,n);return i.user&&(yield jC(i.user,{displayName:r})),i})}logout(){return LC(this.auth)}loginWithGoogle(){let e=new Gm;return VC(this.auth,e)}static \u0275fac=function(n){return new(n||t)(Ie(di))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})};var BC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},UC={};var xn,sy;(function(){var t;function e(T,_){function E(){}E.prototype=_.prototype,T.D=_.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(w,b,A){for(var I=Array(arguments.length-2),vn=2;vn<arguments.length;vn++)I[vn-2]=arguments[vn];return _.prototype[b].apply(w,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,E){E||(E=0);var w=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)w[b]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(b=0;16>b;++b)w[b]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=T.g[0],E=T.g[1],b=T.g[2];var A=T.g[3],I=_+(A^E&(b^A))+w[0]+3614090360&4294967295;_=E+(I<<7&4294967295|I>>>25),I=A+(b^_&(E^b))+w[1]+3905402710&4294967295,A=_+(I<<12&4294967295|I>>>20),I=b+(E^A&(_^E))+w[2]+606105819&4294967295,b=A+(I<<17&4294967295|I>>>15),I=E+(_^b&(A^_))+w[3]+3250441966&4294967295,E=b+(I<<22&4294967295|I>>>10),I=_+(A^E&(b^A))+w[4]+4118548399&4294967295,_=E+(I<<7&4294967295|I>>>25),I=A+(b^_&(E^b))+w[5]+1200080426&4294967295,A=_+(I<<12&4294967295|I>>>20),I=b+(E^A&(_^E))+w[6]+2821735955&4294967295,b=A+(I<<17&4294967295|I>>>15),I=E+(_^b&(A^_))+w[7]+4249261313&4294967295,E=b+(I<<22&4294967295|I>>>10),I=_+(A^E&(b^A))+w[8]+1770035416&4294967295,_=E+(I<<7&4294967295|I>>>25),I=A+(b^_&(E^b))+w[9]+2336552879&4294967295,A=_+(I<<12&4294967295|I>>>20),I=b+(E^A&(_^E))+w[10]+4294925233&4294967295,b=A+(I<<17&4294967295|I>>>15),I=E+(_^b&(A^_))+w[11]+2304563134&4294967295,E=b+(I<<22&4294967295|I>>>10),I=_+(A^E&(b^A))+w[12]+1804603682&4294967295,_=E+(I<<7&4294967295|I>>>25),I=A+(b^_&(E^b))+w[13]+4254626195&4294967295,A=_+(I<<12&4294967295|I>>>20),I=b+(E^A&(_^E))+w[14]+2792965006&4294967295,b=A+(I<<17&4294967295|I>>>15),I=E+(_^b&(A^_))+w[15]+1236535329&4294967295,E=b+(I<<22&4294967295|I>>>10),I=_+(b^A&(E^b))+w[1]+4129170786&4294967295,_=E+(I<<5&4294967295|I>>>27),I=A+(E^b&(_^E))+w[6]+3225465664&4294967295,A=_+(I<<9&4294967295|I>>>23),I=b+(_^E&(A^_))+w[11]+643717713&4294967295,b=A+(I<<14&4294967295|I>>>18),I=E+(A^_&(b^A))+w[0]+3921069994&4294967295,E=b+(I<<20&4294967295|I>>>12),I=_+(b^A&(E^b))+w[5]+3593408605&4294967295,_=E+(I<<5&4294967295|I>>>27),I=A+(E^b&(_^E))+w[10]+38016083&4294967295,A=_+(I<<9&4294967295|I>>>23),I=b+(_^E&(A^_))+w[15]+3634488961&4294967295,b=A+(I<<14&4294967295|I>>>18),I=E+(A^_&(b^A))+w[4]+3889429448&4294967295,E=b+(I<<20&4294967295|I>>>12),I=_+(b^A&(E^b))+w[9]+568446438&4294967295,_=E+(I<<5&4294967295|I>>>27),I=A+(E^b&(_^E))+w[14]+3275163606&4294967295,A=_+(I<<9&4294967295|I>>>23),I=b+(_^E&(A^_))+w[3]+4107603335&4294967295,b=A+(I<<14&4294967295|I>>>18),I=E+(A^_&(b^A))+w[8]+1163531501&4294967295,E=b+(I<<20&4294967295|I>>>12),I=_+(b^A&(E^b))+w[13]+2850285829&4294967295,_=E+(I<<5&4294967295|I>>>27),I=A+(E^b&(_^E))+w[2]+4243563512&4294967295,A=_+(I<<9&4294967295|I>>>23),I=b+(_^E&(A^_))+w[7]+1735328473&4294967295,b=A+(I<<14&4294967295|I>>>18),I=E+(A^_&(b^A))+w[12]+2368359562&4294967295,E=b+(I<<20&4294967295|I>>>12),I=_+(E^b^A)+w[5]+4294588738&4294967295,_=E+(I<<4&4294967295|I>>>28),I=A+(_^E^b)+w[8]+2272392833&4294967295,A=_+(I<<11&4294967295|I>>>21),I=b+(A^_^E)+w[11]+1839030562&4294967295,b=A+(I<<16&4294967295|I>>>16),I=E+(b^A^_)+w[14]+4259657740&4294967295,E=b+(I<<23&4294967295|I>>>9),I=_+(E^b^A)+w[1]+2763975236&4294967295,_=E+(I<<4&4294967295|I>>>28),I=A+(_^E^b)+w[4]+1272893353&4294967295,A=_+(I<<11&4294967295|I>>>21),I=b+(A^_^E)+w[7]+4139469664&4294967295,b=A+(I<<16&4294967295|I>>>16),I=E+(b^A^_)+w[10]+3200236656&4294967295,E=b+(I<<23&4294967295|I>>>9),I=_+(E^b^A)+w[13]+681279174&4294967295,_=E+(I<<4&4294967295|I>>>28),I=A+(_^E^b)+w[0]+3936430074&4294967295,A=_+(I<<11&4294967295|I>>>21),I=b+(A^_^E)+w[3]+3572445317&4294967295,b=A+(I<<16&4294967295|I>>>16),I=E+(b^A^_)+w[6]+76029189&4294967295,E=b+(I<<23&4294967295|I>>>9),I=_+(E^b^A)+w[9]+3654602809&4294967295,_=E+(I<<4&4294967295|I>>>28),I=A+(_^E^b)+w[12]+3873151461&4294967295,A=_+(I<<11&4294967295|I>>>21),I=b+(A^_^E)+w[15]+530742520&4294967295,b=A+(I<<16&4294967295|I>>>16),I=E+(b^A^_)+w[2]+3299628645&4294967295,E=b+(I<<23&4294967295|I>>>9),I=_+(b^(E|~A))+w[0]+4096336452&4294967295,_=E+(I<<6&4294967295|I>>>26),I=A+(E^(_|~b))+w[7]+1126891415&4294967295,A=_+(I<<10&4294967295|I>>>22),I=b+(_^(A|~E))+w[14]+2878612391&4294967295,b=A+(I<<15&4294967295|I>>>17),I=E+(A^(b|~_))+w[5]+4237533241&4294967295,E=b+(I<<21&4294967295|I>>>11),I=_+(b^(E|~A))+w[12]+1700485571&4294967295,_=E+(I<<6&4294967295|I>>>26),I=A+(E^(_|~b))+w[3]+2399980690&4294967295,A=_+(I<<10&4294967295|I>>>22),I=b+(_^(A|~E))+w[10]+4293915773&4294967295,b=A+(I<<15&4294967295|I>>>17),I=E+(A^(b|~_))+w[1]+2240044497&4294967295,E=b+(I<<21&4294967295|I>>>11),I=_+(b^(E|~A))+w[8]+1873313359&4294967295,_=E+(I<<6&4294967295|I>>>26),I=A+(E^(_|~b))+w[15]+4264355552&4294967295,A=_+(I<<10&4294967295|I>>>22),I=b+(_^(A|~E))+w[6]+2734768916&4294967295,b=A+(I<<15&4294967295|I>>>17),I=E+(A^(b|~_))+w[13]+1309151649&4294967295,E=b+(I<<21&4294967295|I>>>11),I=_+(b^(E|~A))+w[4]+4149444226&4294967295,_=E+(I<<6&4294967295|I>>>26),I=A+(E^(_|~b))+w[11]+3174756917&4294967295,A=_+(I<<10&4294967295|I>>>22),I=b+(_^(A|~E))+w[2]+718787259&4294967295,b=A+(I<<15&4294967295|I>>>17),I=E+(A^(b|~_))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var E=_-this.blockSize,w=this.B,b=this.h,A=0;A<_;){if(b==0)for(;A<=E;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<_;)if(w[b++]=T.charCodeAt(A++),b==this.blockSize){i(this,w),b=0;break}}else for(;A<_;)if(w[b++]=T[A++],b==this.blockSize){i(this,w),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var E=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=E&255,E/=256;for(this.u(T),T=Array(16),_=E=0;4>_;++_)for(var w=0;32>w;w+=8)T[E++]=this.g[_]>>>w&255;return T};function o(T,_){var E=c;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=_(T)}function s(T,_){this.h=_;for(var E=[],w=!0,b=T.length-1;0<=b;b--){var A=T[b]|0;w&&A==_||(E[b]=A,w=!1)}this.g=E}var c={};function u(T){return-128<=T&&128>T?o(T,function(_){return new s([_|0],0>_?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return N(l(-T));for(var _=[],E=1,w=0;T>=E;w++)_[w]=T/E|0,E*=4294967296;return new s(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return N(h(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(_,8)),w=p,b=0;b<T.length;b+=8){var A=Math.min(8,T.length-b),I=parseInt(T.substring(b,b+A),_);8>A?(A=l(Math.pow(_,A)),w=w.j(A).add(l(I))):(w=w.j(E),w=w.add(l(I)))}return w}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-N(this).m();for(var T=0,_=1,E=0;E<this.g.length;E++){var w=this.i(E);T+=(0<=w?w:4294967296+w)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(R(this))return"-"+N(this).toString(T);for(var _=l(Math.pow(T,6)),E=this,w="";;){var b=le(E,_).g;E=k(E,b.j(_));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=b,D(E))return A+w;for(;6>A.length;)A="0"+A;w=A+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function R(T){return T.h==-1}t.l=function(T){return T=k(this,T),R(T)?-1:D(T)?0:1};function N(T){for(var _=T.g.length,E=[],w=0;w<_;w++)E[w]=~T.g[w];return new s(E,~T.h).add(m)}t.abs=function(){return R(this)?N(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],w=0,b=0;b<=_;b++){var A=w+(this.i(b)&65535)+(T.i(b)&65535),I=(A>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);w=I>>>16,A&=65535,I&=65535,E[b]=I<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function k(T,_){return T.add(N(_))}t.j=function(T){if(D(this)||D(T))return p;if(R(this))return R(T)?N(this).j(N(T)):N(N(this).j(T));if(R(T))return N(this.j(N(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,E=[],w=0;w<2*_;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<T.g.length;b++){var A=this.i(w)>>>16,I=this.i(w)&65535,vn=T.i(b)>>>16,cs=T.i(b)&65535;E[2*w+2*b]+=I*cs,V(E,2*w+2*b),E[2*w+2*b+1]+=A*cs,V(E,2*w+2*b+1),E[2*w+2*b+1]+=I*vn,V(E,2*w+2*b+1),E[2*w+2*b+2]+=A*vn,V(E,2*w+2*b+2)}for(w=0;w<_;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=_;w<2*_;w++)E[w]=0;return new s(E,0)};function V(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function $(T,_){this.g=T,this.h=_}function le(T,_){if(D(_))throw Error("division by zero");if(D(T))return new $(p,p);if(R(T))return _=le(N(T),_),new $(N(_.g),N(_.h));if(R(_))return _=le(T,N(_)),new $(N(_.g),_.h);if(30<T.g.length){if(R(T)||R(_))throw Error("slowDivide_ only works with positive integers.");for(var E=m,w=_;0>=w.l(T);)E=Ue(E),w=Ue(w);var b=he(E,1),A=he(w,1);for(w=he(w,2),E=he(E,2);!D(w);){var I=A.add(w);0>=I.l(T)&&(b=b.add(E),A=I),w=he(w,1),E=he(E,1)}return _=k(T,b.j(_)),new $(b,_)}for(b=p;0<=T.l(_);){for(E=Math.max(1,Math.floor(T.m()/_.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),A=l(E),I=A.j(_);R(I)||0<I.l(T);)E-=w,A=l(E),I=A.j(_);D(A)&&(A=m),b=b.add(A),T=k(T,I)}return new $(b,T)}t.A=function(T){return le(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)&T.i(w);return new s(E,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)|T.i(w);return new s(E,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)^T.i(w);return new s(E,this.h^T.h)};function Ue(T){for(var _=T.g.length+1,E=[],w=0;w<_;w++)E[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(E,T.h)}function he(T,_){var E=_>>5;_%=32;for(var w=T.g.length-E,b=[],A=0;A<w;A++)b[A]=0<_?T.i(A+E)>>>_|T.i(A+E+1)<<32-_:T.i(A+E);return new s(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sy=UC.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,xn=UC.Integer=s}).apply(typeof BC<"u"?BC:typeof self<"u"?self:typeof window<"u"?window:{});var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kn={};var ay,mj,Mo,cy,Pa,Xl,uy,ly,dy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jl=="object"&&Jl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var C=a[g];if(!(C in f))break e;f=f[C]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var f=0,g=!1,C={next:function(){if(!g&&f<a.length){var S=f++;return{value:d(S,a[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,f){return f})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),a.apply(d,C)}}return function(){return a.apply(d,arguments)}}function m(a,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function D(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,C,S){for(var x=Array(arguments.length-2),me=2;me<arguments.length;me++)x[me-2]=arguments[me];return d.prototype[C].apply(g,x)}}function R(a){let d=a.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function N(a,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=a.length||0,S=g.length||0;a.length=C+S;for(let x=0;x<S;x++)a[C+x]=g[x]}else a.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(a){return/^[\s\xa0]*$/.test(a)}function $(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function le(a){return le[" "](a),a}le[" "]=function(){};var Ue=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function he(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function T(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function _(a){let d={};for(let f in a)d[f]=a[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)a[f]=g[f];for(let S=0;S<E.length;S++)f=E[S],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function b(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function A(a){c.setTimeout(()=>{throw a},0)}function I(){var a=ph;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class vn{constructor(){this.h=this.g=null}add(d,f){let g=cs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var cs=new k(()=>new KS,a=>a.reset());class KS{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let us,ls=!1,ph=new vn,B_=()=>{let a=c.Promise.resolve(void 0);us=()=>{a.then(QS)}};var QS=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){A(f)}var d=cs;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}ls=!1};function qn(){this.s=this.s,this.C=this.C}qn.prototype.s=!1,qn.prototype.ma=function(){this.s||(this.s=!0,this.N())},qn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Qe(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Qe.prototype.h=function(){this.defaultPrevented=!0};var YS=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function ds(a,d){if(Qe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(Ue){e:{try{le(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ZS[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ds.aa.h.call(this)}}D(ds,Qe);var ZS={2:"touch",3:"pen",4:"mouse"};ds.prototype.h=function(){ds.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var hs="closure_listenable_"+(1e6*Math.random()|0),JS=0;function XS(a,d,f,g,C){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++JS,this.da=this.fa=!1}function cc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function uc(a){this.src=a,this.g={},this.h=0}uc.prototype.add=function(a,d,f,g,C){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var x=mh(a,d,g,C);return-1<x?(d=a[x],f||(d.fa=!1)):(d=new XS(d,this.src,S,!!g,C),d.fa=f,a.push(d)),d};function gh(a,d){var f=d.type;if(f in a.g){var g=a.g[f],C=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=C)&&Array.prototype.splice.call(g,C,1),S&&(cc(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function mh(a,d,f,g){for(var C=0;C<a.length;++C){var S=a[C];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return C}return-1}var yh="closure_lm_"+(1e6*Math.random()|0),vh={};function U_(a,d,f,g,C){if(g&&g.once)return H_(a,d,f,g,C);if(Array.isArray(d)){for(var S=0;S<d.length;S++)U_(a,d[S],f,g,C);return null}return f=wh(f),a&&a[hs]?a.K(d,f,l(g)?!!g.capture:!!g,C):$_(a,d,f,!1,g,C)}function $_(a,d,f,g,C,S){if(!d)throw Error("Invalid event type");var x=l(C)?!!C.capture:!!C,me=Ih(a);if(me||(a[yh]=me=new uc(a)),f=me.add(d,f,g,x,S),f.proxy)return f;if(g=eN(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)YS||(C=x),C===void 0&&(C=!1),a.addEventListener(d.toString(),g,C);else if(a.attachEvent)a.attachEvent(z_(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function eN(){function a(f){return d.call(a.src,a.listener,f)}let d=tN;return a}function H_(a,d,f,g,C){if(Array.isArray(d)){for(var S=0;S<d.length;S++)H_(a,d[S],f,g,C);return null}return f=wh(f),a&&a[hs]?a.L(d,f,l(g)?!!g.capture:!!g,C):$_(a,d,f,!0,g,C)}function q_(a,d,f,g,C){if(Array.isArray(d))for(var S=0;S<d.length;S++)q_(a,d[S],f,g,C);else g=l(g)?!!g.capture:!!g,f=wh(f),a&&a[hs]?(a=a.i,d=String(d).toString(),d in a.g&&(S=a.g[d],f=mh(S,f,g,C),-1<f&&(cc(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete a.g[d],a.h--)))):a&&(a=Ih(a))&&(d=a.g[d.toString()],a=-1,d&&(a=mh(d,f,g,C)),(f=-1<a?d[a]:null)&&_h(f))}function _h(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[hs])gh(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(z_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Ih(d))?(gh(f,a),f.h==0&&(f.src=null,d[yh]=null)):cc(a)}}}function z_(a){return a in vh?vh[a]:vh[a]="on"+a}function tN(a,d){if(a.da)a=!0;else{d=new ds(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&_h(a),a=f.call(g,d)}return a}function Ih(a){return a=a[yh],a instanceof uc?a:null}var Eh="__closure_events_fn_"+(1e9*Math.random()>>>0);function wh(a){return typeof a=="function"?a:(a[Eh]||(a[Eh]=function(d){return a.handleEvent(d)}),a[Eh])}function Ye(){qn.call(this),this.i=new uc(this),this.M=this,this.F=null}D(Ye,qn),Ye.prototype[hs]=!0,Ye.prototype.removeEventListener=function(a,d,f,g){q_(this,a,d,f,g)};function ot(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new Qe(d,a);else if(d instanceof Qe)d.target=d.target||a;else{var C=d;d=new Qe(g,a),w(d,C)}if(C=!0,f)for(var S=f.length-1;0<=S;S--){var x=d.g=f[S];C=lc(x,g,!0,d)&&C}if(x=d.g=a,C=lc(x,g,!0,d)&&C,C=lc(x,g,!1,d)&&C,f)for(S=0;S<f.length;S++)x=d.g=f[S],C=lc(x,g,!1,d)&&C}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)cc(f[g]);delete a.g[d],a.h--}}this.F=null},Ye.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},Ye.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function lc(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,S=0;S<d.length;++S){var x=d[S];if(x&&!x.da&&x.capture==f){var me=x.listener,ze=x.ha||x.src;x.fa&&gh(a.i,x),C=me.call(ze,g)!==!1&&C}}return C&&!g.defaultPrevented}function G_(a,d,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function W_(a){a.g=G_(()=>{a.g=null,a.i&&(a.i=!1,W_(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class nN extends qn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:W_(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fs(a){qn.call(this),this.h=a,this.g={}}D(fs,qn);var K_=[];function Q_(a){he(a.g,function(d,f){this.g.hasOwnProperty(f)&&_h(d)},a),a.g={}}fs.prototype.N=function(){fs.aa.N.call(this),Q_(this)},fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dh=c.JSON.stringify,rN=c.JSON.parse,iN=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Th(){}Th.prototype.h=null;function Y_(a){return a.h||(a.h=a.i())}function Z_(){}var ps={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bh(){Qe.call(this,"d")}D(bh,Qe);function Ch(){Qe.call(this,"c")}D(Ch,Qe);var Tr={},J_=null;function dc(){return J_=J_||new Ye}Tr.La="serverreachability";function X_(a){Qe.call(this,Tr.La,a)}D(X_,Qe);function gs(a){let d=dc();ot(d,new X_(d))}Tr.STAT_EVENT="statevent";function eI(a,d){Qe.call(this,Tr.STAT_EVENT,a),this.stat=d}D(eI,Qe);function st(a){let d=dc();ot(d,new eI(d,a))}Tr.Ma="timingevent";function tI(a,d){Qe.call(this,Tr.Ma,a),this.size=d}D(tI,Qe);function ms(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function ys(){this.g=!0}ys.prototype.xa=function(){this.g=!1};function oN(a,d,f,g,C,S){a.info(function(){if(a.g)if(S)for(var x="",me=S.split("&"),ze=0;ze<me.length;ze++){var ue=me[ze].split("=");if(1<ue.length){var Ze=ue[0];ue=ue[1];var Je=Ze.split("_");x=2<=Je.length&&Je[1]=="type"?x+(Ze+"="+ue+"&"):x+(Ze+"=redacted&")}}else x=null;else x=S;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+x})}function sN(a,d,f,g,C,S,x){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+S+" "+x})}function Ti(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+cN(a,f)+(g?" "+g:"")})}function aN(a,d){a.info(function(){return"TIMEOUT: "+d})}ys.prototype.info=function(){};function cN(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var S=C[0];if(S!="noop"&&S!="stop"&&S!="close")for(var x=1;x<C.length;x++)C[x]=""}}}}return Dh(f)}catch{return d}}var hc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ah;function fc(){}D(fc,Th),fc.prototype.g=function(){return new XMLHttpRequest},fc.prototype.i=function(){return{}},Ah=new fc;function zn(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rI}function rI(){this.i=null,this.g="",this.h=!1}var iI={},Sh={};function Nh(a,d,f){a.L=1,a.v=yc(_n(d)),a.m=f,a.P=!0,oI(a,null)}function oI(a,d){a.F=Date.now(),pc(a),a.A=_n(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),_I(f.i,"t",g),a.C=0,f=a.j.J,a.h=new rI,a.g=VI(a.j,f?d:null,!a.m),0<a.O&&(a.M=new nN(m(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var C="readystatechange";Array.isArray(C)||(C&&(K_[0]=C.toString()),C=K_);for(var S=0;S<C.length;S++){var x=U_(f,C[S],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),gs(),oN(a.i,a.u,a.A,a.l,a.R,a.m)}zn.prototype.ca=function(a){a=a.target;let d=this.M;d&&In(a)==3?d.j():this.Y(a)},zn.prototype.Y=function(a){try{if(a==this.g)e:{let Je=In(this.g);var d=this.g.Ba();let Ai=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||CI(this.g)))){this.J||Je!=4||d==7||(d==8||0>=Ai?gs(3):gs(2)),Rh(this);var f=this.g.Z();this.X=f;t:if(sI(this)){var g=CI(this.g);a="";var C=g.length,S=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){br(this),vs(this);var x="";break t}this.h.i=new c.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(S&&d==C-1)});g.length=0,this.h.g+=a,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=f==200,sN(this.i,this.u,this.A,this.l,this.R,Je,f),this.o){if(this.T&&!this.K){t:{if(this.g){var me,ze=this.g;if((me=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(me)){var ue=me;break t}}ue=null}if(f=ue)Ti(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mh(this,f);else{this.o=!1,this.s=3,st(12),br(this),vs(this);break e}}if(this.P){f=!0;let Vt;for(;!this.J&&this.C<x.length;)if(Vt=uN(this,x),Vt==Sh){Je==4&&(this.s=4,st(14),f=!1),Ti(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==iI){this.s=4,st(15),Ti(this.i,this.l,x,"[Invalid Chunk]"),f=!1;break}else Ti(this.i,this.l,Vt,null),Mh(this,Vt);if(sI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||x.length!=0||this.h.h||(this.s=1,st(16),f=!1),this.o=this.o&&f,!f)Ti(this.i,this.l,x,"[Invalid Chunked Response]"),br(this),vs(this);else if(0<x.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Vh(Ze),Ze.M=!0,st(11))}}else Ti(this.i,this.l,x,null),Mh(this,x);Je==4&&br(this),this.o&&!this.J&&(Je==4?xI(this.j,this):(this.o=!1,pc(this)))}else CN(this.g),f==400&&0<x.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),br(this),vs(this)}}}catch{}finally{}};function sI(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function uN(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?Sh:(f=Number(d.substring(f,g)),isNaN(f)?iI:(g+=1,g+f>d.length?Sh:(d=d.slice(g,g+f),a.C=g+f,d)))}zn.prototype.cancel=function(){this.J=!0,br(this)};function pc(a){a.S=Date.now()+a.I,aI(a,a.I)}function aI(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ms(m(a.ba,a),d)}function Rh(a){a.B&&(c.clearTimeout(a.B),a.B=null)}zn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(aN(this.i,this.A),this.L!=2&&(gs(),st(17)),br(this),this.s=2,vs(this)):aI(this,this.S-a)};function vs(a){a.j.G==0||a.J||xI(a.j,a)}function br(a){Rh(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Q_(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Mh(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Ph(f.h,a))){if(!a.K&&Ph(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)wc(f),Ic(f);else break e;Fh(f),st(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ms(m(f.Za,f),6e3));if(1>=lI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ar(f,11)}else if((a.K||f.g==a)&&wc(f),!V(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let ue=C[d];if(f.T=ue[0],ue=ue[1],f.G==2)if(ue[0]=="c"){f.K=ue[1],f.ia=ue[2];let Ze=ue[3];Ze!=null&&(f.la=Ze,f.j.info("VER="+f.la));let Je=ue[4];Je!=null&&(f.Aa=Je,f.j.info("SVER="+f.Aa));let Ai=ue[5];Ai!=null&&typeof Ai=="number"&&0<Ai&&(g=1.5*Ai,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Vt=a.g;if(Vt){let Tc=Vt.g?Vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tc){var S=g.h;S.g||Tc.indexOf("spdy")==-1&&Tc.indexOf("quic")==-1&&Tc.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(xh(S,S.h),S.h=null))}if(g.D){let Lh=Vt.g?Vt.g.getResponseHeader("X-HTTP-Session-Id"):null;Lh&&(g.ya=Lh,_e(g.I,g.D,Lh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var x=a;if(g.qa=FI(g,g.J?g.ia:null,g.W),x.K){dI(g.h,x);var me=x,ze=g.L;ze&&(me.I=ze),me.B&&(Rh(me),pc(me)),g.g=x}else MI(g);0<f.i.length&&Ec(f)}else ue[0]!="stop"&&ue[0]!="close"||Ar(f,7);else f.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Ar(f,7):Oh(f):ue[0]!="noop"&&f.l&&f.l.ta(ue),f.v=0)}}gs(4)}catch{}}var lN=class{constructor(a,d){this.g=a,this.map=d}};function cI(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uI(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function lI(a){return a.h?1:a.g?a.g.size:0}function Ph(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function xh(a,d){a.g?a.g.add(d):a.h=d}function dI(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}cI.prototype.cancel=function(){if(this.i=hI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function hI(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return R(a.i)}function dN(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function hN(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let g in a)d[f++]=g;return d}}}function fI(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=hN(a),g=dN(a),C=g.length,S=0;S<C;S++)d.call(void 0,g[S],f&&f[S],a)}var pI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fN(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),C=null;if(0<=g){var S=a[f].substring(0,g);C=a[f].substring(g+1)}else S=a[f];d(S,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Cr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Cr){this.h=a.h,gc(this,a.j),this.o=a.o,this.g=a.g,mc(this,a.s),this.l=a.l;var d=a.i,f=new Es;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),gI(this,f),this.m=a.m}else a&&(d=String(a).match(pI))?(this.h=!1,gc(this,d[1]||"",!0),this.o=_s(d[2]||""),this.g=_s(d[3]||"",!0),mc(this,d[4]),this.l=_s(d[5]||"",!0),gI(this,d[6]||"",!0),this.m=_s(d[7]||"")):(this.h=!1,this.i=new Es(null,this.h))}Cr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Is(d,mI,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Is(d,mI,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Is(f,f.charAt(0)=="/"?mN:gN,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Is(f,vN)),a.join("")};function _n(a){return new Cr(a)}function gc(a,d,f){a.j=f?_s(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function mc(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function gI(a,d,f){d instanceof Es?(a.i=d,_N(a.i,a.h)):(f||(d=Is(d,yN)),a.i=new Es(d,a.h))}function _e(a,d,f){a.i.set(d,f)}function yc(a){return _e(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function _s(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Is(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,pN),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function pN(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var mI=/[#\/\?@]/g,gN=/[#\?:]/g,mN=/[#\?]/g,yN=/[#\?@]/g,vN=/#/g;function Es(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Gn(a){a.g||(a.g=new Map,a.h=0,a.i&&fN(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Es.prototype,t.add=function(a,d){Gn(this),this.i=null,a=bi(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function yI(a,d){Gn(a),d=bi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function vI(a,d){return Gn(a),d=bi(a,d),a.g.has(d)}t.forEach=function(a,d){Gn(this),this.g.forEach(function(f,g){f.forEach(function(C){a.call(d,C,g,this)},this)},this)},t.na=function(){Gn(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=a[g];for(let S=0;S<C.length;S++)f.push(d[g])}return f},t.V=function(a){Gn(this);let d=[];if(typeof a=="string")vI(this,a)&&(d=d.concat(this.g.get(bi(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Gn(this),this.i=null,a=bi(this,a),vI(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function _I(a,d,f){yI(a,d),0<f.length&&(a.i=null,a.g.set(bi(a,d),R(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),x=this.V(g);for(g=0;g<x.length;g++){var C=S;x[g]!==""&&(C+="="+encodeURIComponent(String(x[g]))),a.push(C)}}return this.i=a.join("&")};function bi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function _N(a,d){d&&!a.j&&(Gn(a),a.i=null,a.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(yI(this,g),_I(this,C,f))},a)),a.j=d}function IN(a,d){let f=new ys;if(c.Image){let g=new Image;g.onload=y(Wn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Wn,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Wn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Wn,f,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function EN(a,d){let f=new ys,g=new AbortController,C=setTimeout(()=>{g.abort(),Wn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(S=>{clearTimeout(C),S.ok?Wn(f,"TestPingServer: ok",!0,d):Wn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Wn(f,"TestPingServer: error",!1,d)})}function Wn(a,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function wN(){this.g=new iN}function DN(a,d,f){let g=f||"";try{fI(a,function(C,S){let x=C;l(C)&&(x=Dh(C)),d.push(g+S+"="+encodeURIComponent(x))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function ws(a){this.l=a.Ub||null,this.j=a.eb||!1}D(ws,Th),ws.prototype.g=function(){return new vc(this.l,this.j)},ws.prototype.i=function(a){return function(){return a}}({});function vc(a,d){Ye.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(vc,Ye),t=vc.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ts(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ts(this)),this.g&&(this.readyState=3,Ts(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;II(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function II(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ds(this):Ts(this),this.readyState==3&&II(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ds(this))},t.Qa=function(a){this.g&&(this.response=a,Ds(this))},t.ga=function(){this.g&&Ds(this)};function Ds(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ts(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Ts(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(vc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function EI(a){let d="";return he(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function kh(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=EI(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):_e(a,d,f))}function be(a){Ye.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(be,Ye);var TN=/^https?$/i,bN=["POST","PUT"];t=be.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ah.g(),this.v=this.o?Y_(this.o):Y_(Ah),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){wI(this,S);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),C=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(bN,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,x]of f)this.g.setRequestHeader(S,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bI(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){wI(this,S)}};function wI(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,DI(a),_c(a)}function DI(a){a.A||(a.A=!0,ot(a,"complete"),ot(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ot(this,"complete"),ot(this,"abort"),_c(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_c(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?TI(this):this.bb())},t.bb=function(){TI(this)};function TI(a){if(a.h&&typeof s<"u"&&(!a.v[1]||In(a)!=4||a.Z()!=2)){if(a.u&&In(a)==4)G_(a.Ea,0,a);else if(ot(a,"readystatechange"),In(a)==4){a.h=!1;try{let x=a.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=x===0){var C=String(a.D).match(pI)[1]||null;!C&&c.self&&c.self.location&&(C=c.self.location.protocol.slice(0,-1)),g=!TN.test(C?C.toLowerCase():"")}f=g}if(f)ot(a,"complete"),ot(a,"success");else{a.m=6;try{var S=2<In(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",DI(a)}}finally{_c(a)}}}}function _c(a,d){if(a.g){bI(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ot(a,"ready");try{f.onreadystatechange=g}catch{}}}function bI(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function In(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),rN(d)}};function CI(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function CN(a){let d={};a=(a.g&&2<=In(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(V(a[g]))continue;var f=b(a[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[C]||[];d[C]=S,S.push(f)}T(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function AI(a){this.Aa=0,this.i=[],this.j=new ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bs("baseRetryDelayMs",5e3,a),this.cb=bs("retryDelaySeedMs",1e4,a),this.Wa=bs("forwardChannelMaxRetries",2,a),this.wa=bs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new cI(a&&a.concurrentRequestLimit),this.Da=new wN,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=AI.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){st(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=FI(this,null,this.W),Ec(this)};function Oh(a){if(SI(a),a.G==3){var d=a.U++,f=_n(a.I);if(_e(f,"SID",a.K),_e(f,"RID",d),_e(f,"TYPE","terminate"),Cs(a,f),d=new zn(a,a.j,d),d.L=2,d.v=yc(_n(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=VI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),pc(d)}OI(a)}function Ic(a){a.g&&(Vh(a),a.g.cancel(),a.g=null)}function SI(a){Ic(a),a.u&&(c.clearTimeout(a.u),a.u=null),wc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Ec(a){if(!uI(a.h)&&!a.s){a.s=!0;var d=a.Ga;us||B_(),ls||(us(),ls=!0),ph.add(d,a),a.B=0}}function AN(a,d){return lI(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ms(m(a.Ga,a,d),kI(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let C=new zn(this,this.j,a),S=this.o;if(this.S&&(S?(S=_(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(C.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=RI(this,C,d),f=_n(this.I),_e(f,"RID",a),_e(f,"CVER",22),this.D&&_e(f,"X-HTTP-Session-Id",this.D),Cs(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(EI(S)))+"&"+d:this.m&&kh(f,this.m,S)),xh(this.h,C),this.Ua&&_e(f,"TYPE","init"),this.P?(_e(f,"$req",d),_e(f,"SID","null"),C.T=!0,Nh(C,f,null)):Nh(C,f,d),this.G=2}}else this.G==3&&(a?NI(this,a):this.i.length==0||uI(this.h)||NI(this))};function NI(a,d){var f;d?f=d.l:f=a.U++;let g=_n(a.I);_e(g,"SID",a.K),_e(g,"RID",f),_e(g,"AID",a.T),Cs(a,g),a.m&&a.o&&kh(g,a.m,a.o),f=new zn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=RI(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),xh(a.h,f),Nh(f,g,d)}function Cs(a,d){a.H&&he(a.H,function(f,g){_e(d,g,f)}),a.l&&fI({},function(f,g){_e(d,g,f)})}function RI(a,d,f){f=Math.min(a.i.length,f);var g=a.l?m(a.l.Na,a.l,a):null;e:{var C=a.i;let S=-1;for(;;){let x=["count="+f];S==-1?0<f?(S=C[0].g,x.push("ofs="+S)):S=0:x.push("ofs="+S);let me=!0;for(let ze=0;ze<f;ze++){let ue=C[ze].g,Ze=C[ze].map;if(ue-=S,0>ue)S=Math.max(0,C[ze].g-100),me=!1;else try{DN(Ze,x,"req"+ue+"_")}catch{g&&g(Ze)}}if(me){g=x.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function MI(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;us||B_(),ls||(us(),ls=!0),ph.add(d,a),a.v=0}}function Fh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ms(m(a.Fa,a),kI(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,PI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ms(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),Ic(this),PI(this))};function Vh(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function PI(a){a.g=new zn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=_n(a.qa);_e(d,"RID","rpc"),_e(d,"SID",a.K),_e(d,"AID",a.T),_e(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&_e(d,"TO",a.ja),_e(d,"TYPE","xmlhttp"),Cs(a,d),a.m&&a.o&&kh(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=yc(_n(d)),f.m=null,f.P=!0,oI(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Ic(this),Fh(this),st(19))};function wc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function xI(a,d){var f=null;if(a.g==d){wc(a),Vh(a),a.g=null;var g=2}else if(Ph(a.h,d))f=d.D,dI(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=a.B;g=dc(),ot(g,new tI(g,f)),Ec(a)}else MI(a);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&AN(a,d)||g==2&&Fh(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),C){case 1:Ar(a,5);break;case 4:Ar(a,10);break;case 3:Ar(a,6);break;default:Ar(a,2)}}}function kI(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Ar(a,d){if(a.j.info("Error code "+d),d==2){var f=m(a.fb,a),g=a.Xa;let C=!g;g=new Cr(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||gc(g,"https"),yc(g),C?IN(g.toString(),f):EN(g.toString(),f)}else st(2);a.G=0,a.l&&a.l.sa(d),OI(a),SI(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function OI(a){if(a.G=0,a.ka=[],a.l){let d=hI(a.h);(d.length!=0||a.i.length!=0)&&(N(a.ka,d),N(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function FI(a,d,f){var g=f instanceof Cr?_n(f):new Cr(f);if(g.g!="")d&&(g.g=d+"."+g.g),mc(g,g.s);else{var C=c.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var S=new Cr(null);g&&gc(S,g),d&&(S.g=d),C&&mc(S,C),f&&(S.l=f),g=S}return f=a.D,d=a.ya,f&&d&&_e(g,f,d),_e(g,"VER",a.la),Cs(a,g),g}function VI(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new be(new ws({eb:f})):new be(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function LI(){}t=LI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Dc(){}Dc.prototype.g=function(a,d){return new yt(a,d)};function yt(a,d){Ye.call(this),this.g=new AI(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!V(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Ci(this)}D(yt,Ye),yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yt.prototype.close=function(){Oh(this.g)},yt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Dh(a),a=f);d.i.push(new lN(d.Ya++,a)),d.G==3&&Ec(d)},yt.prototype.N=function(){this.g.l=null,delete this.j,Oh(this.g),delete this.g,yt.aa.N.call(this)};function jI(a){bh.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}D(jI,bh);function BI(){Ch.call(this),this.status=1}D(BI,Ch);function Ci(a){this.g=a}D(Ci,LI),Ci.prototype.ua=function(){ot(this.g,"a")},Ci.prototype.ta=function(a){ot(this.g,new jI(a))},Ci.prototype.sa=function(a){ot(this.g,new BI)},Ci.prototype.ra=function(){ot(this.g,"b")},Dc.prototype.createWebChannel=Dc.prototype.g,yt.prototype.send=yt.prototype.o,yt.prototype.open=yt.prototype.m,yt.prototype.close=yt.prototype.close,dy=kn.createWebChannelTransport=function(){return new Dc},ly=kn.getStatEventTarget=function(){return dc()},uy=kn.Event=Tr,Xl=kn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hc.NO_ERROR=0,hc.TIMEOUT=8,hc.HTTP_ERROR=6,Pa=kn.ErrorCode=hc,nI.COMPLETE="complete",cy=kn.EventType=nI,Z_.EventType=ps,ps.OPEN="a",ps.CLOSE="b",ps.ERROR="c",ps.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,Mo=kn.WebChannel=Z_,mj=kn.FetchXmlHttpFactory=ws,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,ay=kn.XhrIo=be}).apply(typeof Jl<"u"?Jl:typeof self<"u"?self:typeof window<"u"?window:{});var $C="@firebase/firestore",HC="4.7.15";var He=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");var es="11.8.0";var gi=new ln("@firebase/firestore");function Po(){return gi.logLevel}function O(t,...e){if(gi.logLevel<=oe.DEBUG){let n=e.map(r_);gi.debug(`Firestore (${es}): ${t}`,...n)}}function Ln(t,...e){if(gi.logLevel<=oe.ERROR){let n=e.map(r_);gi.error(`Firestore (${es}): ${t}`,...n)}}function jo(t,...e){if(gi.logLevel<=oe.WARN){let n=e.map(r_);gi.warn(`Firestore (${es}): ${t}`,...n)}}function r_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function B(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,F0(t,r,n)}function F0(t,e,n){let r=`FIRESTORE (${es}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ln(r),new Error(r)}function de(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||F0(e,i,r)}function W(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends Tt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var On=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var sd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},my=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(He.UNAUTHENTICATED))}shutdown(){}},yy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},vy=class{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new On;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new On,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new On)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new sd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new He(e)}},_y=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Iy=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new _y(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ad=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ey=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ut(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ad(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ad(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function yj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function V0(){return new TextEncoder}var cd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=yj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function te(t,e){return t<e?-1:t>e?1:0}function wy(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return te(r,i);{let o=V0(),s=vj(o.encode(qC(t,n)),o.encode(qC(e,n)));return s!==0?s:te(r,i)}}n+=r>65535?2:1}return te(t.length,e.length)}function qC(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function vj(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return te(t[n],e[n]);return te(t.length,e.length)}function Bo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var zC=-62135596800,GC=1e6,Ke=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*GC);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<zC)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GC}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-zC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Ke(0,0))}static max(){return new t(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var WC="__name__",ud=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&B(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return te(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):wy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xn.fromString(e.substring(4,e.length-2))}},Te=class t extends ud{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},_j=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ct=class t extends ud{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return _j.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===WC}static keyField(){return new t([WC])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new F(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new F(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var j=class t{constructor(e){this.path=e}static fromPath(e){return new t(Te.fromString(e))}static fromName(e){return new t(Te.fromString(e).popFirst(5))}static empty(){return new t(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Te(e.slice()))}};var La=-1,Dy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Dy.UNKNOWN_ID=-1;function Ij(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new mi(i,j.empty(),e)}function Ej(t){return new mi(t.readTime,t.key,La)}var mi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Y.min(),j.empty(),La)}static max(){return new t(Y.max(),j.empty(),La)}};function wj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=j.comparator(t.documentKey,e.documentKey),n!==0?n:te(t.largestBatchId,e.largestBatchId))}var Dj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ty=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ts(t){return v(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==Dj)throw t;O("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function Tj(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ns(t){return t.name==="IndexedDbTransactionError"}var i_=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ce&&this.ce(n),n}}t.le=-1;return t})(),o_=-1;function Bd(t){return t==null}function ja(t){return t===0&&1/t==-1/0}function bj(t){return typeof t=="number"&&Number.isInteger(t)&&!ja(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var L0="";function Cj(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=KC(e)),e=Aj(t.get(n),e);return KC(e)}function Aj(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case L0:n+="";break;default:n+=o}}return n}function KC(t){return t+L0+""}var Sj="remoteDocuments",j0="owner";var B0="mutationQueues";var U0="mutations";var $0="documentMutations",Nj="remoteDocumentsV14";var H0="remoteDocumentGlobal";var q0="targets";var z0="targetDocuments";var G0="targetGlobal",W0="collectionParents";var K0="clientMetadata";var Q0="bundles";var Y0="namedQueries";var Rj="indexConfiguration";var Mj="indexState";var Pj="indexEntries";var Z0="documentOverlays";var xj="globals";var kj=[B0,U0,$0,Sj,q0,j0,G0,z0,K0,H0,W0,Q0,Y0],l7=[...kj,Z0],Oj=[B0,U0,$0,Nj,q0,j0,G0,z0,K0,H0,W0,Q0,Y0,Z0],Fj=Oj,Vj=[...Fj,Rj,Mj,Pj];var d7=[...Vj,xj];function QC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function J0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Me=class t{constructor(e,n){this.comparator=e,this.root=n||fn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fo(this.root,e,this.comparator,!0)}},Fo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw B(43730,{key:this.key,value:this.value});if(this.right.isRed())throw B(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw B(27949);return e+(this.isRed()?0:1)}};fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw B(57766)}get value(){throw B(16141)}get color(){throw B(16727)}get left(){throw B(29726)}get right(){throw B(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qe=class t{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ld(this.data.getIterator())}getIteratorFrom(e){return new ld(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ld=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ft=class t{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new t([])}unionWith(e){let n=new qe(Ct.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var dd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var it=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dd("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};it.EMPTY_BYTE_STRING=new it("");var Lj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jn(t){if(de(!!t,39018),typeof t=="string"){let e=0,n=Lj.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ee(t.seconds),nanos:Ee(t.nanos)}}function Ee(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bn(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}var X0="server_timestamp",eA="__type__",tA="__previous_value__",nA="__local_write_time__";function s_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[eA])===null||n===void 0?void 0:n.stringValue)===X0}function Ud(t){let e=t.mapValue.fields[tA];return s_(e)?Ud(e):e}function Ba(t){let e=jn(t.mapValue.fields[nA].timestampValue);return new Ke(e.seconds,e.nanos)}var by=class{constructor(e,n,r,i,o,s,c,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},hd="(default)",fd=class t{constructor(e,n){this.projectId=e,this.database=n||hd}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===hd}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var a_="__type__",rA="__max__",ed={mapValue:{fields:{__type__:{stringValue:rA}}}},c_="__vector__",Uo="value";function vr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?s_(t)?4:oA(t)?9007199254740991:iA(t)?10:11:B(28295,{value:t})}function mn(t,e){if(t===e)return!0;let n=vr(t);if(n!==vr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ba(t).isEqual(Ba(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=jn(i.timestampValue),c=jn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Bn(i.bytesValue).isEqual(Bn(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ee(i.geoPointValue.latitude)===Ee(o.geoPointValue.latitude)&&Ee(i.geoPointValue.longitude)===Ee(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ee(i.integerValue)===Ee(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ee(i.doubleValue),c=Ee(o.doubleValue);return s===c?ja(s)===ja(c):isNaN(s)&&isNaN(c)}return!1}(t,e);case 9:return Bo(t.arrayValue.values||[],e.arrayValue.values||[],mn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(QC(s)!==QC(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!mn(s[u],c[u])))return!1;return!0}(t,e);default:return B(52216,{left:t})}}function Ua(t,e){return(t.values||[]).find(n=>mn(n,e))!==void 0}function $o(t,e){if(t===e)return 0;let n=vr(t),r=vr(e);if(n!==r)return te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return te(t.booleanValue,e.booleanValue);case 2:return function(o,s){let c=Ee(o.integerValue||o.doubleValue),u=Ee(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return YC(t.timestampValue,e.timestampValue);case 4:return YC(Ba(t),Ba(e));case 5:return wy(t.stringValue,e.stringValue);case 6:return function(o,s){let c=Bn(o),u=Bn(s);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=te(c[l],u[l]);if(h!==0)return h}return te(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let c=te(Ee(o.latitude),Ee(s.latitude));return c!==0?c:te(Ee(o.longitude),Ee(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ZC(t.arrayValue,e.arrayValue);case 10:return function(o,s){var c,u,l,h;let p=o.fields||{},m=s.fields||{},y=(c=p[Uo])===null||c===void 0?void 0:c.arrayValue,D=(u=m[Uo])===null||u===void 0?void 0:u.arrayValue,R=te(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:ZC(y,D)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===ed.mapValue&&s===ed.mapValue)return 0;if(o===ed.mapValue)return 1;if(s===ed.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=wy(u[p],h[p]);if(m!==0)return m;let y=$o(c[u[p]],l[h[p]]);if(y!==0)return y}return te(u.length,h.length)}(t.mapValue,e.mapValue);default:throw B(23264,{Pe:n})}}function YC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return te(t,e);let n=jn(t),r=jn(e),i=te(n.seconds,r.seconds);return i!==0?i:te(n.nanos,r.nanos)}function ZC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=$o(n[i],r[i]);if(o)return o}return te(n.length,r.length)}function Ho(t){return Cy(t)}function Cy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=jn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return j.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Cy(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Cy(n.fields[s])}`;return i+"}"}(t.mapValue):B(61005,{value:t})}function rd(t){switch(vr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Ud(t);return e?16+rd(e):16;case 5:return 2*t.stringValue.length;case 6:return Bn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+rd(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return wr(r.fields,(o,s)=>{i+=o.length+rd(s)}),i}(t.mapValue);default:throw B(13486,{value:t})}}function JC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ay(t){return!!t&&"integerValue"in t}function u_(t){return!!t&&"arrayValue"in t}function XC(t){return!!t&&"nullValue"in t}function e0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function id(t){return!!t&&"mapValue"in t}function iA(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[a_])===null||n===void 0?void 0:n.stringValue)===c_}function ka(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return wr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ka(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ka(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===rA}var f7={mapValue:{fields:{[a_]:{stringValue:c_},[Uo]:{arrayValue:{}}}}};var bt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!id(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ka(n)}setAll(e){let n=Ct.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=ka(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());id(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];id(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){wr(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(ka(this.value))}};function sA(t){let e=[];return wr(t.fields,(n,r)=>{let i=new Ct([n]);if(id(r)){let o=sA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ft(e)}var Qt=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,Y.min(),Y.min(),Y.min(),bt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Y.min(),Y.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Y.min(),Y.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var qo=class{constructor(e,n){this.position=e,this.inclusive=n}};function t0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=j.comparator(j.fromName(s.referenceValue),n.key):r=$o(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function n0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mn(t.position[n],e.position[n]))return!1;return!0}var zo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function jj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var pd=class{},Fe=class t extends pd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Ny(e,n,r):n==="array-contains"?new Py(e,r):n==="in"?new xy(e,r):n==="not-in"?new ky(e,r):n==="array-contains-any"?new Oy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ry(e,r):new My(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($o(n,this.value)):n!==null&&vr(this.value)===vr(n)&&this.matchesComparison($o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Yt=class t extends pd{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new t(e,n)}matches(e){return aA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function aA(t){return t.op==="and"}function cA(t){return Bj(t)&&aA(t)}function Bj(t){for(let e of t.filters)if(e instanceof Yt)return!1;return!0}function Sy(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+Ho(t.value);if(cA(t))return t.filters.map(e=>Sy(e)).join(",");{let e=t.filters.map(n=>Sy(n)).join(",");return`${t.op}(${e})`}}function uA(t,e){return t instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&mn(r.value,i.value)}(t,e):t instanceof Yt?function(r,i){return i instanceof Yt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&uA(s,i.filters[c]),!0):!1}(t,e):void B(19439)}function lA(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ho(n.value)}`}(t):t instanceof Yt?function(n){return n.op.toString()+" {"+n.getFilters().map(lA).join(" ,")+"}"}(t):"Filter"}var Ny=class extends Fe{constructor(e,n,r){super(e,n,r),this.key=j.fromName(r.referenceValue)}matches(e){let n=j.comparator(e.key,this.key);return this.matchesComparison(n)}},Ry=class extends Fe{constructor(e,n){super(e,"in",n),this.keys=dA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},My=class extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=dA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function dA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>j.fromName(r.referenceValue))}var Py=class extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return u_(n)&&Ua(n.arrayValue,this.value)}},xy=class extends Fe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ua(this.value.arrayValue,n)}},ky=class extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ua(this.value.arrayValue,n)}},Oy=class extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!u_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ua(this.value.arrayValue,r))}};var Fy=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Ie=null}};function r0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Fy(t,e,n,r,i,o,s)}function l_(t){let e=W(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ho(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ho(r)).join(",")),e.Ie=n}return e.Ie}function d_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!n0(t.startAt,e.startAt)&&n0(t.endAt,e.endAt)}function Vy(t){return j.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var yi=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function Uj(t,e,n,r,i,o,s,c){return new yi(t,e,n,r,i,o,s,c)}function h_(t){return new yi(t)}function i0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hA(t){return t.collectionGroup!==null}function Oa(t){let e=W(t);if(e.Ee===null){e.Ee=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new qe(Ct.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new zo(o,r))}),n.has(Ct.keyField().canonicalString())||e.Ee.push(new zo(Ct.keyField(),r))}return e.Ee}function pn(t){let e=W(t);return e.de||(e.de=$j(e,Oa(t))),e.de}function $j(t,e){if(t.limitType==="F")return r0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new zo(i.field,o)});let n=t.endAt?new qo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qo(t.startAt.position,t.startAt.inclusive):null;return r0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ly(t,e){let n=t.filters.concat([e]);return new yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jy(t,e,n){return new yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $d(t,e){return d_(pn(t),pn(e))&&t.limitType===e.limitType}function fA(t){return`${l_(pn(t))}|lt:${t.limitType}`}function xo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>lA(i)).join(", ")}]`),Bd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ho(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ho(i)).join(",")),`Target(${r})`}(pn(t))}; limitType=${t.limitType})`}function Hd(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):j.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Oa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,c,u){let l=t0(s,c,u);return s.inclusive?l<=0:l<0}(r.startAt,Oa(r),i)||r.endAt&&!function(s,c,u){let l=t0(s,c,u);return s.inclusive?l>=0:l>0}(r.endAt,Oa(r),i))}(t,e)}function Hj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pA(t){return(e,n)=>{let r=!1;for(let i of Oa(t)){let o=qj(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function qj(t,e,n){let r=t.field.isKeyField()?j.comparator(e.key,n.key):function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?$o(u,l):B(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B(19790,{direction:t.dir})}}var Un=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wr(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return J0(this.inner)}size(){return this.innerSize}};var zj=new Me(j.comparator);function $n(){return zj}var gA=new Me(j.comparator);function xa(...t){let e=gA;for(let n of t)e=e.insert(n.key,n);return e}function mA(t){let e=gA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hi(){return Fa()}function yA(){return Fa()}function Fa(){return new Un(t=>t.toString(),(t,e)=>t.isEqual(e))}var Gj=new Me(j.comparator),Wj=new qe(j.comparator);function ae(...t){let e=Wj;for(let n of t)e=e.add(n);return e}var Kj=new qe(te);function Qj(){return Kj}function f_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ja(e)?"-0":e}}function vA(t){return{integerValue:""+t}}function Yj(t,e){return bj(e)?vA(e):f_(t,e)}var Go=class{constructor(){this._=void 0}};function Zj(t,e,n){return t instanceof Wo?function(i,o){let s={fields:{[eA]:{stringValue:X0},[nA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&s_(o)&&(o=Ud(o)),o&&(s.fields[tA]=o),{mapValue:s}}(n,e):t instanceof vi?IA(t,e):t instanceof _i?EA(t,e):function(i,o){let s=_A(i,o),c=o0(s)+o0(i.Re);return Ay(s)&&Ay(i.Re)?vA(c):f_(i.serializer,c)}(t,e)}function Jj(t,e,n){return t instanceof vi?IA(t,e):t instanceof _i?EA(t,e):n}function _A(t,e){return t instanceof Ko?function(r){return Ay(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Wo=class extends Go{},vi=class extends Go{constructor(e){super(),this.elements=e}};function IA(t,e){let n=wA(e);for(let r of t.elements)n.some(i=>mn(i,r))||n.push(r);return{arrayValue:{values:n}}}var _i=class extends Go{constructor(e){super(),this.elements=e}};function EA(t,e){let n=wA(e);for(let r of t.elements)n=n.filter(i=>!mn(i,r));return{arrayValue:{values:n}}}var Ko=class extends Go{constructor(e,n){super(),this.serializer=e,this.Re=n}};function o0(t){return Ee(t.integerValue||t.doubleValue)}function wA(t){return u_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Xj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof vi&&i instanceof vi||r instanceof _i&&i instanceof _i?Bo(r.elements,i.elements,mn):r instanceof Ko&&i instanceof Ko?mn(r.Re,i.Re):r instanceof Wo&&i instanceof Wo}(t.transform,e.transform)}var By=class{constructor(e,n){this.version=e,this.transformResults=n}},Fn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function od(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Qo=class{};function DA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $a(t.key,Fn.none()):new Ii(t.key,t.data,Fn.none());{let n=t.data,r=bt.empty(),i=new qe(Ct.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new yn(t.key,r,new Ft(i.toArray()),Fn.none())}}function eB(t,e,n){t instanceof Ii?function(i,o,s){let c=i.value.clone(),u=a0(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):t instanceof yn?function(i,o,s){if(!od(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=a0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(TA(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Va(t,e,n,r){return t instanceof Ii?function(o,s,c,u){if(!od(o.precondition,s))return c;let l=o.value.clone(),h=c0(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof yn?function(o,s,c,u){if(!od(o.precondition,s))return c;let l=c0(o.fieldTransforms,u,s),h=s.data;return h.setAll(TA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,c){return od(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(t,e,n)}function tB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=_A(r.transform,i||null);o!=null&&(n===null&&(n=bt.empty()),n.set(r.field,o))}return n||null}function s0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bo(r,i,(o,s)=>Xj(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ii=class extends Qo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},yn=class extends Qo{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function TA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function a0(t,e,n){let r=new Map;de(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,Jj(s,c,n[i]))}return r}function c0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,Zj(o,s,e))}return r}var $a=class extends Qo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Uy=class extends Qo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var $y=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&eB(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=yA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=DA(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Bo(this.mutations,e.mutations,(n,r)=>s0(n,r))&&Bo(this.baseMutations,e.baseMutations,(n,r)=>s0(n,r))}},Hy=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return Gj}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var qy=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var zy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ke,ce;function nB(t){switch(t){case M.OK:return B(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return B(15467,{code:t})}}function bA(t){if(t===void 0)return Ln("GRPC error has no .code"),M.UNKNOWN;switch(t){case ke.OK:return M.OK;case ke.CANCELLED:return M.CANCELLED;case ke.UNKNOWN:return M.UNKNOWN;case ke.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ke.INTERNAL:return M.INTERNAL;case ke.UNAVAILABLE:return M.UNAVAILABLE;case ke.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ke.NOT_FOUND:return M.NOT_FOUND;case ke.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ke.ABORTED:return M.ABORTED;case ke.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ke.DATA_LOSS:return M.DATA_LOSS;default:return B(39323,{code:t})}}(ce=ke||(ke={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";var u0=null;var rB=new xn([4294967295,4294967295],0);function l0(t){let e=V0().encode(t),n=new sy;return n.update(e),new Uint8Array(n.digest())}function d0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new xn([n,r],0),new xn([i,o],0)]}var Gy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fi(`Invalid padding: ${n}`);if(r<0)throw new fi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fi(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=xn.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(xn.fromNumber(r)));return i.compare(rB)===1&&(i=new xn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let n=l0(e),[r,i]=d0(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.Se(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.pe===0)return;let n=l0(e),[r,i]=d0(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.be(s)}}be(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},fi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var gd=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ha.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Y.min(),i,new Me(te),$n(),ae())}},Ha=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ae(),ae(),ae())}};var Vo=class{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}},md=class{constructor(e,n){this.targetId=e,this.Ce=n}},yd=class{constructor(e,n,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},vd=class{constructor(){this.Fe=0,this.Me=h0(),this.xe=it.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ae(),n=ae(),r=ae();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:B(38017,{changeType:o})}}),new Ha(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=h0()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,de(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},Wy=class{constructor(e){this.ze=e,this.je=new Map,this.He=$n(),this.Je=td(),this.Ye=td(),this.Ze=new Me(te)}Xe(e){for(let n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(let n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{let r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:B(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){let n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){let o=i.target;if(Vy(o))if(r===0){let s=new j(o.path);this.tt(n,s,Qt.newNoDocument(s,Y.min()))}else de(r===1,20013,{expectedCount:r});else{let s=this.ut(n);if(s!==r){let c=this.ct(e),u=c?this.lt(c,e,s):1;if(u!==0){this.st(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}u0?.ht(function(h,p,m,y,D){var R,N,k,V,$,le;let Ue={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},he=p.unchangedNames;return he&&(Ue.bloomFilter={applied:D===0,hashCount:(R=he?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(V=(k=(N=he?.bits)===null||N===void 0?void 0:N.bitmap)===null||k===void 0?void 0:k.length)!==null&&V!==void 0?V:0,padding:(le=($=he?.bits)===null||$===void 0?void 0:$.padding)!==null&&le!==void 0?le:0,mightContain:T=>{var _;return(_=y?.mightContain(T))!==null&&_!==void 0&&_}}),Ue}(s,e.Ce,this.ze.Pt(),c,u))}}}}ct(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=Bn(r).toUint8Array()}catch(u){if(u instanceof dd)return jo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Gy(s,i,o)}catch(u){return jo(u instanceof fi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){let r=this.ze.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.ze.Pt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,o,null),i++)}),i}It(e){let n=new Map;this.je.forEach((o,s)=>{let c=this._t(s);if(c){if(o.current&&Vy(c.target)){let u=new j(c.target.path);this.Et(u).has(s)||this.dt(s,u)||this.tt(s,u,Qt.newNoDocument(u,e))}o.Le&&(n.set(s,o.qe()),o.Qe())}});let r=ae();this.Ye.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this._t(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new gd(e,n,this.Ze,this.He,r);return this.He=$n(),this.Je=td(),this.Ye=td(),this.Ze=new Me(te),i}et(e,n){if(!this.it(e))return;let r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){let n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new vd,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new qe(te),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new qe(te),this.Je=this.Je.insert(e,n)),n}it(e){let n=this._t(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}_t(e){let n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new vd),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}};function td(){return new Me(j.comparator)}function h0(){return new Me(j.comparator)}var iB={asc:"ASCENDING",desc:"DESCENDING"},oB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sB={and:"AND",or:"OR"},Ky=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Qy(t,e){return t.useProto3Json||Bd(e)?e:{value:e}}function _d(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function aB(t,e){return _d(t,e.toTimestamp())}function gn(t){return de(!!t,49232),Y.fromTimestamp(function(n){let r=jn(n);return new Ke(r.seconds,r.nanos)}(t))}function p_(t,e){return Yy(t,e).canonicalString()}function Yy(t,e){let n=function(i){return new Te(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function AA(t){let e=Te.fromString(t);return de(PA(e),10190,{key:e.toString()}),e}function Zy(t,e){return p_(t.databaseId,e.path)}function hy(t,e){let n=AA(e);if(n.get(1)!==t.databaseId.projectId)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new j(NA(n))}function SA(t,e){return p_(t.databaseId,e)}function cB(t){let e=AA(t);return e.length===4?Te.emptyPath():NA(e)}function Jy(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NA(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function f0(t,e,n){return{name:Zy(t,e),fields:n.value.mapValue.fields}}function uB(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(de(h===void 0||typeof h=="string",58123),it.fromBase64String(h||"")):(de(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),it.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(l){let h=l.code===void 0?M.UNKNOWN:bA(l.code);return new F(h,l.message||"")}(s);n=new yd(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=hy(t,r.document.name),o=gn(r.document.updateTime),s=r.document.createTime?gn(r.document.createTime):Y.min(),c=new bt({mapValue:{fields:r.document.fields}}),u=Qt.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Vo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=hy(t,r.document),o=r.readTime?gn(r.readTime):Y.min(),s=Qt.newNoDocument(i,o),c=r.removedTargetIds||[];n=new Vo([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=hy(t,r.document),o=r.removedTargetIds||[];n=new Vo([],o,i,null)}else{if(!("filter"in e))return B(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new zy(i,o),c=r.targetId;n=new md(c,s)}}return n}function lB(t,e){let n;if(e instanceof Ii)n={update:f0(t,e.key,e.value)};else if(e instanceof $a)n={delete:Zy(t,e.key)};else if(e instanceof yn)n={update:f0(t,e.key,e.data),updateMask:_B(e.fieldMask)};else{if(!(e instanceof Uy))return B(16599,{ft:e.type});n={verify:Zy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof Wo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _i)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ko)return{fieldPath:s.field.canonicalString(),increment:c.Re};throw B(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:aB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:B(27497)}(t,e.precondition)),n}function dB(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?gn(i.updateTime):gn(o);return s.isEqual(Y.min())&&(s=gn(o)),new By(s,i.transformResults||[])}(n,e))):[]}function hB(t,e){return{documents:[SA(t,e.path)]}}function fB(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SA(t,i);let o=function(l){if(l.length!==0)return MA(Yt.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ko(m.field),direction:mB(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=Qy(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:n,parent:i}}function pB(t){let e=cB(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){de(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let m=RA(p);return m instanceof Yt&&cA(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(D){return new zo(Oo(D.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,Bd(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new qo(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new qo(y,m)}(n.endAt)),Uj(e,i,s,o,c,"F",u,l)}function gB(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Oo(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Oo(n.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Oo(n.unaryFilter.field);return Fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Oo(n.unaryFilter.field);return Fe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return B(61313);default:return B(60726)}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Oo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return B(58110);default:return B(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yt.create(n.compositeFilter.filters.map(r=>RA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B(1026)}}(n.compositeFilter.op))}(t):B(30097,{filter:t})}function mB(t){return iB[t]}function yB(t){return oB[t]}function vB(t){return sB[t]}function ko(t){return{fieldPath:t.canonicalString()}}function Oo(t){return Ct.fromServerFormat(t.fieldPath)}function MA(t){return t instanceof Fe?function(n){if(n.op==="=="){if(e0(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NAN"}};if(XC(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(e0(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NAN"}};if(XC(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(n.field),op:yB(n.op),value:n.value}}}(t):t instanceof Yt?function(n){let r=n.getFilters().map(i=>MA(i));return r.length===1?r[0]:{compositeFilter:{op:vB(n.op),filters:r}}}(t):B(54877,{filter:t})}function _B(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var qa=class t{constructor(e,n,r,i,o=Y.min(),s=Y.min(),c=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Xy=class{constructor(e){this.wt=e}};function IB(t){let e=pB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jy(e,e.limit,"L"):e}var Id=class{constructor(){}vt(e,n){this.Ct(e,n),n.Ft()}Ct(e,n){if("nullValue"in e)this.Mt(n,5);else if("booleanValue"in e)this.Mt(n,10),n.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(n,15),n.xt(Ee(e.integerValue));else if("doubleValue"in e){let r=Ee(e.doubleValue);isNaN(r)?this.Mt(n,13):(this.Mt(n,15),ja(r)?n.xt(0):n.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(n,20),typeof r=="string"&&(r=jn(r)),n.Ot(`${r.seconds||""}`),n.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,n),this.Bt(n);else if("bytesValue"in e)this.Mt(n,30),n.Lt(Bn(e.bytesValue)),this.Bt(n);else if("referenceValue"in e)this.kt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(n,45),n.xt(r.latitude||0),n.xt(r.longitude||0)}else"mapValue"in e?oA(e)?this.Mt(n,Number.MAX_SAFE_INTEGER):iA(e)?this.qt(e.mapValue,n):(this.Qt(e.mapValue,n),this.Bt(n)):"arrayValue"in e?(this.$t(e.arrayValue,n),this.Bt(n)):B(19022,{Ut:e})}Nt(e,n){this.Mt(n,25),this.Kt(e,n)}Kt(e,n){n.Ot(e)}Qt(e,n){let r=e.fields||{};this.Mt(n,55);for(let i of Object.keys(r))this.Nt(i,n),this.Ct(r[i],n)}qt(e,n){var r,i;let o=e.fields||{};this.Mt(n,53);let s=Uo,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(n,15),n.xt(Ee(c)),this.Nt(s,n),this.Ct(o[s],n)}$t(e,n){let r=e.values||[];this.Mt(n,50);for(let i of r)this.Ct(i,n)}kt(e,n){this.Mt(n,37),j.fromName(e).path.forEach(r=>{this.Mt(n,60),this.Kt(r,n)})}Mt(e,n){e.xt(n)}Bt(e){e.xt(2)}};Id.Wt=new Id;var ev=class{constructor(){this.Cn=new tv}addToCollectionParentIndex(e,n){return this.Cn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(mi.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},tv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qe(Te.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(Te.comparator)).toArray()}};var p7=new Uint8Array(0);var p0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xA=41943040,Ot=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Ot.DEFAULT_COLLECTION_PERCENTILE=10,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ot.DEFAULT=new Ot(xA,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ot.DISABLED=new Ot(-1,0,0);var za=class t{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new t(0)}static lr(){return new t(-1)}};var g0="LruGarbageCollector",EB=1048576;function m0([t,e],[n,r]){let i=te(t,n);return i===0?te(e,r):i}var nv=class{constructor(e){this.Er=e,this.buffer=new qe(m0),this.dr=0}Ar(){return++this.dr}Rr(e){let n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();m0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},rv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){O(g0,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ns(n)?O(g0,"Ignoring IndexedDB error during garbage collection: ",n):yield ts(n)}yield this.mr(3e5)}))}},iv=class{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(i_.le);let r=new nv(n);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(p0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),p0):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,i,o,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Po()<=oe.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function wB(t,e){return new iv(t,e)}var ov=class{constructor(){this.changes=new Un(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var sv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var av=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Va(r.mutation,i,Ft.empty(),Ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){let i=hi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=xa();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=$n(),s=Fa(),c=function(){return Fa()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof yn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Va(h.mutation,l,h.mutation.getFieldMask(),Ke.now())):s.set(l.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return c.set(l,new sv(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=Fa(),i=new Me((s,c)=>s-c),o=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Ft.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||ae()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=yA();h.forEach(m=>{if(!o.has(m)){let y=DA(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return j.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(hi()),c=La,u=o;return s.next(l=>P.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ae())).next(h=>({batchId:c,changes:mA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new j(n)).next(r=>{let i=xa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=xa();return this.indexManager.getCollectionParents(e,o).next(c=>P.forEach(c,u=>{let l=function(p,m){return new yi(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Qt.newInvalidDocument(h)))});let c=xa();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Va(h.mutation,l,Ft.empty(),Ke.now()),Hd(n,l)&&(c=c.insert(u,l))}),c})}};var cv=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return P.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:gn(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:IB(i.bundledQuery),readTime:gn(i.readTime)}}(n)),P.resolve()}};var uv=class{constructor(){this.overlays=new Me(j.comparator),this.Qr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=hi();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.bt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=hi(),o=n.length+1,s=new j(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Me((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=hi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=hi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return P.resolve(c)}bt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new qy(n,r));let o=this.Qr.get(n);o===void 0&&(o=ae(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}};var lv=class{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var Ga=class{constructor(){this.$r=new qe(Oe.Ur),this.Kr=new qe(Oe.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){let r=new Oe(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Oe(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){let n=new j(new Te([])),r=new Oe(n,e),i=new Oe(n,e+1),o=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let n=new j(new Te([])),r=new Oe(n,e),i=new Oe(n,e+1),o=ae();return this.Kr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Oe(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Oe=class{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return j.comparator(e.key,n.key)||te(e.Zr,n.Zr)}static Wr(e,n){return te(e.Zr,n.Zr)||j.comparator(e.key,n.key)}};var dv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new qe(Oe.Ur)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new $y(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Xr=this.Xr.add(new Oe(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ti(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?o_:this.nr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Oe(n,0),i=new Oe(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],s=>{let c=this.ei(s.Zr);o.push(c)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(te);return n.forEach(i=>{let o=new Oe(i,0),s=new Oe(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],c=>{r=r.add(c.Zr)})}),P.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;j.isDocumentKey(o)||(o=o.child(""));let s=new Oe(new j(o),0),c=new qe(te);return this.Xr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Zr)),!0)},s),P.resolve(this.ni(c))}ni(e){let n=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return P.forEach(n.mutations,i=>{let o=new Oe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){let r=new Oe(n,0),i=this.Xr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var hv=class{constructor(e){this.ii=e,this.docs=function(){return new Me(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let r=$n();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Qt.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=$n(),s=n.path,c=new j(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||wj(Ej(h),r)<=0||(i.has(h.key)||Hd(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){B(9500)}si(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fv(this)}getSize(e){return P.resolve(this.size)}},fv=class extends ov{constructor(e){super(),this.Br=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}};var pv=class{constructor(e){this.persistence=e,this.oi=new Un(n=>l_(n),d_),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this._i=0,this.ai=new Ga,this.targetCount=0,this.ui=za.cr()}forEachTarget(e,n){return this.oi.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),P.resolve()}Tr(e){this.oi.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ui=new za(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Tr(n),P.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.oi.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.oi.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.ai.Yr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.ai.containsKey(n))}};var Ed=class{constructor(e,n){this.ci={},this.overlays={},this.li=new i_(0),this.hi=!1,this.hi=!0,this.Pi=new lv,this.referenceDelegate=e(this),this.Ti=new pv(this),this.indexManager=new ev,this.remoteDocumentCache=function(i){return new hv(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Xy(n),this.Ei=new cv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new dv(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);let i=new gv(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,n){return P.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}},gv=class extends Ty{constructor(e){super(),this.currentSequenceNumber=e}},mv=class t{constructor(e){this.persistence=e,this.Vi=new Ga,this.mi=null}static fi(e){return new t(e)}get gi(){if(this.mi)return this.mi;throw B(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.gi,r=>{let i=j.fromPath(r);return this.pi(e,i).next(o=>{o||n.removeEntry(i,Y.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return P.or([()=>P.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}},wd=class t{constructor(e,n){this.persistence=e,this.yi=new Un(r=>Cj(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=wB(this,n)}static fi(e,n){return new t(e,n)}di(){}Ai(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){let n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Sr(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return P.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,n).next(c=>{c||(r++,o.removeEntry(s,Y.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),P.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rd(e.data.value)),n}Dr(e,n,r){return P.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.yi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var yv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ds=r,this.As=i}static Rs(e,n){let r=ae(),i=ae();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var vv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var _v=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return hb()?8:Tj($e())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ws(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Ss(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new vv;return this.bs(e,n,s).next(c=>{if(o.result=c,this.fs)return this.Ds(e,n,s,c.size)})}).next(()=>o.result)}Ds(e,n,r,i){return r.documentReadCount<this.gs?(Po()<=oe.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",xo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),P.resolve()):(Po()<=oe.DEBUG&&O("QueryEngine","Query:",xo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Po()<=oe.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",xo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(n))):P.resolve())}ws(e,n){if(i0(n))return P.resolve(null);let r=pn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=jy(n,null,"F"),r=pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ae(...o);return this.ys.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.vs(n,c);return this.Cs(n,l,s,u.readTime)?this.ws(e,jy(n,null,"F")):this.Fs(e,l,n,u)}))})))}Ss(e,n,r,i){return i0(n)||i.isEqual(Y.min())?P.resolve(null):this.ys.getDocuments(e,r).next(o=>{let s=this.vs(n,o);return this.Cs(n,s,r,i)?P.resolve(null):(Po()<=oe.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xo(n)),this.Fs(e,s,n,Ij(i,La)).next(c=>c))})}vs(e,n){let r=new qe(pA(e));return n.forEach((i,o)=>{Hd(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}bs(e,n,r){return Po()<=oe.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",xo(n)),this.ys.getDocumentsMatchingQuery(e,n,mi.min(),r)}Fs(e,n,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var g_="LocalStore",DB=3e8,Iv=class{constructor(e,n,r,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new Me(te),this.Os=new Un(o=>l_(o),d_),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new av(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}};function TB(t,e,n,r){return new Iv(t,e,n,r)}function kA(t,e){return v(this,null,function*(){let n=W(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=ae();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({ks:l,removedBatchIds:s,addedBatchIds:c}))})})})}function bB(t,e){let n=W(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(c,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(R=>{let N=l.docVersions.get(D);de(N!==null,48541),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ae();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function OA(t){let e=W(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function CB(t,e){let n=W(t),r=e.snapshotVersion,i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(n.Ti.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(it.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(R,N,k){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=DB?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,y,h)&&c.push(n.Ti.updateTargetData(o,y))});let u=$n(),l=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(AB(o,s,e.documentUpdates).next(h=>{u=h.qs,l=h.Qs})),!r.isEqual(Y.min())){let h=n.Ti.getLastRemoteSnapshotVersion(o).next(p=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return P.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.xs=i,o))}function AB(t,e,n){let r=ae(),i=ae();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=$n();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):O(g_,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{qs:s,Qs:i}})}function SB(t,e){let n=W(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=o_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function NB(t,e){let n=W(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.Ti.allocateTargetId(r).next(s=>(i=new qa(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}function Ev(t,e,n){return v(this,null,function*(){let r=W(t),i=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ns(s))throw s;O(g_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function y0(t,e,n){let r=W(t),i=Y.min(),o=ae();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=W(u),m=p.Os.get(h);return m!==void 0?P.resolve(p.xs.get(m)):p.Ti.getTargetData(l,h)}(r,s,pn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,n?i:Y.min(),n?o:ae())).next(c=>(RB(r,Hj(e),c),{documents:c,$s:o})))}function RB(t,e,n){let r=t.Ns.get(e)||Y.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}var Dd=class{constructor(){this.activeTargetIds=Qj()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var wv=class{constructor(){this.xo=new Dd,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Dd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Dv=class{No(e){}shutdown(){}};var v0="ConnectivityMonitor",Td=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){O(v0,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){O(v0,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var nd=null;function Tv(){return nd===null?nd=function(){return 268435456+Math.round(2147483648*Math.random())}():nd++,"0x"+nd.toString(16)}var fy="RestConnection",MB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},bv=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===hd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,n,r,i,o){let s=Tv(),c=this.jo(e,n.toUriEncodedString());O(fy,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,o);let{host:l}=new URL(c),h=ii(l);return this.Jo(e,c,u,r,h).then(p=>(O(fy,`Received RPC '${e}' ${s}: `,p),p),p=>{throw jo(fy,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Yo(e,n,r,i,o,s){return this.zo(e,n,r,i,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+es}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,n){let r=MB[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}};var Cv=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var rt="WebChannelConnection",Av=class extends bv{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=Tv();return new Promise((c,u)=>{let l=new ay;l.setWithCredentials(!0),l.listenOnce(cy.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Pa.NO_ERROR:let p=l.getResponseJson();O(rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case Pa.TIMEOUT:O(rt,`RPC '${e}' ${s} timed out`),u(new F(M.DEADLINE_EXCEEDED,"Request time out"));break;case Pa.HTTP_ERROR:let m=l.getStatus();if(O(rt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let D=y?.error;if(D&&D.status&&D.message){let R=function(k){let V=k.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(V)>=0?V:M.UNKNOWN}(D.status);u(new F(R,D.message))}else u(new F(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new F(M.UNAVAILABLE,"Connection failed."));break;default:B(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{O(rt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);O(rt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}T_(e,n,r){let i=Tv(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dy(),c=ly(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");O(rt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,y=!1,D=new Cv({Zo:N=>{y?O(rt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(O(rt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),O(rt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Xo:()=>p.close()}),R=(N,k,V)=>{N.listen(k,$=>{try{V($)}catch(le){setTimeout(()=>{throw le},0)}})};return R(p,Mo.EventType.OPEN,()=>{y||(O(rt,`RPC '${e}' stream ${i} transport opened.`),D.__())}),R(p,Mo.EventType.CLOSE,()=>{y||(y=!0,O(rt,`RPC '${e}' stream ${i} transport closed`),D.u_())}),R(p,Mo.EventType.ERROR,N=>{y||(y=!0,jo(rt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),D.u_(new F(M.UNAVAILABLE,"The operation could not be completed")))}),R(p,Mo.EventType.MESSAGE,N=>{var k;if(!y){let V=N.data[0];de(!!V,16349);let $=V,le=$?.error||((k=$[0])===null||k===void 0?void 0:k.error);if(le){O(rt,`RPC '${e}' stream ${i} received error:`,le);let Ue=le.status,he=function(E){let w=ke[E];if(w!==void 0)return bA(w)}(Ue),T=le.message;he===void 0&&(he=M.INTERNAL,T="Unknown error status: "+Ue+" with message "+le.message),y=!0,D.u_(new F(he,T)),p.close()}else O(rt,`RPC '${e}' stream ${i} received:`,V),D.c_(V)}}),R(c,uy.STAT_EVENT,N=>{N.stat===Xl.PROXY?O(rt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Xl.NOPROXY&&O(rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.a_()},0),D}};function py(){return typeof document<"u"?document:null}function qd(t){return new Ky(t,!0)}var bd=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=n,this.I_=r,this.E_=i,this.d_=o,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();let n=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}};var _0="PersistentStream",Cd=class{constructor(e,n,r,i,o,s,c,u){this.xi=e,this.y_=r,this.w_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new bd(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}stop(){return v(this,null,function*(){this.F_()&&(yield this.close(0))})}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}B_(){return v(this,null,function*(){if(this.M_())return this.close(0)})}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}close(e,n){return v(this,null,function*(){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Ln(n.toString()),Ln("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(n)})}Q_(){}auth(){this.state=1;let e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.S_===n&&this.K_(r,i)},r=>{e(()=>{let i=new F(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(i)})})}K_(e,n){let r=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.W_(i))}),this.stream.onMessage(i=>{r(()=>++this.v_==1?this.z_(i):this.onNext(i))})}x_(){this.state=5,this.C_.f_(()=>v(this,null,function*(){this.state=0,this.start()}))}W_(e){return O(_0,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(O(_0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Sv=class extends Cd{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();let n=uB(this.serializer,e),r=function(o){if(!("targetChange"in o))return Y.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?gn(s.readTime):Y.min()}(e);return this.listener.j_(n,r)}H_(e){let n={};n.database=Jy(this.serializer),n.addTarget=function(o,s){let c,u=s.target;if(c=Vy(u)?{documents:hB(o,u)}:{query:fB(o,u).gt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=CA(o,s.resumeToken);let l=Qy(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(Y.min())>0){c.readTime=_d(o,s.snapshotVersion.toTimestamp());let l=Qy(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=gB(this.serializer,e);r&&(n.labels=r),this.L_(n)}J_(e){let n={};n.database=Jy(this.serializer),n.removeTarget=e,this.L_(n)}},Nv=class extends Cd{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();let n=dB(e.writeResults,e.commitTime),r=gn(e.commitTime);return this.listener.ea(r,n)}ta(){let e={};e.database=Jy(this.serializer),this.L_(e)}Z_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>lB(this.serializer,r))};this.L_(n)}};var Rv=class{},Mv=class extends Rv{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.na=!1}ra(){if(this.na)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,Yy(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(M.UNKNOWN,o.toString())})}Yo(e,n,r,i,o){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Yo(e,Yy(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(M.UNKNOWN,s.toString())})}terminate(){this.na=!0,this.connection.terminate()}},Pv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Ln(n),this.oa=!1):O("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}};var Ei="RemoteStore",xv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=o,this.Ea.No(s=>{r.enqueueAndForget(()=>v(this,null,function*(){wi(this)&&(O(Ei,"Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=W(u);l.Ta.add(4),yield Ja(l),l.da.set("Unknown"),l.Ta.delete(4),yield zd(l)})}(this))}))}),this.da=new Pv(r,i)}};function zd(t){return v(this,null,function*(){if(wi(t))for(let e of t.Ia)yield e(!0)})}function Ja(t){return v(this,null,function*(){for(let e of t.Ia)yield e(!1)})}function FA(t,e){let n=W(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),__(n)?v_(n):rs(n).M_()&&y_(n,e))}function m_(t,e){let n=W(t),r=rs(n);n.Pa.delete(e),r.M_()&&VA(n,e),n.Pa.size===0&&(r.M_()?r.N_():wi(n)&&n.da.set("Unknown"))}function y_(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}rs(t).H_(e)}function VA(t,e){t.Aa.Ke(e),rs(t).J_(e)}function v_(t){t.Aa=new Wy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),rs(t).start(),t.da._a()}function __(t){return wi(t)&&!rs(t).F_()&&t.Pa.size>0}function wi(t){return W(t).Ta.size===0}function LA(t){t.Aa=void 0}function PB(t){return v(this,null,function*(){t.da.set("Online")})}function xB(t){return v(this,null,function*(){t.Pa.forEach((e,n)=>{y_(t,e)})})}function kB(t,e){return v(this,null,function*(){LA(t),__(t)?(t.da.ca(e),v_(t)):t.da.set("Unknown")})}function OB(t,e,n){return v(this,null,function*(){if(t.da.set("Online"),e instanceof yd&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Pa.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Pa.delete(c),i.Aa.removeTarget(c))})}(t,e)}catch(r){O(Ei,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ad(t,r)}else if(e instanceof Vo?t.Aa.Xe(e):e instanceof md?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(Y.min()))try{let r=yield OA(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let c=o.Aa.It(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Pa.get(l);h&&o.Pa.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o.Pa.get(u);if(!h)return;o.Pa.set(u,h.withResumeToken(it.EMPTY_BYTE_STRING,h.snapshotVersion)),VA(o,u);let p=new qa(h.target,u,l,h.sequenceNumber);y_(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){O(Ei,"Failed to raise snapshot:",r),yield Ad(t,r)}})}function Ad(t,e,n){return v(this,null,function*(){if(!ns(e))throw e;t.Ta.add(1),yield Ja(t),t.da.set("Offline"),n||(n=()=>OA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){O(Ei,"Retrying IndexedDB access"),yield n(),t.Ta.delete(1),yield zd(t)}))})}function jA(t,e){return e().catch(n=>Ad(t,n,e))}function Gd(t){return v(this,null,function*(){let e=W(t),n=_r(e),r=e.ha.length>0?e.ha[e.ha.length-1].batchId:o_;for(;FB(e);)try{let i=yield SB(e.localStore,r);if(i===null){e.ha.length===0&&n.N_();break}r=i.batchId,VB(e,i)}catch(i){yield Ad(e,i)}BA(e)&&UA(e)})}function FB(t){return wi(t)&&t.ha.length<10}function VB(t,e){t.ha.push(e);let n=_r(t);n.M_()&&n.Y_&&n.Z_(e.mutations)}function BA(t){return wi(t)&&!_r(t).F_()&&t.ha.length>0}function UA(t){_r(t).start()}function LB(t){return v(this,null,function*(){_r(t).ta()})}function jB(t){return v(this,null,function*(){let e=_r(t);for(let n of t.ha)e.Z_(n.mutations)})}function BB(t,e,n){return v(this,null,function*(){let r=t.ha.shift(),i=Hy.from(r,e,n);yield jA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Gd(t)})}function UB(t,e){return v(this,null,function*(){e&&_r(t).Y_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return nB(s)&&s!==M.ABORTED}(i.code)){let o=r.ha.shift();_r(r).O_(),yield jA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Gd(r)}})}(t,e)),BA(t)&&UA(t)})}function I0(t,e){return v(this,null,function*(){let n=W(t);n.asyncQueue.verifyOperationInProgress(),O(Ei,"RemoteStore received new credentials");let r=wi(n);n.Ta.add(3),yield Ja(n),r&&n.da.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),yield zd(n)})}function $B(t,e){return v(this,null,function*(){let n=W(t);e?(n.Ta.delete(2),yield zd(n)):e||(n.Ta.add(2),yield Ja(n),n.da.set("Unknown"))})}function rs(t){return t.Ra||(t.Ra=function(n,r,i){let o=W(n);return o.ra(),new Sv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:PB.bind(null,t),n_:xB.bind(null,t),i_:kB.bind(null,t),j_:OB.bind(null,t)}),t.Ia.push(e=>v(null,null,function*(){e?(t.Ra.O_(),__(t)?v_(t):t.da.set("Unknown")):(yield t.Ra.stop(),LA(t))}))),t.Ra}function _r(t){return t.Va||(t.Va=function(n,r,i){let o=W(n);return o.ra(),new Nv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:LB.bind(null,t),i_:UB.bind(null,t),X_:jB.bind(null,t),ea:BB.bind(null,t)}),t.Ia.push(e=>v(null,null,function*(){e?(t.Va.O_(),yield Gd(t)):(yield t.Va.stop(),t.ha.length>0&&(O(Ei,`Stopping write stream with ${t.ha.length} pending writes`),t.ha=[]))}))),t.Va}var kv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new On,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function I_(t,e){if(Ln("AsyncQueue",`${e}: ${t}`),ns(t))return new F(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Sd=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||j.comparator(n.key,r.key):(n,r)=>j.comparator(n.key,r.key),this.keyedMap=xa(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Nd=class{constructor(){this.ma=new Me(j.comparator)}track(e){let n=e.doc.key,r=this.ma.get(n);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(n,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(n):e.type===1&&r.type===2?this.ma=this.ma.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):B(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(n,e)}ga(){let e=[];return this.ma.inorderTraversal((n,r)=>{e.push(r)}),e}},Yo=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,Sd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Ov=class{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}},Fv=class{constructor(){this.queries=E0(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,r){let i=W(n),o=i.queries;i.queries=E0(),o.forEach((s,c)=>{for(let u of c.ya)u.onError(r)})})(this,new F(M.ABORTED,"Firestore shutting down"))}};function E0(){return new Un(t=>fA(t),$d)}function HB(t,e){return v(this,null,function*(){let n=W(t),r=3,i=e.query,o=n.queries.get(i);o?!o.wa()&&e.Sa()&&(r=2):(o=new Ov,r=e.Sa()?0:1);try{switch(r){case 0:o.pa=yield n.onListen(i,!0);break;case 1:o.pa=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let c=I_(s,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.ya.push(e),e.Da(n.onlineState),o.pa&&e.va(o.pa)&&E_(n)})}function qB(t,e){return v(this,null,function*(){let n=W(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.ya.indexOf(e);s>=0&&(o.ya.splice(s,1),o.ya.length===0?i=e.Sa()?0:1:!o.wa()&&e.Sa()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function zB(t,e){let n=W(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.ya)c.va(i)&&(r=!0);s.pa=i}}r&&E_(n)}function GB(t,e,n){let r=W(t),i=r.queries.get(e);if(i)for(let o of i.ya)o.onError(n);r.queries.delete(e)}function E_(t){t.ba.forEach(e=>{e.next()})}var Vv,w0;(w0=Vv||(Vv={})).Ca="default",w0.Cache="cache";var Lv=class{constructor(e,n,r){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;let r=n!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;let n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=Yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Vv.Cache}};var Rd=class{constructor(e){this.key=e}},Md=class{constructor(e){this.key=e}},jv=class{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=ae(),this.mutatedKeys=ae(),this.Ha=pA(e),this.Ja=new Sd(this.Ha)}get Ya(){return this.Ga}Za(e,n){let r=n?n.Xa:new Nd,i=n?n.Ja:this.Ja,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Hd(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?D!==R&&(r.track({type:3,doc:y}),N=!0):this.eu(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.Ha(y,u)>0||l&&this.Ha(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(c=!0)),N&&(y?(s=s.add(y),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ja:s,Xa:r,Cs:c,mutatedKeys:o}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;let s=e.Xa.ga();s.sort((h,p)=>function(y,D){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B(20277,{Vt:N})}};return R(y)-R(D)}(h.type,p.type)||this.Ha(h.doc,p.doc)),this.tu(r),i=i!=null&&i;let c=n&&!i?this.nu():[],u=this.ja.size===0&&this.current&&!i?1:0,l=u!==this.za;return this.za=u,s.length!==0||l?{snapshot:new Yo(this.query,e.Ja,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:c}:{ru:c}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Nd,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];let e=this.ja;this.ja=ae(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});let n=[];return e.forEach(r=>{this.ja.has(r)||n.push(new Md(r))}),this.ja.forEach(r=>{e.has(r)||n.push(new Rd(r))}),n}su(e){this.Ga=e.$s,this.ja=ae();let n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return Yo.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}},w_="SyncEngine",Bv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Uv=class{constructor(e){this.key=e,this._u=!1}},$v=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.au={},this.uu=new Un(c=>fA(c),$d),this.cu=new Map,this.lu=new Set,this.hu=new Me(j.comparator),this.Pu=new Map,this.Tu=new Ga,this.Iu={},this.Eu=new Map,this.du=za.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}};function WB(t,e,n=!0){return v(this,null,function*(){let r=WA(t),i,o=r.uu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ou()):i=yield $A(r,e,n,!0),i})}function KB(t,e){return v(this,null,function*(){let n=WA(t);yield $A(n,e,!0,!1)})}function $A(t,e,n,r){return v(this,null,function*(){let i=yield NB(t.localStore,pn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=yield QB(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&FA(t.remoteStore,i),c})}function QB(t,e,n,r,i){return v(this,null,function*(){t.Ru=(p,m,y)=>function(R,N,k,V){return v(this,null,function*(){let $=N.view.Za(k);$.Cs&&($=yield y0(R.localStore,N.query,!1).then(({documents:T})=>N.view.Za(T,$)));let le=V&&V.targetChanges.get(N.targetId),Ue=V&&V.targetMismatches.get(N.targetId)!=null,he=N.view.applyChanges($,R.isPrimaryClient,le,Ue);return T0(R,N.targetId,he.ru),he.snapshot})}(t,p,m,y);let o=yield y0(t.localStore,e,!0),s=new jv(e,o.$s),c=s.Za(o.documents),u=Ha.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);T0(t,n,l.ru);let h=new Bv(e,n,s);return t.uu.set(e,h),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),l.snapshot})}function YB(t,e,n){return v(this,null,function*(){let r=W(t),i=r.uu.get(e),o=r.cu.get(i.targetId);if(o.length>1)return r.cu.set(i.targetId,o.filter(s=>!$d(s,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ev(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&m_(r.remoteStore,i.targetId),Hv(r,i.targetId)}).catch(ts))):(Hv(r,i.targetId),yield Ev(r.localStore,i.targetId,!0))})}function ZB(t,e){return v(this,null,function*(){let n=W(t),r=n.uu.get(e),i=n.cu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),m_(n.remoteStore,r.targetId))})}function JB(t,e,n){return v(this,null,function*(){let r=oU(t);try{let i=yield function(s,c){let u=W(s),l=Ke.now(),h=c.reduce((y,D)=>y.add(D.key),ae()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=$n(),R=ae();return u.Bs.getEntries(y,h).next(N=>{D=N,D.forEach((k,V)=>{V.isValidDocument()||(R=R.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(N=>{p=N;let k=[];for(let V of c){let $=tB(V,p.get(V.key).overlayedDocument);$!=null&&k.push(new yn(V.key,$,sA($.value.mapValue),Fn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,c)}).next(N=>{m=N;let k=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,N.batchId,k)})}).then(()=>({batchId:m.batchId,changes:mA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,u){let l=s.Iu[s.currentUser.toKey()];l||(l=new Me(te)),l=l.insert(c,u),s.Iu[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Xa(r,i.changes),yield Gd(r.remoteStore)}catch(i){let o=I_(i,"Failed to persist write");n.reject(o)}})}function HA(t,e){return v(this,null,function*(){let n=W(t);try{let r=yield CB(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Pu.get(o);s&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s._u=!0:i.modifiedDocuments.size>0?de(s._u,14607):i.removedDocuments.size>0&&(de(s._u,42227),s._u=!1))}),yield Xa(n,r,e)}catch(r){yield ts(r)}})}function D0(t,e,n){let r=W(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.uu.forEach((o,s)=>{let c=s.view.Da(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let u=W(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.ya)m.Da(c)&&(l=!0)}),l&&E_(u)}(r.eventManager,e),i.length&&r.au.j_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function XB(t,e,n){return v(this,null,function*(){let r=W(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Pu.get(e),o=i&&i.key;if(o){let s=new Me(j.comparator);s=s.insert(o,Qt.newNoDocument(o,Y.min()));let c=ae().add(o),u=new gd(Y.min(),new Map,new Me(te),s,c);yield HA(r,u),r.hu=r.hu.remove(o),r.Pu.delete(e),D_(r)}else yield Ev(r.localStore,e,!1).then(()=>Hv(r,e,n)).catch(ts)})}function eU(t,e){return v(this,null,function*(){let n=W(t),r=e.batch.batchId;try{let i=yield bB(n.localStore,e);zA(n,r,null),qA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Xa(n,i)}catch(i){yield ts(i)}})}function tU(t,e,n){return v(this,null,function*(){let r=W(t);try{let i=yield function(s,c){let u=W(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(de(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);zA(r,e,n),qA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Xa(r,i)}catch(i){yield ts(i)}})}function qA(t,e){(t.Eu.get(e)||[]).forEach(n=>{n.resolve()}),t.Eu.delete(e)}function zA(t,e,n){let r=W(t),i=r.Iu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Iu[r.currentUser.toKey()]=i}}function Hv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.cu.get(e))t.uu.delete(r),n&&t.au.Vu(r,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(r=>{t.Tu.containsKey(r)||GA(t,r)})}function GA(t,e){t.lu.delete(e.path.canonicalString());let n=t.hu.get(e);n!==null&&(m_(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),D_(t))}function T0(t,e,n){for(let r of n)r instanceof Rd?(t.Tu.addReference(r.key,e),nU(t,r)):r instanceof Md?(O(w_,"Document no longer in limbo: "+r.key),t.Tu.removeReference(r.key,e),t.Tu.containsKey(r.key)||GA(t,r.key)):B(19791,{mu:r})}function nU(t,e){let n=e.key,r=n.path.canonicalString();t.hu.get(n)||t.lu.has(r)||(O(w_,"New document in limbo: "+n),t.lu.add(r),D_(t))}function D_(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){let e=t.lu.values().next().value;t.lu.delete(e);let n=new j(Te.fromString(e)),r=t.du.next();t.Pu.set(r,new Uv(n)),t.hu=t.hu.insert(n,r),FA(t.remoteStore,new qa(pn(h_(n.path)),r,"TargetPurposeLimboResolution",i_.le))}}function Xa(t,e,n){return v(this,null,function*(){let r=W(t),i=[],o=[],s=[];r.uu.isEmpty()||(r.uu.forEach((c,u)=>{s.push(r.Ru(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=yv.Rs(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.au.j_(i),yield function(u,l){return v(this,null,function*(){let h=W(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.ds,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.As,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!ns(p))throw p;O(g_,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.xs.get(m),D=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(D);h.xs=h.xs.insert(m,R)}}})}(r.localStore,o))})}function rU(t,e){return v(this,null,function*(){let n=W(t);if(!n.currentUser.isEqual(e)){O(w_,"User change. New user:",e.toKey());let r=yield kA(n.localStore,e);n.currentUser=e,function(o,s){o.Eu.forEach(c=>{c.forEach(u=>{u.reject(new F(M.CANCELLED,s))})}),o.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xa(n,r.ks)}})}function iU(t,e){let n=W(t),r=n.Pu.get(e);if(r&&r._u)return ae().add(r.key);{let i=ae(),o=n.cu.get(e);if(!o)return i;for(let s of o){let c=n.uu.get(s);i=i.unionWith(c.view.Ya)}return i}}function WA(t){let e=W(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XB.bind(null,e),e.au.j_=zB.bind(null,e.eventManager),e.au.Vu=GB.bind(null,e.eventManager),e}function oU(t){let e=W(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tU.bind(null,e),e}var KA=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return v(this,null,function*(){this.serializer=qd(n.databaseInfo.databaseId),this.sharedClientState=this.pu(n),this.persistence=this.yu(n),yield this.persistence.start(),this.localStore=this.wu(n),this.gcScheduler=this.Su(n,this.localStore),this.indexBackfillerScheduler=this.bu(n,this.localStore)})}Su(n,r){return null}bu(n,r){return null}wu(n){return TB(this.persistence,new _v,n.initialUser,this.serializer)}yu(n){return new Ed(mv.fi,this.serializer)}pu(n){return new wv}terminate(){return v(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),qv=class extends KA{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){de(this.persistence.referenceDelegate instanceof wd,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new rv(r,e.asyncQueue,n)}yu(e){let n=this.cacheSizeBytes!==void 0?Ot.withCacheSize(this.cacheSizeBytes):Ot.DEFAULT;return new Ed(r=>wd.fi(r,n),this.serializer)}};var sU=(()=>{class t{initialize(n,r){return v(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>D0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rU.bind(null,this.syncEngine),yield $B(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new Fv}()}createDatastore(n){let r=qd(n.databaseInfo.databaseId),i=function(s){return new Av(s)}(n.databaseInfo);return function(s,c,u,l){return new Mv(s,c,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,c,u){return new xv(i,o,s,c,u)}(this.localStore,this.datastore,n.asyncQueue,r=>D0(this.syncEngine,r,0),function(){return Td.C()?new Td:new Dv}())}createSyncEngine(n,r){return function(o,s,c,u,l,h,p){let m=new $v(o,s,c,u,l,h);return p&&(m.Au=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var n,r;yield function(o){return v(this,null,function*(){let s=W(o);O(Ei,"RemoteStore shutting down."),s.Ta.add(5),yield Ja(s),s.Ea.shutdown(),s.da.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var zv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Ln("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Ir="FirestoreClient",Gv=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=He.UNAUTHENTICATED,this.clientId=cd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){O(Ir,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O(Ir,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new On;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=I_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function gy(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),O(Ir,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield kA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function b0(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield aU(t);O(Ir,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>I0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>I0(e.remoteStore,i)),t._onlineComponents=e})}function aU(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O(Ir,"Using user provided OfflineComponentProvider");try{yield gy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;jo("Error using user provided cache. Falling back to memory cache: "+n),yield gy(t,new KA)}}else O(Ir,"Using default OfflineComponentProvider"),yield gy(t,new qv(void 0));return t._offlineComponents})}function QA(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(O(Ir,"Using user provided OnlineComponentProvider"),yield b0(t,t._uninitializedComponentsProvider._online)):(O(Ir,"Using default OnlineComponentProvider"),yield b0(t,new sU))),t._onlineComponents})}function cU(t){return QA(t).then(e=>e.syncEngine)}function C0(t){return v(this,null,function*(){let e=yield QA(t),n=e.eventManager;return n.onListen=WB.bind(null,e.syncEngine),n.onUnlisten=YB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZB.bind(null,e.syncEngine),n})}function YA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var A0=new Map;function ZA(t,e,n){if(!n)throw new F(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uU(t,e,n,r){if(e===!0&&r===!0)throw new F(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function S0(t){if(!j.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function N0(t){if(j.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B(12329,{type:typeof t})}function Vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Wd(t);throw new F(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var JA="firestore.googleapis.com",R0=!0,Pd=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JA,this.ssl=R0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:R0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EB)throw new F(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Zo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pd(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new my;switch(r.type){case"firstParty":return new Iy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,_o("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=A0.get(n);r&&(O("ComponentProvider","Removing Datastore"),A0.delete(n),r.terminate())}(this),Promise.resolve()}};function XA(t,e,n,r={}){var i;t=Vn(t,Zo);let o=ii(e),s=t._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;s.host!==JA&&s.host!==u&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!un(l,c)&&(t._setSettings(l),o&&(Tl(`https://${u}`),_o("Firestore",!0)),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=He.MOCK_USER;else{h=sb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new F(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new He(m)}t._authCredentials=new yy(new sd(h,p))}}var Jo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},lt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},yr=class t extends Jo{constructor(e,n,r){super(e,n,h_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new j(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function eS(t,e,...n){if(t=De(t),ZA("collection","path",e),t instanceof Zo){let r=Te.fromString(e,...n);return N0(r),new yr(t,null,r)}{if(!(t instanceof lt||t instanceof yr))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Te.fromString(e,...n));return N0(r),new yr(t.firestore,null,r)}}function tS(t,e,...n){if(t=De(t),arguments.length===1&&(e=cd.newId()),ZA("doc","path",e),t instanceof Zo){let r=Te.fromString(e,...n);return S0(r),new lt(t,null,new j(r))}{if(!(t instanceof lt||t instanceof yr))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Te.fromString(e,...n));return S0(r),new lt(t.firestore,t instanceof yr?t.converter:null,new j(r))}}var M0="AsyncQueue",xd=class{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new bd(this,"async_queue_retry"),this.ec=()=>{let r=py();r&&O(M0,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;let n=py();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;let n=py();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});let n=new On;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}sc(){return v(this,null,function*(){if(this.zu.length!==0){try{yield this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!ns(e))throw e;O(M0,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}})}rc(e){let n=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,Ln("INTERNAL UNHANDLED ERROR: ",P0(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=n,n}enqueueAfterDelay(e,n,r){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);let i=kv.createAndSchedule(this,e,n,r,o=>this.oc(o));return this.Hu.push(i),i}nc(){this.Ju&&B(47125,{_c:P0(this.Ju)})}verifyOperationInProgress(){}ac(){return v(this,null,function*(){let e;do e=this.tc,yield e;while(e!==this.tc)})}uc(e){for(let n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){let n=this.Hu.indexOf(e);this.Hu.splice(n,1)}};function P0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function x0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Er=class extends Zo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new xd,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new xd(e),this._firestoreClient=void 0,yield e}})}};function nS(t,e){let n=typeof t=="object"?t:si(),r=typeof t=="string"?t:e||hd,i=Do(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=ob("firestore");o&&XA(i,...o)}return i}function rS(t){if(t._terminated)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||lU(t),t._firestoreClient}function lU(t){var e,n,r;let i=t._freezeSettings(),o=function(c,u,l,h){return new by(c,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,YA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Gv(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(t._componentsProvider))}var Wa=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(it.fromBase64String(e))}catch(n){throw new F(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Xo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ka=class{constructor(e){this._methodName=e}};var Qa=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}};var Ya=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var dU=/^__.*__$/,Wv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new yn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ii(e,this.data,n,this.fieldTransforms)}},kd=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new yn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function iS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B(40011,{hc:t})}}var Kv=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Pc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tc({path:r,Ec:!1});return i.dc(e),i}Ac(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tc({path:r,Ec:!1});return i.Pc(),i}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Fd(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(iS(this.hc)&&dU.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}},Qv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qd(e)}gc(e,n,r,i=!1){return new Kv({hc:e,methodName:n,fc:r,path:Ct.emptyPath(),Ec:!1,mc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function T_(t){let e=t._freezeSettings(),n=qd(t._databaseId);return new Qv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hU(t,e,n,r,i,o={}){let s=t.gc(o.merge||o.mergeFields?2:0,e,n,i);b_("Data must be an object, but it was:",s,r);let c=oS(r,s),u,l;if(o.merge)u=new Ft(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Yv(e,p,n);if(!s.contains(m))throw new F(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);aS(h,m)||h.push(m)}u=new Ft(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Wv(new bt(c),u,l)}var Od=class t extends Ka{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function fU(t,e,n,r){let i=t.gc(1,e,n);b_("Data must be an object, but it was:",i,r);let o=[],s=bt.empty();wr(r,(u,l)=>{let h=C_(e,u,n);l=De(l);let p=i.Ac(h);if(l instanceof Od)o.push(h);else{let m=ec(l,p);m!=null&&(o.push(h),s.set(h,m))}});let c=new Ft(o);return new kd(s,c,i.fieldTransforms)}function pU(t,e,n,r,i,o){let s=t.gc(1,e,n),c=[Yv(e,r,n)],u=[i];if(o.length%2!=0)throw new F(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)c.push(Yv(e,o[m])),u.push(o[m+1]);let l=[],h=bt.empty();for(let m=c.length-1;m>=0;--m)if(!aS(l,c[m])){let y=c[m],D=u[m];D=De(D);let R=s.Ac(y);if(D instanceof Od)l.push(y);else{let N=ec(D,R);N!=null&&(l.push(y),h.set(y,N))}}let p=new Ft(l);return new kd(h,p,s.fieldTransforms)}function gU(t,e,n,r=!1){return ec(n,t.gc(r?4:3,e))}function ec(t,e){if(sS(t=De(t)))return b_("Unsupported field value:",e,t),oS(t,e);if(t instanceof Ka)return function(r,i){if(!iS(i.hc))throw i.Vc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Vc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let u=ec(c,i.Rc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Yj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ke.fromDate(r);return{timestampValue:_d(i.serializer,o)}}if(r instanceof Ke){let o=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_d(i.serializer,o)}}if(r instanceof Qa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wa)return{bytesValue:CA(i.serializer,r._byteString)};if(r instanceof lt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Vc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:p_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ya)return function(s,c){return{mapValue:{fields:{[a_]:{stringValue:c_},[Uo]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.Vc("VectorValues must only contain numeric values.");return f_(c.serializer,l)})}}}}}}(r,i);throw i.Vc(`Unsupported field value: ${Wd(r)}`)}(t,e)}function oS(t,e){let n={};return J0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wr(t,(r,i)=>{let o=ec(i,e.Ic(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function sS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Qa||t instanceof Wa||t instanceof lt||t instanceof Ka||t instanceof Ya)}function b_(t,e,n){if(!sS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Wd(n);throw r==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+r)}}function Yv(t,e,n){if((e=De(e))instanceof Xo)return e._internalPath;if(typeof e=="string")return C_(t,e);throw Fd("Field path arguments must be of type string or ",t,!1,void 0,n)}var mU=new RegExp("[~\\*/\\[\\]]");function C_(t,e,n){if(e.search(mU)>=0)throw Fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xo(...e.split("."))._internalPath}catch{throw Fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fd(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(M.INVALID_ARGUMENT,c+t+u)}function aS(t,e){return t.some(n=>n.isEqual(e))}var Vd=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Zv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(cS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Zv=class extends Vd{data(){return super.data()}};function cS(t,e){return typeof e=="string"?C_(t,e):e instanceof Xo?e._internalPath:e._delegate._internalPath}function yU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Za=class{},Jv=class extends Za{};function uS(t,e,...n){let r=[];e instanceof Za&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof e_).length,c=o.filter(u=>u instanceof Xv).length;if(s>1||s>0&&c>0)throw new F(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Xv=class t extends Jv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return lS(e._query,n),new Jo(e.firestore,e.converter,Ly(e._query,n))}_parse(e){let n=T_(e.firestore);return function(o,s,c,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){O0(p,h);let D=[];for(let R of p)D.push(k0(u,o,R));m={arrayValue:{values:D}}}else m=k0(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||O0(p,h),m=gU(c,s,p,h==="in"||h==="not-in");return Fe.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var e_=class t extends Za{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,c=o.getFlattenedFilters();for(let u of c)lS(s,u),s=Ly(s,u)}(e._query,n),new Jo(e.firestore,e.converter,Ly(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function k0(t,e,n){if(typeof(n=De(n))=="string"){if(n==="")throw new F(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hA(e)&&n.indexOf("/")!==-1)throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Te.fromString(n));if(!j.isDocumentKey(r))throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return JC(t,new j(r))}if(n instanceof lt)return JC(t,n._key);throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wd(n)}.`)}function O0(t,e){if(!Array.isArray(t)||t.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lS(t,e){let n=function(i,o){for(let s of i)for(let c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var t_=class{convertValue(e,n="none"){switch(vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ee(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw B(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return wr(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Uo].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ee(s.doubleValue));return new Ya(o)}convertGeoPoint(e){return new Qa(Ee(e.latitude),Ee(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Ud(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ba(e));default:return null}}convertTimestamp(e){let n=jn(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Te.fromString(e);de(PA(r),9688,{name:e});let i=new fd(r.get(1),r.get(3)),o=new j(r.popFirst(5));return i.isEqual(n)||Ln(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function vU(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var pi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ld=class extends Vd{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Lo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(cS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Lo=class extends Ld{data(e={}){return super.data(e)}},n_=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new pi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Lo(this._firestore,this._userDataWriter,r.key,r,new pi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new Lo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new pi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new Lo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new pi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:_U(c.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function _U(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B(61501,{type:t})}}var jd=class extends t_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}};function dS(t,e,n){t=Vn(t,lt);let r=Vn(t.firestore,Er),i=vU(t.converter,e,n);return S_(r,[hU(T_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Fn.none())])}function hS(t,e,n,...r){t=Vn(t,lt);let i=Vn(t.firestore,Er),o=T_(i),s;return s=typeof(e=De(e))=="string"||e instanceof Xo?pU(o,"updateDoc",t._key,e,n,r):fU(o,"updateDoc",t._key,e),S_(i,[s.toMutation(t._key,Fn.exists(!0))])}function fS(t){return S_(Vn(t.firestore,Er),[new $a(t._key,Fn.none())])}function A_(t,...e){var n,r,i;t=De(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||x0(e[s])||(o=e[s],s++);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(x0(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof lt)l=Vn(t.firestore,Er),h=h_(t._key.path),u={next:p=>{e[s]&&e[s](IU(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Vn(t,Jo);l=Vn(p.firestore,Er),h=p._query;let m=new jd(l);u={next:y=>{e[s]&&e[s](new n_(l,m,p,y))},error:e[s+1],complete:e[s+2]},yU(t._query)}return function(m,y,D,R){let N=new zv(R),k=new Lv(y,N,D);return m.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return HB(yield C0(m),k)})),()=>{N.Cu(),m.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return qB(yield C0(m),k)}))}}(rS(l),h,c,u)}function S_(t,e){return function(r,i){let o=new On;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return JB(yield cU(r),i,o)})),o.promise}(rS(t),e)}function IU(t,e,n){let r=n.docs.get(e._key),i=new jd(t);return new Ld(t,i,e._key,r,new pi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){es=i})(cr),Gt(new ct("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Er(new vy(r.getProvider("auth-internal")),new Ey(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fd(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Re($C,HC,e),Re($C,HC,"esm2017")})();var Kd=function(){return Kd=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Kd.apply(this,arguments)};var DU={includeMetadataChanges:!1};function pS(t,e){return e===void 0&&(e=DU),new ne(function(n){var r=A_(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function gS(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Kd(Kd({},r),(n={},n[e.idField]=t.id,n))}function mS(t){return pS(t,{includeMetadataChanges:!0}).pipe(_t(function(e){return e.docs}))}function yS(t,e){return e===void 0&&(e={}),mS(t).pipe(_t(function(n){return n.map(function(r){return gS(r,e)})}))}var Hn=class{constructor(e){return e}},vS="firestore",N_=class{constructor(){return bo(vS)}};var R_=new z("angularfire2.firestore-instances");function TU(t,e){let n=Ia(vS,t,e);return n&&new Hn(n)}function bU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Hn(r)}}var CU={provide:N_,deps:[[new wt,R_]]},AU={provide:Hn,useFactory:TU,deps:[[new wt,R_],An]};function kK(t,...e){return Re("angularfire",ur.full,"fst"),rr([AU,CU,{provide:R_,useFactory:bU(t),multi:!0,deps:[we,Ge,lr,ci,[new wt,Ma],[new wt,Co],...e]}])}var Qd=Be(yS,!0);var tc=Be(eS,!0,2);var Yd=Be(fS,!0,2);var Di=Be(tS,!0,2);var OK=Be(nS,!0);var _S=Be(uS,!0,2);var Zd=Be(dS,!0,2);var IS=Be(hS,!0,2);var Jd=class t{constructor(e,n){this.firestore=e;this.authService=n}userId=Ht(()=>this.authService.currentUser()?.uid??null);favoritesCollection(){let e=this.userId();if(!e)throw new Error("Usuario no autenticado");return tc(this.firestore,`users/${e}/favorites`)}addFavorite(e){return v(this,null,function*(){if(!this.userId())return;let r=Di(this.favoritesCollection(),e.id.toString());yield Zd(r,e)})}removeFavorite(e){return v(this,null,function*(){if(!this.userId())return;let r=Di(this.favoritesCollection(),e.toString());yield Yd(r)})}getFavorites$(){if(!this.userId())throw new Error("Usuario no autenticado");let n=_S(this.favoritesCollection());return Qd(n,{idField:"firebaseId"})}static \u0275fac=function(n){return new(n||t)(Ie(Hn),Ie(mr))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})};var Xd=class t{constructor(e,n){this.firestore=e;this.authService=n;this.userId.set(this.authService.currentUser()?.uid??null)}userId=pe(null);playlistsCollection(){let e=this.userId();if(!e)throw new Error("Usuario no autenticado");return tc(this.firestore,`users/${e}/playlists`)}getPlaylists$(){let e=this.userId();if(!e)return Xh([]);let n=tc(this.firestore,`users/${e}/playlists`);return Qd(n,{idField:"id"})}createPlaylist(e){return v(this,null,function*(){let n=this.playlistsCollection(),r=Di(n);yield Zd(r,e)})}updatePlaylist(e,n){return v(this,null,function*(){let r=this.userId();if(!r)throw new Error("Usuario no autenticado");let i=Di(this.firestore,`users/${r}/playlists/${e}`);yield IS(i,n)})}deletePlaylist(e){return v(this,null,function*(){let n=this.userId();if(!n)throw new Error("Usuario no autenticado");let r=Di(this.firestore,`users/${n}/playlists/${e}`);yield Yd(r)})}static \u0275fac=function(n){return new(n||t)(Ie(Hn),Ie(mr))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})};var is=class t{message=pe("");visible=pe(!1);show(e,n=2e3){this.message.set(e),this.visible.set(!0),setTimeout(()=>this.visible.set(!1),n)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})};function RU(t,e){t&1&&(Dg(0),ao(),Se(1,"svg",4),xt(2,"path",5),Ne(),Tg())}function MU(t,e){t&1&&(ao(),Se(0,"svg",6),xt(1,"path",7),Ne())}var eh=class t{constructor(e,n){this.userDataService=e;this.toast=n;this.userDataService.getFavorites$().subscribe(r=>{this.localFavorites.set(r)})}track;localFavorites=pe([]);showAlert=pe(!1);alertMessage=pe("");isFavorite=Ht(()=>this.track&&this.localFavorites().some(e=>e.id===this.track.id));toggleFavorite(){return v(this,null,function*(){this.track?.id&&(this.isFavorite()?(this.userDataService.removeFavorite(this.track.id),this.toast.show(`"${this.track.title}" eliminado de favoritos`)):(this.userDataService.addFavorite(this.track),this.toast.show(`"${this.track.title}" a\xF1adido a favoritos`)))})}static \u0275fac=function(n){return new(n||t)(ee(Jd),ee(is))};static \u0275cmp=or({type:t,selectors:[["app-favorite-button"]],inputs:{track:"track"},decls:5,vars:2,consts:[["notFav",""],[1,"relative"],["aria-label","Bot\xF3n de favoritos",1,"text-red-500","hover:text-red-700","transition",3,"click"],[4,"ngIf","ngIfElse"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"w-6","h-6","fill-current"],["d",`M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 
          2 5.42 4.42 3 7.5 3c1.74 0 
          3.41 0.81 4.5 2.09C13.09 3.81 
          14.76 3 16.5 3 19.58 3 22 5.42 
          22 8.5c0 3.78-3.4 6.86-8.55 
          11.54L12 21.35z`],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","stroke-current"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d",`M4.318 6.318a4.5 4.5 0 000 
          6.364L12 20.364l7.682-7.682a4.5 
          4.5 0 00-6.364-6.364L12 
          7.636l-1.318-1.318a4.5 
          4.5 0 00-6.364 0z`]],template:function(n,r){if(n&1){let i=la();Se(0,"div",1)(1,"button",2),mt("click",function(){return Zr(i),Jr(r.toggleFavorite())}),$t(2,RU,3,0,"ng-container",3)(3,MU,2,0,"ng-template",null,0,VT),Ne()()}if(n&2){let i=AT(4);We(2),gt("ngIf",r.isFavorite())("ngIfElse",i)}},dependencies:[ni,pa],encapsulation:2})};var th=class t{audio=null;currentUrl=pe(null);isPlaying=pe(!1);title=pe(null);artist=pe(null);cover=pe(null);play(e,n,r,i){this.audio&&(this.audio.pause(),this.audio.currentTime=0),this.audio=new Audio(e),this.audio.play(),this.currentUrl.set(e),this.isPlaying.set(!0),this.title.set(n??null),this.artist.set(r??null),this.cover.set(i??null),this.audio.onended=()=>{this.stop()}}stop(){this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.audio=null),this.isPlaying.set(!1),this.currentUrl.set(null)}toggle(e,n,r,i){this.currentUrl()===e&&this.isPlaying()?this.stop():this.play(e,n,r,i)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})};function xU(t,e){t&1&&(ao(),Se(0,"svg",1),xt(1,"path",3),Ne())}function kU(t,e){t&1&&(ao(),Se(0,"svg",2)(1,"g"),xt(2,"rect",4)(3,"rect",5),Ne()())}var nh=class t{constructor(e){this.audio=e}previewUrl;title;artist;cover;isPlaying(){return this.audio.currentUrl()===this.previewUrl&&this.audio.isPlaying()}onButtonClick(e){e.stopPropagation(),this.audio.toggle(this.previewUrl,this.title,this.artist,this.cover)}static \u0275fac=function(n){return new(n||t)(ee(th))};static \u0275cmp=or({type:t,selectors:[["app-preview-button"]],inputs:{previewUrl:"previewUrl",title:"title",artist:"artist",cover:"cover"},decls:3,vars:2,consts:[[1,"bg-orange-500","hover:bg-orange-600","text-white","rounded-full","p-3","shadow-md","transition-all","duration-300","flex","items-center","justify-center","relative","z-10",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"h-7","w-7","transform","scale-x-110"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"h-7","w-7"],["d","M8 5v14l11-7z"],["x","6","y","5","width","4","height","14","rx","1"],["x","14","y","5","width","4","height","14","rx","1"]],template:function(n,r){n&1&&(Se(0,"button",0),mt("click",function(o){return r.onButtonClick(o)}),$t(1,xU,2,0,":svg:svg",1)(2,kU,4,0,":svg:svg",2),Ne()),n&2&&(gt("title",r.isPlaying()?"Pausar preview":"Reproducir preview"),We(),ua(r.isPlaying()?2:1))},encapsulation:2})};var RS=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(ee(ho),ee(Mt))};static \u0275dir=nt({type:t})}return t})(),OU=(()=>{class t extends RS{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ju(t)))(i||t)}})();static \u0275dir=nt({type:t,features:[on]})}return t})(),MS=new z("");var FU={provide:MS,useExisting:nr(()=>lh),multi:!0};function VU(){let t=ti()?ti().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var LU=new z(""),lh=(()=>{class t extends RS{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!VU())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(ee(ho),ee(Mt),ee(LU,8))};static \u0275dir=nt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&mt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[mo([FU]),on]})}return t})();function jU(t){return t==null||PS(t)===0}function PS(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var dh=new z(""),xS=new z("");function BU(t){return jU(t.value)?{required:!0}:null}function UU(t){return e=>{let n=e.value?.length??PS(e.value);return n===null||n===0?null:n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}function wS(t){return null}function kS(t){return t!=null}function OS(t){return ca(t)?jt(t):t}function FS(t){let e={};return t.forEach(n=>{e=n!=null?fe(fe({},e),n):e}),Object.keys(e).length===0?null:e}function VS(t,e){return e.map(n=>n(t))}function $U(t){return!t.validate}function LS(t){return t.map(e=>$U(e)?e:n=>e.validate(n))}function HU(t){if(!t)return null;let e=t.filter(kS);return e.length==0?null:function(n){return FS(VS(n,e))}}function O_(t){return t!=null?HU(LS(t)):null}function qU(t){if(!t)return null;let e=t.filter(kS);return e.length==0?null:function(n){let r=VS(n,e).map(OS);return Kh(r).pipe(_t(FS))}}function F_(t){return t!=null?qU(LS(t)):null}function DS(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function zU(t){return t._rawValidators}function GU(t){return t._rawAsyncValidators}function P_(t){return t?Array.isArray(t)?t:[t]:[]}function ih(t,e){return Array.isArray(t)?t.includes(e):t===e}function TS(t,e){let n=P_(e);return P_(t).forEach(i=>{ih(n,i)||n.push(i)}),n}function bS(t,e){return P_(e).filter(n=>!ih(t,n))}var oh=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=O_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=F_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},as=class extends oh{name;get formDirective(){return null}get path(){return null}},ac=class extends oh{_parent=null;name=null;valueAccessor=null},sh=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},WU={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},bQ=ye(fe({},WU),{"[class.ng-submitted]":"isSubmitted"}),jS=(()=>{class t extends sh{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ee(ac,2))};static \u0275dir=nt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ll("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[on]})}return t})(),CQ=(()=>{class t extends sh{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ee(as,10))};static \u0275dir=nt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ll("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[on]})}return t})();var nc="VALID",rh="INVALID",os="PENDING",rc="DISABLED",Dr=class{},ah=class extends Dr{value;source;constructor(e,n){super(),this.value=e,this.source=n}},oc=class extends Dr{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},sc=class extends Dr{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},ss=class extends Dr{status;source;constructor(e,n){super(),this.status=e,this.source=n}},x_=class extends Dr{source;constructor(e){super(),this.source=e}},k_=class extends Dr{source;constructor(e){super(),this.source=e}};function BS(t){return(hh(t)?t.validators:t)||null}function KU(t){return Array.isArray(t)?O_(t):t||null}function US(t,e){return(hh(e)?e.asyncValidators:t)||null}function QU(t){return Array.isArray(t)?F_(t):t||null}function hh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function YU(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[n])throw new H(1001,"")}function ZU(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new H(1002,"")})}var ch=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return an(this.statusReactive)}set status(e){an(()=>this.statusReactive.set(e))}_status=Ht(()=>this.statusReactive());statusReactive=pe(void 0);get valid(){return this.status===nc}get invalid(){return this.status===rh}get pending(){return this.status==os}get disabled(){return this.status===rc}get enabled(){return this.status!==rc}errors;get pristine(){return an(this.pristineReactive)}set pristine(e){an(()=>this.pristineReactive.set(e))}_pristine=Ht(()=>this.pristineReactive());pristineReactive=pe(!0);get dirty(){return!this.pristine}get touched(){return an(this.touchedReactive)}set touched(e){an(()=>this.touchedReactive.set(e))}_touched=Ht(()=>this.touchedReactive());touchedReactive=pe(!1);get untouched(){return!this.touched}_events=new At;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(TS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(bS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(bS(e,this._rawAsyncValidators))}hasValidator(e){return ih(this._rawValidators,e)}hasAsyncValidator(e){return ih(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ye(fe({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new sc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new sc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ye(fe({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new oc(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new oc(!0,r))}markAsPending(e={}){this.status=os;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ss(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ye(fe({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=rc,this.errors=null,this._forEachChild(i=>{i.disable(ye(fe({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ah(this.value,r)),this._events.next(new ss(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(fe({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=nc,this._forEachChild(r=>{r.enable(ye(fe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(fe({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===nc||this.status===os)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ah(this.value,n)),this._events.next(new ss(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ye(fe({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rc:nc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=os,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=OS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ss(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new It,this.statusChanges=new It}_calculateStatus(){return this._allControlsDisabled()?rc:this.errors?rh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(os)?os:this._anyControlsHaveStatus(rh)?rh:nc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new oc(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new sc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=KU(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=QU(this._rawAsyncValidators)}},uh=class extends ch{constructor(e,n,r){super(BS(n),US(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){ZU(this,!0,e),Object.keys(e).forEach(r=>{YU(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var V_=new z("",{providedIn:"root",factory:()=>L_}),L_="always";function JU(t,e){return[...e.path,t]}function $S(t,e,n=L_){HS(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),e$(t,e),n$(t,e),t$(t,e),XU(t,e)}function CS(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function XU(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function HS(t,e){let n=zU(t);e.validator!==null?t.setValidators(DS(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=GU(t);e.asyncValidator!==null?t.setAsyncValidators(DS(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();CS(e._rawValidators,i),CS(e._rawAsyncValidators,i)}function e$(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&qS(t,e)})}function t$(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&qS(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function qS(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function n$(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function r$(t,e){t==null,HS(t,e)}function i$(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function o$(t){return Object.getPrototypeOf(t.constructor)===OU}function s$(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function a$(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===lh?n=o:o$(o)?r=o:i=o}),i||r||n||null}var c$={provide:as,useExisting:nr(()=>u$)},ic=Promise.resolve(),u$=(()=>{class t extends as{callSetDisabledState;get submitted(){return an(this.submittedReactive)}_submitted=Ht(()=>this.submittedReactive());submittedReactive=pe(!1);_directives=new Set;form;ngSubmit=new It;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new uh({},O_(n),F_(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){ic.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),$S(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){ic.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){ic.then(()=>{let r=this._findContainer(n.path),i=new uh({});r$(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){ic.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){ic.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),s$(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new x_(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new k_(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(ee(dh,10),ee(xS,10),ee(V_,8))};static \u0275dir=nt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&mt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[mo([c$]),on]})}return t})();function AS(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function SS(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var l$=class extends ch{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(BS(n),US(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(SS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){AS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){AS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){SS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var d$={provide:ac,useExisting:nr(()=>j_)},NS=Promise.resolve(),j_=(()=>{class t extends ac{_changeDetectorRef;callSetDisabledState;control=new l$;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new It;constructor(n,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=a$(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),i$(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){$S(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){NS.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&fl(r);NS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?JU(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(ee(as,9),ee(dh,10),ee(xS,10),ee(MS,10),ee(hl,8),ee(V_,8))};static \u0275dir=nt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[mo([d$]),on,Wu]})}return t})();var SQ=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=nt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();function h$(t){return typeof t=="number"?t:parseInt(t,10)}var zS=(()=>{class t{_validator=wS;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):wS,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=nt({type:t,features:[Wu]})}return t})();var f$={provide:dh,useExisting:nr(()=>p$),multi:!0};var p$=(()=>{class t extends zS{required;inputName="required";normalizeInput=fl;createValidator=n=>BU;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ju(t)))(i||t)}})();static \u0275dir=nt({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ul("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[mo([f$]),on]})}return t})();var g$={provide:dh,useExisting:nr(()=>m$),multi:!0},m$=(()=>{class t extends zS{minlength;inputName="minlength";normalizeInput=n=>h$(n);createValidator=n=>UU(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ju(t)))(i||t)}})();static \u0275dir=nt({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ul("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[mo([g$]),on]})}return t})();var y$=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=aa({type:t});static \u0275inj=Xs({})}return t})();var GS=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:V_,useValue:n.callSetDisabledState??L_}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=aa({type:t});static \u0275inj=Xs({imports:[y$]})}return t})();function _$(t,e){if(t&1){let n=la();Se(0,"button",11),mt("click",function(){let i=Zr(n).$implicit,o=sn(3);return Jr(o.addToPlaylist(i))}),sr(1),Ne()}if(t&2){let n=e.$implicit;We(),go(" ",n.name," ")}}function I$(t,e){if(t&1&&(Se(0,"div",9),$t(1,_$,2,1,"button",10),Ne()),t&2){let n=sn(2);We(),gt("ngForOf",n.playlists())}}function E$(t,e){if(t&1){let n=la();Se(0,"div",3),mt("clickOutside",function(){Zr(n);let i=sn();return Jr(i.closeDropdown())}),Se(1,"h3",4),sr(2,"A\xF1adir a playlist"),Ne(),$t(3,I$,2,1,"div",5),Se(4,"div",6)(5,"input",7),Sg("ngModelChange",function(i){Zr(n);let o=sn();return NT(o.newPlaylistName,i)||(o.newPlaylistName=i),Jr(i)}),Ne(),Se(6,"button",8),mt("click",function(){Zr(n);let i=sn();return Jr(i.createAndAdd())}),sr(7," Crear y a\xF1adir "),Ne()()()}if(t&2){let n=sn();We(3),gt("ngIf",n.playlists().length>0),We(2),Ag("ngModel",n.newPlaylistName)}}var fh=class t{constructor(e){this.elementRef=e;pl(()=>{this.playlistService.getPlaylists$().subscribe(n=>{this.playlists.set(n)})})}track;playlistService=L(Xd);toast=L(is);isOpen=pe(!1);playlists=pe([]);newPlaylistName=pe("");addToPlaylist(e){return v(this,null,function*(){if(e.tracks.includes(this.track.id.toString())){this.toast.show("Ya est\xE1 en la playlist");return}if(!e.id){this.toast.show("Playlist inv\xE1lida");return}yield this.playlistService.updatePlaylist(e.id,{tracks:[...e.tracks,this.track.id.toString()]}),this.toast.show(`A\xF1adido "${this.track.title}" a la playlist "${e.name}"`),this.isOpen.set(!1)})}createAndAdd(){return v(this,null,function*(){let e=this.newPlaylistName().trim();if(!e)return;let n={name:e,createdAt:Date.now(),tracks:[this.track.id.toString()]};yield this.playlistService.createPlaylist(n),this.toast.show(`Playlist "${e}" creada y canci\xF3n "${this.track.title}" a\xF1adida`),this.newPlaylistName.set(""),this.isOpen.set(!1)})}toggleDropdown(){this.isOpen.update(e=>!e)}closeDropdown(){this.isOpen.set(!1)}onClickOutside(e){this.elementRef.nativeElement.contains(e)||this.isOpen.set(!1)}static \u0275fac=function(n){return new(n||t)(ee(Mt))};static \u0275cmp=or({type:t,selectors:[["app-add-to-playlist"]],hostBindings:function(n,r){n&1&&mt("click",function(o){return r.onClickOutside(o.target)},!1,PD)},inputs:{track:"track"},decls:4,vars:1,consts:[[1,"relative"],[1,"w-8","h-8","rounded-full","bg-purple-600","text-white","flex","items-center","justify-center","hover:bg-purple-700","shadow-md","z-30","relative",3,"click"],["class","absolute bottom-10 right-0 w-64 pb-3 bg-zinc-900 border border-zinc-700 text-white rounded-lg shadow-xl z-50",3,"clickOutside",4,"ngIf"],[1,"absolute","bottom-10","right-0","w-64","pb-3","bg-zinc-900","border","border-zinc-700","text-white","rounded-lg","shadow-xl","z-50",3,"clickOutside"],[1,"text-sm","font-semibold","px-4","pt-3"],["class","px-4 py-2 space-y-1 max-h-40 overflow-y-auto text-sm",4,"ngIf"],[1,"border-t","border-zinc-700","mt-2","pt-2","px-4"],["placeholder","Nueva playlist",1,"w-full","px-2","py-1","rounded","bg-zinc-800","border","border-zinc-700","text-sm","text-white","mb-2",3,"ngModelChange","ngModel"],[1,"w-full","bg-purple-600","hover:bg-purple-700","text-sm","px-2","py-1","rounded",3,"click"],[1,"px-4","py-2","space-y-1","max-h-40","overflow-y-auto","text-sm"],["class","w-full text-left px-2 py-1 hover:bg-zinc-800 rounded",3,"click",4,"ngFor","ngForOf"],[1,"w-full","text-left","px-2","py-1","hover:bg-zinc-800","rounded",3,"click"]],template:function(n,r){n&1&&(Se(0,"div",0)(1,"button",1),mt("click",function(){return r.toggleDropdown()}),sr(2," + "),Ne(),$t(3,E$,8,2,"div",2),Ne()),n&2&&(We(3),gt("ngIf",r.isOpen()))},dependencies:[ni,Il,pa,GS,lh,jS,j_],encapsulation:2})};function w$(t,e){if(t&1&&xt(0,"app-favorite-button",5),t&2){let n=sn();gt("track",n.track)}}function D$(t,e){if(t&1&&xt(0,"app-add-to-playlist",6),t&2){let n=sn();gt("track",n.track)}}var WS=class t{constructor(e){this.authService=e}track;static \u0275fac=function(n){return new(n||t)(ee(mr))};static \u0275cmp=or({type:t,selectors:[["app-track-card"]],inputs:{track:"track"},decls:11,vars:13,consts:[[1,"bg-white/10","rounded-xl","p-4","flex","gap-4","items-center","hover:shadow-lg","transition-transform","duration-300","hover:scale-[1.02]"],[1,"w-16","h-16","rounded",3,"src","alt"],[1,"flex-1","min-w-0"],[1,"font-semibold","truncate"],[1,"text-sm","text-gray-400"],[1,"pt-2",3,"track"],[3,"track"],[1,"pr-5",3,"previewUrl","title","artist","cover"]],template:function(n,r){n&1&&(Se(0,"div",0),xt(1,"img",1),Se(2,"div",2)(3,"p",3),sr(4),Ne(),Se(5,"span",4),sr(6),kT(7,"number"),Ne()(),$t(8,w$,1,1,"app-favorite-button",5)(9,D$,1,1,"app-add-to-playlist",6),xt(10,"app-preview-button",7),Ne()),n&2&&(We(),gt("src",r.track.album.cover_small,og)("alt",r.track.title),We(3),Cg(r.track.title),We(2),go(" ",OT(7,10,r.track.duration/60,"1.0-0")," min "),We(2),ua(r.authService.currentUser()?8:-1),We(),ua(r.authService.currentUser()?9:-1),We(),gt("previewUrl",r.track.preview)("title",r.track.title)("artist",r.track.artist==null?null:r.track.artist.name)("cover",r.track.album==null?null:r.track.album.cover_medium))},dependencies:[ni,Fg,eh,nh,fh],encapsulation:2})};export{fe as a,ye as b,T$ as c,b$ as d,v as e,Pe as f,YI as g,ne as h,Qh as i,Yh as j,At as k,Ss as l,Ms as m,jt as n,Xh as o,tR as p,nR as q,Pr as r,_t as s,rR as t,xr as u,ef as v,Kc as w,oR as x,Kh as y,Fi as z,gE as A,sR as B,aR as C,Ps as D,tf as E,uR as F,lR as G,nf as H,dR as I,yE as J,vE as K,hR as L,fR as M,pR as N,H as O,X as P,Xs as Q,i9 as R,z as S,ie as T,Ie as U,L as V,rr as W,Mw as X,Jt as Y,to as Z,Wu as _,Zr as $,Jr as aa,ao as ba,o9 as ca,Ju as da,YM as ea,Ge as fa,ei as ga,ra as ha,It as ia,we as ja,Wr as ka,s9 as la,Mt as ma,pe as na,a9 as oa,mP as pa,vP as qa,eg as ra,c9 as sa,el as ta,lo as ua,bP as va,Ws as wa,og as xa,u9 as ya,PD as za,We as Aa,Mu as Ba,xu as Ca,ho as Da,ee as Ea,m9 as Fa,fo as Ga,Vk as Ha,Lk as Ia,or as Ja,aa as Ka,nt as La,$t as Ma,I9 as Na,ca as Oa,E9 as Pa,i1 as Qa,Ys as Ra,ul as Sa,gt as Ta,ua as Ua,w9 as Va,D9 as Wa,T9 as Xa,Se as Ya,Ne as Za,xt as _a,Dg as $a,Tg as ab,la as bb,mt as cb,sn as db,b9 as eb,C9 as fb,$1 as gb,A9 as hb,S9 as ib,N9 as jb,R9 as kb,AT as lb,sr as mb,Cg as nb,go as ob,z1 as pb,Ag as qb,NT as rb,Sg as sb,M9 as tb,P9 as ub,x9 as vb,kT as wb,k9 as xb,OT as yb,VT as zb,O9 as Ab,F9 as Bb,hl as Cb,V9 as Db,fl as Eb,Ht as Fb,pl as Gb,L9 as Hb,da as Ib,ti as Jb,mO as Kb,Mg as Lb,yO as Mb,yo as Nb,GT as Ob,WT as Pb,EO as Qb,RO as Rb,Il as Sb,pa as Tb,Fg as Ub,ni as Vb,kO as Wb,OO as Xb,FO as Yb,Vg as Zb,DG as _b,lh as $b,jS as ac,CQ as bc,u$ as cc,j_ as dc,SQ as ec,p$ as fc,m$ as gc,GS as hc,th as ic,nh as jc,XF as kc,A5 as lc,S5 as mc,HW as nc,qW as oc,mr as pc,is as qc,kK as rc,OK as sc,Jd as tc,eh as uc,Xd as vc,fh as wc,WS as xc};
